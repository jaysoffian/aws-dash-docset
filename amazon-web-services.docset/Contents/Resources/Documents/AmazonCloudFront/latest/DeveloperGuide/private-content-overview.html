<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Overview of Serving Private Content - Amazon CloudFront</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="PrivateContent.html" title="Serving Private Content with Signed URLs and Signed Cookies">
      <link rel="prev" href="PrivateContent.html" title="Serving Private Content with Signed URLs and Signed Cookies">
      <link rel="next" href="private-content-task-list.html" title="Task List: Serving Private Content">
      <meta name="description" content="You can control user access to your private content in two ways, as shown in the following illustration:">
      <meta name="keywords" content="Amazon CloudFront,CloudFront,cache,distribution,edge,geo,HTTP,HTTPS,media,origin,RTMP,streaming">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon CloudFront">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <meta name="tocs" content="toc-contents.json">
      <meta name="marketingLocale" content="en_US">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/private-content-overview.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20181221"></script><link rel="stylesheet" type="text/css" href="../../../css/marketing-target.css"><script type="text/javascript" src="/assets/marketing/js/marketing-target.js"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="/index.html">AWS Documentation</a> &#xBB; <a href="/cloudfront/index.html">Amazon CloudFront</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="SecurityAndPrivateContent.html">Configuring Secure Access and Limiting Access to Content</a> &#xBB; <a href="PrivateContent.html">Serving Private Content with Signed URLs and Signed Cookies</a> &#xBB; <span class="breadcrumb">Overview of Serving Private Content</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div id="language-notice">
                        <div class="language-notice-text"></div>
                     </div>
                     <div></div>
                     <h1 class="topictitle" id="private-content-overview">Overview of Serving Private Content</h1>
                     <p>You can control user access to your private content in two ways, as shown in the following
                        illustration:
                     </p>
                     <div class="orderedlist">
                        			
                        			
                        		
                        <ol>
                           <li>
                              				
                              <p>Restrict access to files in CloudFront edge caches</p>
                              			
                           </li>
                           <li>
                              				
                              <p>Restrict access to files in your origin by doing one of the following: </p>
                              			
                              <div class="itemizedlist">
                                 				
                                 				
                                 			
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       <p>Set up an origin access identity (OAI) for your Amazon S3 bucket (unless you&apos;ve configured
                                          it as a website endpoint)
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>Configure custom headers for a private HTTP server or an Amazon S3 bucket configured
                                          as a website endpoint
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                              			
                           </li>
                        </ol>
                     </div>
                     <div class="mediaobject">
                        			
                        				
                        				<img src="../../..//img/PrivateContent_TwoPartsNew.png" alt="
				The two ways to restrict file access in CloudFront
			">
                        				
                        				
                        			
                        			
                        		
                     </div>
                     			
                     <h2 id="private-content-overview-edge-caches">Restricting Access to Files in CloudFront Edge Caches</h2>
                     
                     			
                     <p>You can configure CloudFront to require that users access your files using either
                        <b>signed
                           					URLs</b> or <b>signed cookies</b>. You then develop your application either
                        				to create and distribute signed URLs to authenticated users or to send <code class="code">Set-Cookie</code> headers that set
                        				signed cookies on the viewers for authenticated users. (To give a few users long-term
                        access to a limited number
                        				of files, you can also create signed URLs manually.) 
                     </p>
                     			
                     <p>When you create signed URLs or signed cookies to control access to your files, you
                        can specify the following
                        				restrictions:
                     </p>
                     			
                     <div class="itemizedlist">
                        				
                        				
                        				
                        			
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              					
                              <p>An ending date and time, after which the URL is no longer valid. </p>
                              				
                           </li>
                           <li class="listitem">
                              					
                              <p>(Optional) The date and time that the URL becomes valid.</p>
                              				
                           </li>
                           <li class="listitem">
                              					
                              <p>(Optional) The IP address or range of addresses of the computers that can be used
                                 to access your
                                 						content. 
                              </p>
                              				
                           </li>
                        </ul>
                     </div>
                     			
                     <p>One part of a signed URL or a signed cookie is hashed and signed using the private
                        key from a public/private key
                        				pair. When someone uses a signed URL or signed cookie to access a file, CloudFront
                        compares the signed and unsigned
                        				portions of the URL or cookie. If they don&apos;t match, CloudFront doesn&apos;t serve the
                        file.
                     </p>
                     		
                     			
                     <h2 id="private-content-overview-s3">Restricting Access to Files in Amazon S3 Buckets</h2>
                     
                     			
                     <p>You can optionally secure the content in your Amazon S3 bucket so that users can access
                        it through CloudFront but cannot access
                        				it directly by using Amazon S3 URLs. This prevents someone from bypassing CloudFront
                        and using the Amazon S3 URL to get content
                        				that you want to restrict access to. This step isn&apos;t required to use signed URLs,
                        but we recommend it. Be aware
                        				that this option is only available if you have not set up your Amazon S3 bucket
                        as a website endpoint.
                     </p>
                     			
                     <p>To require that users access your content through CloudFront URLs, you perform the
                        following tasks:
                     </p>
                     			
                     <div class="itemizedlist">
                        				
                        				
                        				
                        			
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              					
                              <p>Create a special CloudFront user called an <b>origin access identity</b>.
                              </p>
                              				
                           </li>
                           <li class="listitem">
                              					
                              <p>Give the origin access identity permission to read the files in your bucket.</p>
                              				
                           </li>
                           <li class="listitem">
                              					
                              <p>Remove permission for anyone else to use Amazon S3 URLs to read the files.</p>
                              				
                           </li>
                        </ul>
                     </div>
                     			
                     <p>For more information, see <a href="private-content-restricting-access-to-s3.html">Restricting Access to Amazon S3 Content by Using an Origin
                           				Access Identity</a>.
                     </p>
                     		
                     <h2 id="forward-custom-headers-restrict-access">
                        			Restricting Access to Files on Custom Origins
                     </h2>
                     
                     			
                     <p>If you use a custom origin, you can optionally set up custom headers to restrict access.
                        For CloudFront to get your files 
                        				from a custom origin, the files must be publicly accessible. But by using custom
                        
                        				headers, you can restrict access to your content so that users can access it only
                        through CloudFront,
                        				not directly. This step isn&apos;t required to use signed URLs, but we recommend it.
                     </p>
                     			
                     			
                     <p>To require that users access content through CloudFront, change the following settings
                        in your CloudFront distributions:
                     </p>
                     			
                     			
                     <div class="variablelist">
                        				
                        				
                        				
                        			
                        <dl>
                           					
                           <dt><b><span class="term">Origin Custom Headers</span></b></dt>
                           					
                           <dd>
                              <p>Configure CloudFront to forward custom headers to your origin. 
                                 						See <a href="forward-custom-headers.html#forward-custom-headers-configure">Configuring CloudFront to Forward Custom Headers to Your Origin</a>.
                              </p>
                           </dd>
                           				
                           					
                           <dt><b><span class="term">Viewer Protocol Policy</span></b></dt>
                           					
                           <dd>
                              <p>Configure your distribution to require viewers to use HTTPS to access CloudFront.
                                 
                                 						See <a href="distribution-web-values-specify.html#DownloadDistValuesViewerProtocolPolicy">Viewer Protocol Policy</a>.
                                 					
                              </p>
                           </dd>
                           				
                           					
                           <dt><b><span class="term">Origin Protocol Policy</span></b></dt>
                           					
                           <dd>
                              <p>Configure your distribution to require CloudFront to use the same protocol as viewers
                                 to forward requests 
                                 						to the origin. 
                                 						See <a href="distribution-web-values-specify.html#DownloadDistValuesOriginProtocolPolicy">Origin Protocol Policy</a>.
                                 					
                              </p>
                           </dd>
                           				
                        </dl>
                     </div>
                     			
                     			
                     <p>After you&apos;ve made these changes, update your application on your custom origin to
                        only accept requests that include these
                        			headers.
                     </p>
                     			
                     <p>The combination of <b>Viewer Protocol Policy</b> and <b>Origin Protocol Policy</b> ensure that your 
                        				custom headers are encrypted between the viewer and your origin. However, we recommend
                        that you periodically do the following 
                        				to rotate the custom headers that CloudFront forwards to your origin:
                     </p>
                     			
                     <div class="orderedlist">
                        				
                        				
                        				
                        			
                        <ol>
                           <li>
                              <p>Update your CloudFront distribution to begin forwarding a new header to your custom
                                 origin.
                              </p>
                           </li>
                           <li>
                              <p>Update your application to accept the new header as confirmation that the request
                                 is coming from CloudFront.
                              </p>
                           </li>
                           <li>
                              <p>When viewer requests no longer include the header that you&apos;re replacing, update your
                                 application to no longer accept 
                                 					the old header as confirmation that the request is coming from CloudFront.
                              </p>
                           </li>
                        </ol>
                     </div>
                     			
                     		
                     <div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div>
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                       browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be
                                    enabled. Please refer to your browser's Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="PrivateContent.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="private-content-task-list.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2019, Amazon Web Services, Inc. or its affiliates. All rights
                        reserved.
                     </div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Restricting Access to Files in CloudFront Edge Caches"><a class="pagetoc" href="#private-content-overview-edge-caches">Restricting Access to Files in CloudFront Edge Caches</a></li>
                        <li class="pagetoc" name="Restricting Access to Files in Amazon S3 Buckets"><a class="pagetoc" href="#private-content-overview-s3">Restricting Access to Files in Amazon S3 Buckets</a></li>
                        <li class="pagetoc" name="
			Restricting Access to Files on Custom Origins"><a class="pagetoc" href="#forward-custom-headers-restrict-access">
                              			Restricting Access to Files on Custom Origins</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="cookie-notice">
         <div class="cookie-notice-text">We use cookies to provide and improve our services. By using
            our site, you consent to cookies. <a href="http://aws.amazon.com/legal/cookies">Learn more</a></div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon CloudFront';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>