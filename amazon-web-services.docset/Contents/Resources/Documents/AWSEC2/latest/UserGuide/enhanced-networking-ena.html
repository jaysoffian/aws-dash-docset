<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Enabling Enhanced Networking with the Elastic
         Network Adapter (ENA) on Linux Instances - Amazon Elastic Compute Cloud
      </title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="enhanced-networking.html" title="Enhanced Networking on Linux">
      <link rel="prev" href="enhanced-networking.html" title="Enhanced Networking on Linux">
      <link rel="next" href="enhanced-networking-os.html" title="Operating System Optimizations">
      <meta name="description" content="Enable enhanced networking capabilities with the Elastic Network Adapter (ENA) on supported Linux instances in a VPC.">
      <meta name="keywords" content="EC2,Amazon EC2,EC2 instance,instance,VM,virtual machine">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon Elastic Compute Cloud">
      <meta name="guide" content="User Guide for Linux Instances">
      <meta name="guide-locale" content="en_us">
      <meta name="tocs" content="toc-contents.json">
      <meta name="marketingLocale" content="en_US">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/enhanced-networking-ena.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20181221"></script><link rel="stylesheet" type="text/css" href="../../../css/marketing-target.css"><script type="text/javascript" src="/assets/marketing/js/marketing-target.js"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="/index.html">AWS Documentation</a> &#xBB; <a href="/ec2/index.html">Amazon EC2</a> &#xBB; <a href="index.html">User Guide for Linux Instances</a> &#xBB; <a href="EC2_Network_and_Security.html">Network and Security</a> &#xBB; <a href="enhanced-networking.html">Enhanced Networking on Linux</a> &#xBB; <span class="breadcrumb">Enabling Enhanced Networking with the Elastic
                                    Network Adapter (ENA) on Linux Instances</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div id="language-notice">
                        <div class="language-notice-text"></div>
                     </div>
                     <div></div>
                     <h1 class="topictitle" id="enhanced-networking-ena">Enabling Enhanced Networking with the Elastic
                        Network Adapter (ENA) on <span>Linux</span> Instances
                     </h1>
                     <p>Amazon EC2 provides enhanced networking capabilities through the Elastic Network Adapter
                        (ENA).
                     </p>
                     <div class="highlights">
                        <p><strong>Contents</strong></p>
                        <ul>
                           <li><a href="#ena-requirements">Requirements</a></li>
                           <li><a href="#ena-data-encryption-in-transit">Data Encryption</a></li>
                           <li><a href="#test-enhanced-networking-ena">Testing Whether Enhanced Networking Is Enabled</a></li>
                           <li><a href="#enable-enhanced-networking-ena-AL">Enabling Enhanced Networking on the Amazon Linux AMI</a></li>
                           <li><a href="#enhanced-networking-ena-ubuntu">Enabling Enhanced Networking on Ubuntu</a></li>
                           <li><a href="#enhanced-networking-ena-linux">Enabling Enhanced Networking on Linux</a></li>
                           <li><a href="#enhanced-networking-ena-ubuntu-dkms">Enabling Enhanced Networking on Ubuntu with DKMS</a></li>
                           <li><a href="#enhanced-networking-ena-troubleshooting">Troubleshooting</a></li>
                           <li><a href="enhanced-networking-os.html">Operating System Optimizations</a></li>
                        </ul>
                     </div>
                     
                     <h2 id="ena-requirements">Requirements</h2>
                     
                     <p>To prepare for enhanced networking using the ENA, set up your instance as follows:</p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>Select from the following supported instance types: <span>A1, </span>C5, C5d, C5n, F1, G3, H1, I3, I3en, <code class="code">m4.16xlarge</code>, M5, M5a, M5ad, M5d, P2, P3, R4, R5, R5a, R5ad, R5d, T3, T3a, <code class="code">u-6tb1.metal</code>, <code class="code">u-9tb1.metal</code>, <code class="code">u-12tb1.metal</code>, X1, X1e, and z1d.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Launch the instance using a supported version of the Linux kernel and 
                                 a supported distribution, so that ENA enhanced networking is enabled for 
                                 your instance automatically. For more information, see <a href="https://github.com/amzn/amzn-drivers/blob/ena_linux_1.6.0/kernel/linux/ena/RELEASENOTES.md" target="_blank">ENA Linux Kernel Driver Release Notes</a>.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Ensure that the instance has internet connectivity.</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Install and configure the <a href="./cli/latest/userguide/cli-chap-getting-set-up.html">AWS CLI</a> or the
                                 <a href="./powershell/latest/userguide/">AWS Tools for Windows PowerShell</a> on any computer you choose,
                                 preferably your local desktop or laptop. For more information, see <a href="concepts.html#access-ec2">Accessing Amazon EC2</a>. Enhanced networking
                                 cannot be managed from the Amazon EC2 console.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>If you have important data on the instance that you want to preserve, you
                                 should back that data up now by creating an AMI from your instance. Updating
                                 kernels and kernel modules, as well as enabling the <code class="code">enaSupport</code>
                                 attribute, might render incompatible instances or operating systems
                                 unreachable; if you have a recent backup, your data will still be retained
                                 if this happens.
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     
                     <h2 id="ena-data-encryption-in-transit">Data Encryption</h2>
                     
                     
                     <p>AWS provides secure and private connectivity between EC2 instances. In addition,
                        we automatically encrypt in-transit traffic between C5n, I3en, and P3dn instances
                        in 
                        the same VPC or in peered VPCs, using AEAD algorithms with 256-bit encryption. This
                        encryption feature uses the offload capabilities of the underlying hardware, and
                        there is no impact on network performance.
                     </p>
                     
                     
                     <h2 id="test-enhanced-networking-ena">Testing Whether Enhanced Networking Is Enabled</h2>
                     
                     
                     <p>To test whether enhanced networking is already
                        enabled, verify that the <span><code>ena</code> module</span>
                        is installed on your instance<span> and that
                           the <code class="code">enaSupport</code> attribute is set</span>. <span>If
                           your instance satisfies these two conditions, then the <b>ethtool -i
                              eth<em class="replaceable"><code>n</code></em></b> command should show that the
                           module is in use on the network interface.</span></p>
                     
                     
                     <p class="title"><b>Kernel Module (ena)</b></p>
                     
                     <p>To verify that the <code>ena</code> module is installed, use the
                        <b>modinfo</b> command as follows:
                     </p>
                     
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>modinfo ena</code></strong><code class="computeroutput" copy="false">
filename:       /lib/modules/4.14.33-59.37.amzn2.x86_64/kernel/drivers/amazon/net/ena/ena.ko
version:        1.5.0g
license:        GPL
description:    Elastic Network Adapter (ENA)
author:         Amazon.com, Inc. or its affiliates
srcversion:     692C7C68B8A9001CB3F31D0
alias:          pci:v00001D0Fd0000EC21sv*sd*bc*sc*i*
alias:          pci:v00001D0Fd0000EC20sv*sd*bc*sc*i*
alias:          pci:v00001D0Fd00001EC2sv*sd*bc*sc*i*
alias:          pci:v00001D0Fd00000EC2sv*sd*bc*sc*i*
depends:
retpoline:      Y
intree:         Y
name:           ena
...</code></code></pre>
                     <p>In the above Amazon Linux case, the <code>ena</code> module is
                        installed.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">ubuntu:~$ </code><strong class="userinput"><code>modinfo ena</code></strong><code class="computeroutput" copy="false">
ERROR: modinfo: could not find module ena</code></code></pre>
                     <p>In the above Ubuntu instance, the module is not installed, so you must
                        first install it. For more information, see <a href="enhanced-networking-ena.html#enhanced-networking-ena-ubuntu">Enabling Enhanced Networking on Ubuntu</a>.
                     </p>
                     
                     
                     <div class="itemizedlist">
                        
                        <p class="title"><b>Instance Attribute (enaSupport)</b></p>
                        
                        <p>To check whether an instance has the enhanced networking <code class="code">enaSupport</code> 
                           attribute set, use one of the following commands. If the attribute is set, the 
                           response is true.
                        </p>
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><a href="./cli/latest/reference/ec2/describe-instances.html">describe-instances</a> (AWS CLI)
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>aws ec2 describe-instances --instance-ids <em class="replaceable"><code>instance_id</code></em> --query &quot;Reservations[].Instances[].EnaSupport&quot;</code></strong></code></pre>
                              </li>
                           <li class="listitem">
                              
                              <p><a href="./powershell/latest/reference/items/Get-EC2Instance.html">Get-EC2Instance</a> (Tools for Windows PowerShell)
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>(Get-EC2Instance -InstanceId <em class="replaceable"><code>instance-id</code></em>).Instances.EnaSupport</code></strong></code></pre>
                              </li>
                        </ul>
                     </div>
                     
                     
                     
                     <p class="title"><b>Image Attribute (enaSupport)</b></p>
                     
                     <p>To check whether an AMI has the enhanced networking <code class="code">enaSupport</code> 
                        attribute set, use one of the following commands. If the attribute is set, the 
                        response is true.
                     </p>
                     
                     
                     <div class="itemizedlist">
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><a href="./cli/latest/reference/ec2/describe-images.html">describe-images</a> (AWS CLI)
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>aws ec2 describe-images --image-id <em class="replaceable"><code>ami_id</code></em> --query &quot;Images[].EnaSupport&quot;</code></strong></code></pre>
                              </li>
                           <li class="listitem">
                              
                              <p><a href="./powershell/latest/reference/items/Get-EC2Image.html">Get-EC2Image</a> (Tools for Windows PowerShell)
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>(Get-EC2Image -ImageId <em class="replaceable"><code>ami_id</code></em>).EnaSupport</code></strong></code></pre>
                              </li>
                        </ul>
                     </div>
                     
                     
                     
                     <p class="title"><b>Network Interface Driver</b></p>
                     
                     <p>Use the following command to verify that the <code>ena</code> module is
                        being used on a particular interface, substituting the interface name that you
                        wish to check. If you are using a single interface (default), it will be
                        <code class="code">eth0</code>.
                     </p>
                     
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>ethtool -i eth<em class="replaceable"><code>0</code></em></code></strong><code class="computeroutput" copy="false">
driver: vif
version:
firmware-version:
bus-info: vif-0
supports-statistics: yes
supports-test: no
supports-eeprom-access: no
supports-register-dump: no
supports-priv-flags: no</code></code></pre>
                     <p>In the above case, the <code>ena</code> module is not loaded,
                        because the listed driver is <code>vif</code>.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>ethtool -i eth<em class="replaceable"><code>0</code></em></code></strong><code class="computeroutput" copy="false">
driver: ena
version: 1.5.0g
firmware-version:
expansion-rom-version:
bus-info: 0000:00:05.0
supports-statistics: yes
supports-test: no
supports-eeprom-access: no
supports-register-dump: no
supports-priv-flags: no</code></code></pre>
                     <p>In this case, the <code>ena</code> module is loaded and at the
                        minimum recommended version. This instance has enhanced networking properly
                        configured.
                     </p>
                     
                     
                     <h2 id="enable-enhanced-networking-ena-AL">Enabling Enhanced Networking on the Amazon Linux AMI</h2>
                     
                     
                     <p>Amazon Linux 2 and the latest versions of the Amazon Linux AMI have the module required
                        for
                        enhanced networking installed and have the required <code class="code">enaSupport</code>
                        attribute set. Therefore, if you launch an instance with an HVM version of Amazon
                        Linux on a
                        supported instance type, enhanced networking is already enabled for your
                        instance. For more information, see <a href="enhanced-networking-ena.html#test-enhanced-networking-ena">Testing Whether Enhanced Networking Is Enabled</a>.
                     </p>
                     
                     <p>If you launched your instance using an older Amazon Linux AMI and it does not
                        have enhanced networking enabled already, use the following procedure to enable
                        enhanced networking.
                     </p>           
                     
                     
                     <p class="title"><b>To enable enhanced networking on Amazon Linux AMI</b></p>
                     <ol>
                        <li><a id="amazon-linux-enhanced-networking-ena-start-step-AL"></a>
                           
                           <p>Connect to your instance.</p>
                           
                        </li>
                        <li>
                           
                           <p>From the instance, run the following command to update your instance with
                              the newest kernel and kernel modules, including
                              <code>ena</code>:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code><b>sudo yum</b> update</code></strong></code></pre>
                           </li>
                        <li>
                           
                           <p>From your local computer, reboot your instance using the Amazon EC2 console or
                              one of the following commands: <a href="./cli/latest/reference/ec2/reboot-instances.html">reboot-instances</a>
                              (AWS CLI),  <a href="./powershell/latest/reference/items/Restart-EC2Instance.html">Restart-EC2Instance</a> (AWS Tools for Windows PowerShell).
                           </p>
                           
                        </li>
                        <li><a id="amazon-linux-enhanced-networking-ena-stop-step-AL"></a>
                           
                           <p>Connect to your instance again and verify that the <code>ena</code>
                              module is installed and at the minimum recommended version using the
                              <b>modinfo ena</b> command from <a href="enhanced-networking-ena.html#test-enhanced-networking-ena">Testing Whether Enhanced Networking Is Enabled</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>[EBS-backed instance] From your local computer, stop the instance using the Amazon
                              EC2 console or one
                              of the following commands: <a href="./cli/latest/reference/ec2/stop-instances.html">stop-instances</a> (AWS CLI), 
                              <a href="./powershell/latest/reference/items/Stop-EC2Instance.html">Stop-EC2Instance</a> (AWS Tools for Windows PowerShell). If your instance 
                              is managed by AWS OpsWorks, you should stop the instance in the AWS OpsWorks console
                              so that the instance state remains in
                              sync.
                           </p>
                           
                           <p>[Instance store-backed instance] You can&apos;t stop the instance to modify the attribute.
                              Instead, proceed to 
                              this procedure: <a href="enhanced-networking-ena.html#enhanced-networking-ena-instance-store-AL">To enable enhanced
                                 networking on Amazon Linux AMI (instance store-backed instances)</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>From your local computer, enable the enhanced networking attribute using
                              one of the following commands:
                           </p>
                           
                           <div class="itemizedlist">
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p><a href="./cli/latest/reference/ec2/modify-instance-attribute.html">modify-instance-attribute</a> (AWS CLI)
                                    </p>
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>aws ec2 modify-instance-attribute --instance-id <em class="replaceable"><code>instance_id</code></em> --ena-support</code></strong></code></pre>
                                    </li>
                                 <li class="listitem">
                                    
                                    <p><a href="./powershell/latest/reference/items/Edit-EC2InstanceAttribute.html">Edit-EC2InstanceAttribute</a> (Tools for Windows PowerShell)
                                    </p>
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>Edit-EC2InstanceAttribute -InstanceId <em class="replaceable"><code>instance-id</code></em> -EnaSupport $true</code></strong></code></pre>
                                    </li>
                              </ul>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>(Optional) Create an AMI from the instance, as described in <a href="creating-an-ami-ebs.html">Creating an Amazon EBS-Backed Linux AMI</a>. The AMI
                              inherits the enhanced networking <code class="code">enaSupport</code> attribute
                              from the instance. Therefore, you can use this AMI to launch another
                              instance with enhanced networking enabled by default.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>From your local computer, start the instance using the Amazon EC2 console or
                              one of the following commands: <a href="./cli/latest/reference/ec2/start-instances.html">start-instances</a>
                              (AWS CLI), <a href="./powershell/latest/reference/items/Start-EC2Instance.html">Start-EC2Instance</a> (AWS Tools for Windows PowerShell). If your instance is managed by
                              AWS OpsWorks, you should start the instance in the AWS OpsWorks console so that the
                              instance state remains in sync.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Connect to your instance and verify that the <code>ena</code> module
                              is installed and loaded on your network interface using the <b>ethtool
                                 -i eth<em class="replaceable"><code>n</code></em></b> command from <a href="enhanced-networking-ena.html#test-enhanced-networking-ena">Testing Whether Enhanced Networking Is Enabled</a>.
                           </p>
                           
                           <p>If you are unable to connect to your instance after
                              enabling enhanced networking, see <a href="troubleshooting-ena.html">Troubleshooting the Elastic Network Adapter (ENA)</a>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     <div class="itemizedlist">
                        
                        <p class="title"><b>To enable enhanced
                              networking on Amazon Linux AMI (instance store-backed instances)</b></p>
                        
                        <p>Follow the previous procedure until the step where you stop the instance. Create a
                           new AMI as described 
                           in <a href="creating-an-ami-instance-store.html">Creating an Instance Store-Backed Linux AMI</a>, 
                           making sure to enable the enhanced networking attribute when you register the AMI.
                        </p>
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><a href="./cli/latest/reference/ec2/register-image.html">register-image</a>
                                 (AWS CLI)
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>aws ec2 register-image --ena-support<code class="code" copy="false"> ...</code></code></strong></code></pre>
                              </li>
                           <li class="listitem">
                              
                              <p><a href="./powershell/latest/reference/items/Register-EC2Image.html">Register-EC2Image</a> (AWS Tools for Windows PowerShell)
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>Register-EC2Image -EnaSupport $true<code class="code" copy="false"> ...</code></code></strong></code></pre>
                              </li>
                        </ul>
                     </div>
                     
                     
                     <h2 id="enhanced-networking-ena-ubuntu">Enabling Enhanced Networking on Ubuntu</h2>
                     
                     
                     <p>The latest Ubuntu HVM AMIs have the module required for enhanced networking with
                        ENA installed and have the required <code class="code">enaSupport</code> attribute set.
                        Therefore, if you launch an instance with the latest Ubuntu HVM AMI on a supported
                        instance type, enhanced networking is already enabled for your instance. For more
                        information, see <a href="enhanced-networking-ena.html#test-enhanced-networking-ena">Testing Whether Enhanced Networking Is Enabled</a>. 
                     </p>
                     
                     
                     <p>If you launched your instance using an older AMI and it does not have enhanced
                        networking enabled already, you can install the <code>linux-aws</code>
                        kernel package to get the latest enhanced networking drivers and update the
                        required attribute.
                     </p>
                     
                     
                     <p class="title"><b>To install the linux-aws kernel package (Ubuntu 16.04 or later)</b></p>
                     
                     <p>Ubuntu 16.04 and 18.04 ship with the Ubuntu custom kernel (linux-aws kernel package).
                        
                        To use a different kernel, contact <a href="https://console.aws.amazon.com/support" target="_blank">AWS Support</a>.
                     </p>
                     
                     <a id="ubuntu-enhanced-networking-ena-procedure"></a><p class="title"><b>To install the linux-aws
                           kernel package (Ubuntu Trusty 14.04)</b></p>
                     <ol>
                        <li><a id="ubuntu-enhanced-networking-ena-start-step"></a>
                           
                           <p>Connect to your instance.</p>
                           
                        </li>
                        <li>
                           
                           <p>Update the package cache and packages.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">ubuntu:~$ </code><strong class="userinput"><code>sudo apt-get update &amp;&amp; sudo apt-get upgrade -y linux-aws</code></strong></code></pre>
                           <div class="aws-note">
                              <p class="aws-note">Important</p>
                              <p>If during the update process you are prompted to install
                                 <code>grub</code>, use <code>/dev/xvda</code> to
                                 install <code>grub</code> onto, and then choose to keep the
                                 current version of <code>/boot/grub/menu.lst</code>.
                              </p>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>[EBS-backed instance] From your local computer, stop the instance using the Amazon
                              EC2 console or one
                              of the following commands: <a href="./cli/latest/reference/ec2/stop-instances.html">stop-instances</a> (AWS CLI), 
                              <a href="./powershell/latest/reference/items/Stop-EC2Instance.html">Stop-EC2Instance</a> (AWS Tools for Windows PowerShell). If your instance 
                              is managed by AWS OpsWorks, you should stop the instance in the AWS OpsWorks console
                              so that the instance state remains in
                              sync.
                           </p>
                           
                           <p>[Instance store-backed instance] You can&apos;t stop the instance to modify the attribute.
                              Instead, proceed to 
                              this procedure: <a href="enhanced-networking-ena.html#enhanced-networking-ena-instance-store-ubuntu">To enable enhanced
                                 networking on Ubuntu (instance store-backed instances)</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>From your local computer, enable the enhanced networking attribute using
                              one of the following commands:
                           </p>
                           
                           <div class="itemizedlist">
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p><a href="./cli/latest/reference/ec2/modify-instance-attribute.html">modify-instance-attribute</a> (AWS CLI)
                                    </p>
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>aws ec2 modify-instance-attribute --instance-id <em class="replaceable"><code>instance_id</code></em> --ena-support</code></strong></code></pre>
                                    </li>
                                 <li class="listitem">
                                    
                                    <p><a href="./powershell/latest/reference/items/Edit-EC2InstanceAttribute.html">Edit-EC2InstanceAttribute</a> (Tools for Windows PowerShell)
                                    </p>
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>Edit-EC2InstanceAttribute -InstanceId <em class="replaceable"><code>instance-id</code></em> -EnaSupport $true</code></strong></code></pre>
                                    </li>
                              </ul>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>(Optional) Create an AMI from the instance, as described in <a href="creating-an-ami-ebs.html">Creating an Amazon EBS-Backed Linux AMI</a>. The AMI inherits the enhanced networking <code class="code">enaSupport</code> 
                              attribute from the instance. Therefore, you can use this AMI to launch another instance
                              with 
                              enhanced networking enabled by default.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>From your local computer, start the instance using the Amazon EC2 console or
                              one of the following commands: <a href="./cli/latest/reference/ec2/start-instances.html">start-instances</a>
                              (AWS CLI), <a href="./powershell/latest/reference/items/Start-EC2Instance.html">Start-EC2Instance</a> (AWS Tools for Windows PowerShell). If your instance is managed by
                              AWS OpsWorks, you should start the instance in the AWS OpsWorks console so that the
                              instance state remains in sync.
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     <div class="itemizedlist">
                        
                        <p class="title"><b>To enable enhanced
                              networking on Ubuntu (instance store-backed instances)</b></p>
                        
                        <p>Follow the previous procedure until the step where you stop the instance. Create a
                           new AMI as described 
                           in <a href="creating-an-ami-instance-store.html">Creating an Instance Store-Backed Linux AMI</a>, 
                           making sure to enable the enhanced networking attribute when you register the AMI.
                        </p>
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><a href="./cli/latest/reference/ec2/register-image.html">register-image</a>
                                 (AWS CLI)
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>aws ec2 register-image --ena-support<code class="code" copy="false"> ...</code></code></strong></code></pre>
                              </li>
                           <li class="listitem">
                              
                              <p><a href="./powershell/latest/reference/items/Register-EC2Image.html">Register-EC2Image</a> (AWS Tools for Windows PowerShell)
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>Register-EC2Image -EnaSupport $true<code class="code" copy="false"> ...</code></code></strong></code></pre>
                              </li>
                        </ul>
                     </div>
                     
                     
                     
                     <h2 id="enhanced-networking-ena-linux">Enabling Enhanced Networking on Linux</h2>
                     
                     <p>The following procedure provides the general steps for enabling enhanced
                        networking on a Linux distribution other than Amazon Linux AMI or Ubuntu, such as
                        SUSE
                        Linux Enterprise Server (SLES), Red Hat Enterprise Linux, or CentOS. Before you
                        begin, see <a href="enhanced-networking-ena.html#test-enhanced-networking-ena">Testing Whether Enhanced Networking Is Enabled</a> to check if your instance is
                        already enabled for enhanced networking. For more information, such as detailed
                        syntax for commands, file locations, or package and tool support, see the specific
                        documentation for your Linux distribution.
                     </p>
                     
                     <p class="title"><b>To enable enhanced networking on Linux</b></p>
                     <ol>
                        <li><a id="other-linux-enhanced-networking-ena-start-step"></a>
                           
                           <p>Connect to your instance.</p>
                           
                        </li>
                        <li>
                           
                           <p>Clone the source code for the <code>ena</code> module on your
                              instance from GitHub at <a href="https://github.com/amzn/amzn-drivers" target="_blank">https://github.com/amzn/amzn-drivers</a>.
                              (SUSE SLES 12 SP2 and later include ENA 2.02 by default, so you are not
                              required to download and compile the ENA driver. For SLES 12 SP2 and later,
                              you should file a request to add the driver version you want to the stock
                              kernel). 
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>git clone https://github.com/amzn/amzn-drivers</code></strong></code></pre>
                           </li>
                        <li>
                           
                           <p>Compile and install the <code>ena</code> module on your instance.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Run the <b>sudo depmod</b> command to update module
                              dependencies.
                           </p>
                           
                        </li>
                        <li><a id="other-linux-enhanced-networking-ena-stop-step"></a>
                           
                           <p>Update <code>initramfs</code> on your instance to ensure that the
                              new module loads at boot time. For example, if your distribution supports
                              <b>dracut</b>, you can use the following command:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>dracut -f -v</code></strong></code></pre>
                           </li>
                        <li>
                           
                           <p>Determine if your system uses predictable network interface names by
                              default. Systems that use <b>systemd</b> or
                              <b>udev</b> versions 197 or greater can rename Ethernet
                              devices and they do not guarantee that a single network interface will be
                              named <code class="code">eth0</code>. This behavior can cause problems connecting
                              to your instance. For more information and to see other configuration
                              options, see <a href="https://www.freedesktop.org/wiki/Software/systemd/PredictableNetworkInterfaceNames/" target="_blank">Predictable Network Interface Names</a> on the freedesktop.org
                              website.
                           </p>
                           
                           <ol>
                              <li>
                                 
                                 <p>You can check the <b>systemd</b> or
                                    <b>udev</b> versions on RPM-based systems with the
                                    following command:
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>rpm -qa | grep -e &apos;^systemd-[0-9]\+\|^udev-[0-9]\+&apos;</code></strong><code class="computeroutput" copy="false">
systemd-208-11.el7_0.2.x86_64</code></code></pre>
                                 <p>In the above Red Hat Enterprise Linux 7 example, the <b>systemd</b> version
                                    is 208, so predictable network interface names must be disabled.
                                 </p>
                                 
                              </li>
                              <li>
                                 
                                 <p>Disable predictable network interface names by adding the
                                    <code class="code">net.ifnames=0</code> option to the
                                    <code class="code">GRUB_CMDLINE_LINUX</code> line in
                                    <code>/etc/default/grub</code>.
                                 </p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>sudo sed -i &apos;/^GRUB\_CMDLINE\_LINUX/s/\&quot;$/\ net\.ifnames\=0\&quot;/&apos; /etc/default/grub</code></strong></code></pre>
                                 </li>
                              <li>
                                 
                                 <p>Rebuild the grub configuration file.</p>
                                 <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>sudo grub2-mkconfig -o /boot/grub2/grub.cfg</code></strong></code></pre>
                                 </li>
                           </ol>
                           
                        </li>
                        <li>
                           
                           <p>[EBS-backed instance] From your local computer, stop the instance using the Amazon
                              EC2 console or one
                              of the following commands: <a href="./cli/latest/reference/ec2/stop-instances.html">stop-instances</a> (AWS CLI), 
                              <a href="./powershell/latest/reference/items/Stop-EC2Instance.html">Stop-EC2Instance</a> (AWS Tools for Windows PowerShell). If your instance 
                              is managed by AWS OpsWorks, you should stop the instance in the AWS OpsWorks console
                              so that the instance state remains in
                              sync.
                           </p>
                           
                           <p>[Instance store-backed instance] You can&apos;t stop the instance to modify the attribute.
                              Instead, proceed to 
                              this procedure: <a href="enhanced-networking-ena.html#other-linux-enhanced-networking-ena-instance-store">To enable enhanced networking on Linux (instance store&#x2013;backed instances)</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>From your local computer, enable the enhanced networking <code class="code">enaSupport</code> attribute using 
                              one of the following commands:
                           </p>
                           
                           <div class="itemizedlist">
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p><a href="./cli/latest/reference/ec2/modify-instance-attribute.html">modify-instance-attribute</a> (AWS CLI)
                                    </p>
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>aws ec2 modify-instance-attribute --instance-id <em class="replaceable"><code>instance_id</code></em> --ena-support</code></strong></code></pre>
                                    </li>
                                 <li class="listitem">
                                    
                                    <p><a href="./powershell/latest/reference/items/Edit-EC2InstanceAttribute.html">Edit-EC2InstanceAttribute</a> (Tools for Windows PowerShell)
                                    </p>
                                    <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>Edit-EC2InstanceAttribute -InstanceId <em class="replaceable"><code>instance-id</code></em> -EnaSupport $true</code></strong></code></pre>
                                    </li>
                              </ul>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>(Optional) Create an AMI from the instance, as described in <a href="creating-an-ami-ebs.html">Creating an Amazon EBS-Backed Linux AMI</a>
                              . The AMI
                              inherits the enhanced networking <code class="code">enaSupport</code> attribute from
                              the instance. Therefore, you can use this AMI to launch another instance
                              with enhanced networking enabled by default.
                           </p>
                           
                           <div class="aws-note">
                              <p class="aws-note">Important</p>
                              <p>If your instance operating system contains an
                                 <code>/etc/udev/rules.d/70-persistent-net.rules</code>
                                 file, you must delete it before creating the AMI. This file
                                 contains the MAC address for the Ethernet adapter of the original
                                 instance. If another instance boots with this file, the operating
                                 system will be unable to find the device and <code class="code">eth0</code>
                                 might fail, causing boot issues. This file is regenerated at the next
                                 boot cycle, and any instances launched from the AMI create their
                                 own version of the file.
                              </p>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>From your local computer, start the instance using the Amazon EC2 console or
                              one of the following commands: <a href="./cli/latest/reference/ec2/start-instances.html">start-instances</a>
                              (AWS CLI), <a href="./powershell/latest/reference/items/Start-EC2Instance.html">Start-EC2Instance</a> (AWS Tools for Windows PowerShell). If your instance is managed by
                              AWS OpsWorks, you should start the instance in the AWS OpsWorks console so that the
                              instance state remains in sync.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>(Optional) Connect to your instance and verify that the module is installed.</p>
                           
                           <p>If you are unable to connect to your instance after enabling
                              enhanced networking, see <a href="troubleshooting-ena.html">Troubleshooting the Elastic Network Adapter (ENA)</a>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     <div class="itemizedlist">
                        
                        <p class="title"><b>To enable enhanced networking on Linux (instance store&#x2013;backed instances)</b></p>
                        
                        <p>Follow the previous procedure until the step where you stop the instance. Create a
                           new AMI as described 
                           in <a href="creating-an-ami-instance-store.html">Creating an Instance Store-Backed Linux AMI</a>,
                           making sure to enable the enhanced networking attribute when you register the AMI.
                        </p>
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><a href="./cli/latest/reference/ec2/register-image.html">register-image</a>
                                 (AWS CLI)
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code>aws ec2 register-image --ena-support<code class="code" copy="false"> ...</code></code></strong></code></pre>
                              </li>
                           <li class="listitem">
                              
                              <p><a href="./powershell/latest/reference/items/Register-EC2Image.html">Register-EC2Image</a> (AWS Tools for Windows PowerShell)
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><strong class="userinput"><code><b>Register-EC2Image</b> -EnaSupport<code class="code" copy="false"> ...</code></code></strong></code></pre>
                              </li>
                        </ul>
                     </div>
                     
                     
                     <h2 id="enhanced-networking-ena-ubuntu-dkms">Enabling Enhanced Networking on Ubuntu with DKMS</h2>  
                     
                     <p>This method is for testing and feedback purposes only. It is not intended for use
                        with production 
                        deployments. For production employments, see <a href="enhanced-networking-ena.html#enhanced-networking-ena-ubuntu">Enabling Enhanced Networking on Ubuntu</a>.
                     </p>
                     
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>Using DKMS voids the support agreement for your subscription. Using kmod configurations
                           are an
                           acceptable alternative for running the latest available kernel modules.
                        </p>
                     </div>
                     
                     <p class="title"><b>To enable enhanced networking with ENA on Ubuntu (EBS-backed instances)</b></p>
                     <ol>
                        <li>
                           <p>Follow steps 1 and 2 in <a href="enhanced-networking-ena.html#enhanced-networking-ena-ubuntu">Enabling Enhanced Networking on Ubuntu</a>.
                           </p>
                        </li>
                        <li>
                           <p>Install the <code>build-essential</code> packages to compile the kernel module and the <code>dkms</code> package so 
                              that your <code>ena</code> module is rebuilt every time your kernel is updated.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">ubuntu:~$ </code><strong class="userinput"><code>sudo apt-get install -y build-essential dkms</code></strong></code></pre>
                           </li>
                        <li>
                           <p>Clone the source for the <code>ena</code> module on your instance from
                              GitHub at <a href="https://github.com/amzn/amzn-drivers" target="_blank">https://github.com/amzn/amzn-drivers</a>.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">ubuntu:~$ </code><strong class="userinput"><code>git clone https://github.com/amzn/amzn-drivers</code></strong></code></pre></li>
                        <li>
                           <p>Move the <code>amzn-drivers</code> package to the <code>/usr/src/</code> directory so dkms can find it
                              and build it for each kernel update. Append the version number (you can find the current
                              version number in the release notes) of the source 
                              code to the directory name. For example, version <code>1.0.0</code> is shown in the example below.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">ubuntu:~$ </code><strong class="userinput"><code>sudo mv amzn-drivers /usr/src/amzn-drivers-1.0.0</code></strong></code></pre>
                           </li>
                        <li>
                           <p>Create the dkms configuration file with the following values, substituting your version
                              of <code>ena</code>.
                           </p>
                           
                           <p>Create the file.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">ubuntu:~$ </code><strong class="userinput"><code>sudo touch /usr/src/amzn-drivers-1.0.0/dkms.conf</code></strong></code></pre>
                           <p>Edit the file and add the following values.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">ubuntu:~$ </code><strong class="userinput"><code>sudo vim /usr/src/amzn-drivers-1.0.0/dkms.conf
PACKAGE_NAME=&quot;ena&quot;
PACKAGE_VERSION=&quot;1.0.0&quot;
CLEAN=&quot;make -C kernel/linux/ena clean&quot;
MAKE=&quot;make -C kernel/linux/ena/ BUILD_KERNEL=${kernelver}&quot;
BUILT_MODULE_NAME[0]=&quot;ena&quot;
BUILT_MODULE_LOCATION=&quot;kernel/linux/ena&quot;
DEST_MODULE_LOCATION[0]=&quot;/updates&quot;
DEST_MODULE_NAME[0]=&quot;ena&quot;
AUTOINSTALL=&quot;yes&quot;</code></strong></code></pre>
                           
                           </li>
                        <li>
                           <p>Add, build, and install the <code>ena</code> module on your instance using dkms.
                           </p>
                           
                           <p>Add the module to dkms</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">ubuntu:~$ </code><strong class="userinput"><code>sudo dkms add -m amzn-drivers -v 1.0.0</code></strong></code></pre>
                           <p>Build the module using dkms.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">ubuntu:~$ </code><strong class="userinput"><code>sudo dkms build -m amzn-drivers -v 1.0.0</code></strong></code></pre>
                           <p>Install the module using dkms.</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">ubuntu:~$ </code><strong class="userinput"><code>sudo dkms install -m amzn-drivers -v 1.0.0</code></strong></code></pre></li>
                        <li>
                           <p>Rebuild <code>initramfs</code> so the correct module is loaded at boot time.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">ubuntu:~$ </code><strong class="userinput"><code>sudo update-initramfs -u -k all</code></strong></code></pre></li>
                        <li>
                           <p>Verify that the <code>ena</code> module is installed using the modinfo ena command
                              from <a href="enhanced-networking-ena.html#test-enhanced-networking-ena">Testing Whether Enhanced Networking Is Enabled</a>.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">ubuntu:~$ </code><strong class="userinput"><code>modinfo ena
filename:       /lib/modules/3.13.0-74-generic/updates/dkms/ena.ko
version:        1.0.0
license:        GPL
description:    Elastic Network Adapter (ENA)
author:         Amazon.com, Inc. or its affiliates
srcversion:     9693C876C54CA64AE48F0CA
alias:          pci:v00001D0Fd0000EC21sv*sd*bc*sc*i*
alias:          pci:v00001D0Fd0000EC20sv*sd*bc*sc*i*
alias:          pci:v00001D0Fd00001EC2sv*sd*bc*sc*i*
alias:          pci:v00001D0Fd00000EC2sv*sd*bc*sc*i*
depends:
vermagic:       3.13.0-74-generic SMP mod_unload modversions
parm:           debug:Debug level (0=none,...,16=all) (int)
parm:           push_mode:Descriptor / header push mode (0=automatic,1=disable,3=enable)
			  0 - Automatically choose according to device capability (default)
			  1 - Don&apos;t push anything to device memory
			  3 - Push descriptors and header buffer to device memory (int)
parm:           enable_wd:Enable keepalive watchdog (0=disable,1=enable,default=1) (int)
parm:           enable_missing_tx_detection:Enable missing Tx completions. (default=1) (int)
parm:           numa_node_override_array:Numa node override map
 (array of int)
parm:           numa_node_override:Enable/Disable numa node override (0=disable)
 (int)</code></strong></code></pre>
                           </li>
                        <li>
                           <p>Continue with Step 3 in <a href="enhanced-networking-ena.html#enhanced-networking-ena-ubuntu">Enabling Enhanced Networking on Ubuntu</a>. 
                           </p>
                        </li>
                     </ol>
                     
                     
                     
                     <h2 id="enhanced-networking-ena-troubleshooting">Troubleshooting</h2>
                     
                     
                     <p>For additional information about troubleshooting your ENA adapter, see 
                        <a href="troubleshooting-ena.html">Troubleshooting the Elastic Network Adapter (ENA)</a>.
                     </p>
                     
                     <div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div>
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                       browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be
                                    enabled. Please refer to your browser's Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="enhanced-networking.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="enhanced-networking-os.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2019, Amazon Web Services, Inc. or its affiliates. All rights
                        reserved.
                     </div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Requirements"><a class="pagetoc" href="#ena-requirements">Requirements</a></li>
                        <li class="pagetoc" name="Data Encryption"><a class="pagetoc" href="#ena-data-encryption-in-transit">Data Encryption</a></li>
                        <li class="pagetoc" name="Testing Whether Enhanced Networking Is Enabled"><a class="pagetoc" href="#test-enhanced-networking-ena">Testing Whether Enhanced Networking Is Enabled</a></li>
                        <li class="pagetoc" name="Enabling Enhanced Networking on the Amazon Linux AMI"><a class="pagetoc" href="#enable-enhanced-networking-ena-AL">Enabling Enhanced Networking on the Amazon Linux AMI</a></li>
                        <li class="pagetoc" name="Enabling Enhanced Networking on Ubuntu"><a class="pagetoc" href="#enhanced-networking-ena-ubuntu">Enabling Enhanced Networking on Ubuntu</a></li>
                        <li class="pagetoc" name="Enabling Enhanced Networking on Linux"><a class="pagetoc" href="#enhanced-networking-ena-linux">Enabling Enhanced Networking on Linux</a></li>
                        <li class="pagetoc" name="Enabling Enhanced Networking on Ubuntu with DKMS"><a class="pagetoc" href="#enhanced-networking-ena-ubuntu-dkms">Enabling Enhanced Networking on Ubuntu with DKMS</a></li>
                        <li class="pagetoc" name="Troubleshooting"><a class="pagetoc" href="#enhanced-networking-ena-troubleshooting">Troubleshooting</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="cookie-notice">
         <div class="cookie-notice-text">We use cookies to provide and improve our services. By using
            our site, you consent to cookies. <a href="http://aws.amazon.com/legal/cookies">Learn more</a></div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon Elastic Compute Cloud';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide for Linux Instances';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>