<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Troubleshooting Connecting to Your Instance - Amazon Elastic Compute Cloud</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="ec2-instance-troubleshoot.html" title="Troubleshooting Instances">
      <link rel="prev" href="troubleshooting-launch.html" title="Troubleshooting Instance Launch Issues">
      <link rel="next" href="TroubleshootingInstancesStopping.html" title="Troubleshooting Stopping Your Instance">
      <meta name="description" content="Troubleshoot connecting to your instance.">
      <meta name="keywords" content="EC2,Amazon EC2,EC2 instance,instance,VM,virtual machine">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="Amazon Elastic Compute Cloud">
      <meta name="guide" content="User Guide for Linux Instances">
      <meta name="guide-locale" content="en_us">
      <meta name="tocs" content="toc-contents.json">
      <meta name="marketingLocale" content="en_US">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/TroubleshootingInstancesConnecting.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20181221"></script><link rel="stylesheet" type="text/css" href="../../../css/marketing-target.css"><script type="text/javascript" src="/assets/marketing/js/marketing-target.js"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="/index.html">AWS Documentation</a> &#xBB; <a href="/ec2/index.html">Amazon EC2</a> &#xBB; <a href="index.html">User Guide for Linux Instances</a> &#xBB; <a href="ec2-instance-troubleshoot.html">Troubleshooting Instances</a> &#xBB; <span class="breadcrumb">Troubleshooting Connecting to Your Instance</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div id="language-notice">
                        <div class="language-notice-text"></div>
                     </div>
                     <div></div>
                     <h1 class="topictitle" id="TroubleshootingInstancesConnecting">Troubleshooting Connecting to Your Instance</h1>
                     <p>The following are possible problems you may have and error messages you may see while
                        trying
                        to connect to your instance.
                     </p>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Contents</strong></p>
                        <ul>
                           <li><a href="#TroubleshootingInstancesConnectionTimeout">Error connecting to your instance: Connection timed out</a></li>
                           <li><a href="#TroubleshootingInstancesServerError">Error: User key not recognized by
                                 server</a></li>
                           <li><a href="#TroubleshootingInstancesConnectingMindTerm">Error: Host key not
                                 found, Permission denied (publickey), or Authentication
                                 failed, permission denied</a></li>
                           <li><a href="#troubleshoot-unprotected-key">Error: Unprotected Private Key File</a></li>
                           <li><a href="#troubleshoot-private-key-file-format">Error: Private key must begin with
                                 &quot;-----BEGIN RSA PRIVATE KEY-----&quot; and end with &quot;-----END RSA PRIVATE KEY-----&quot;</a></li>
                           <li><a href="#TroubleshootingInstancesConnectingPuTTY">Error: Server refused our key
                                 or No supported authentication methods available</a></li>
                           <li><a href="#troubleshoot-instance-connect-safari">Error Using MindTerm on Safari
                                 Browser</a></li>
                           <li><a href="#troubleshoot-instance-ping">Cannot Ping Instance</a></li>
                           <li><a href="#troubleshoot-ssh">Error: Server unexpectedly closed network connection</a></li>
                        </ul>
                     </div>
                     <p>For additional help with Windows instances, see <a href="./AWSEC2/latest/WindowsGuide/troubleshooting-windows-instances.html">Troubleshooting Windows
                           Instances</a> in the <em>Amazon EC2 User Guide for Windows Instances</em>.
                     </p>
                     
                     <h2 id="TroubleshootingInstancesConnectionTimeout">Error connecting to your instance: Connection timed out</h2>
                     
                     
                     <p>If you try to connect to your instance and get an error message <code class="code">Network error:
                           Connection timed out</code> or <code class="code">Error connecting to [instance], reason: -&gt; Connection
                           timed out: connect</code>, try the following:
                     </p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>Check your security group rules. You need a security group rule that allows inbound
                                 traffic from your public IPv4 address on the proper port.
                              </p>
                              
                              <ol>
                                 <li>
                                    <p>Open the Amazon EC2 console at
                                       <a href="https://console.aws.amazon.com/ec2/" target="_blank">https://console.aws.amazon.com/ec2/</a>.
                                    </p>
                                 </li>
                                 <li>
                                    
                                    <p>In the navigation pane, choose <b>Instances</b>, and then select your
                                       instance.
                                    </p>
                                    
                                 </li>
                                 <li>
                                    
                                    <p>In the <b>Description</b> tab at the bottom of the console page, next to
                                       <b>Security groups</b>, select <b>view inbound rules</b> to
                                       display the list of rules that are in effect for the selected instance.
                                    </p>
                                    
                                 </li>
                                 <li>
                                    
                                    <p>For Linux instances: When you select <b>view inbound rules</b>, a window will appear that displays the port(s) to which traffic is allowed. Verify
                                       that there is a rule that allows traffic from your computer
                                       to port 22 (SSH).
                                    </p>
                                    
                                    <p>For Windows instances: When you select <b>view inbound rules</b>, a window will appear that displays the port(s) to which traffic is allowed. Verify
                                       that there is a rule that allows traffic from your
                                       computer to port 3389 (RDP).
                                    </p>
                                    
                                    <p>Each time you restart your instance, a new IP address (and host name) will be assigned.
                                       If your security group has a rule that allows inbound traffic from a single IP address,
                                       this
                                       address may not be static if your computer is on a corporate network or if you are
                                       connecting through an internet service provider (ISP). Instead, specify the range
                                       of IP
                                       addresses used by client computers. If your security group does not have a rule that
                                       allows
                                       inbound traffic as described in the previous step, add a rule to your security group.
                                       For
                                       more information, see <a href="authorizing-access-to-an-instance.html">Authorizing Network
                                          Access to Your Instances</a>.
                                    </p>
                                    
                                    <p>For more information about Security Group rules, see <a href="./vpc/latest/userguide/VPC_SecurityGroups.html#SecurityGroupRules">Security Group Rules</a> in the <em>Amazon VPC User Guide</em>.
                                    </p>
                                    
                                 </li>
                              </ol>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Check the route table for the subnet. You need a route that sends all traffic
                                 destined outside the VPC to the internet gateway for the VPC.
                              </p>
                              
                              <ol>
                                 <li>
                                    <p>Open the Amazon EC2 console at
                                       <a href="https://console.aws.amazon.com/ec2/" target="_blank">https://console.aws.amazon.com/ec2/</a>.
                                    </p>
                                 </li>
                                 <li>
                                    
                                    <p>In the navigation pane, choose <b>Instances</b>, and then select your
                                       instance.
                                    </p>
                                    
                                 </li>
                                 <li>
                                    
                                    <p>In the <b>Description</b> tab, write down the values of <b>VPC
                                          ID</b> and <b>Subnet ID</b>.
                                    </p>
                                    
                                 </li>
                                 <li>
                                    <p>Open the Amazon VPC console at
                                       <a href="https://console.aws.amazon.com/vpc/" target="_blank">https://console.aws.amazon.com/vpc/</a>.
                                    </p>
                                 </li>
                                 <li>
                                    
                                    <p>In the navigation pane, choose <b>Internet Gateways</b>. Verify that
                                       there is an internet gateway attached to your VPC. Otherwise, choose <b>Create
                                          Internet Gateway</b> to create an internet gateway. Select the internet gateway, and
                                       then choose <b>Attach to VPC</b> and follow the directions to attach it to
                                       your VPC.
                                    </p>
                                    
                                 </li>
                                 <li>
                                    
                                    <p>In the navigation pane, choose <b>Subnets</b>, and then select your
                                       subnet.
                                    </p>
                                    
                                 </li>
                                 <li>
                                    
                                    <p>On the <b>Route Table</b> tab, verify that there is a route with
                                       <code class="code">0.0.0.0/0</code> as the destination and the internet gateway for your VPC as the
                                       target. If you&apos;re connecting to your instance using its IPv6 address, verify that
                                       there 
                                       is a route for all IPv6 traffic (<code class="code">::/0</code>) that points to the internet gateway.
                                       Otherwise, do the following:
                                    </p>
                                    
                                    <ol>
                                       <li>
                                          
                                          <p>Choose the ID of the route table (rtb-<em>xxxxxxxx</em>) to
                                             navigate to the route table.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>On the <b>Routes</b> tab, choose <b>Edit routes</b>.
                                             Choose <b>Add route</b>, use <code class="code">0.0.0.0/0</code> as the destination and
                                             the internet gateway as the target. For IPv6, choose <b>Add route</b>, use
                                             <code class="code">::/0</code> as the destination and the internet gateway as the target.
                                          </p>
                                          
                                       </li>
                                       <li>
                                          
                                          <p>Choose <b>Save routes</b>.
                                          </p>
                                          
                                       </li>
                                    </ol>
                                    
                                 </li>
                              </ol>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Check the network access control list (ACL) for the subnet. The network ACLs
                                 must allow inbound and outbound traffic from your local IP address on the proper port.
                                 The
                                 default network ACL allows all inbound and outbound traffic.
                              </p>
                              
                              <ol>
                                 <li>
                                    <p>Open the Amazon VPC console at
                                       <a href="https://console.aws.amazon.com/vpc/" target="_blank">https://console.aws.amazon.com/vpc/</a>.
                                    </p>
                                 </li>
                                 <li>
                                    
                                    <p>In the navigation pane, choose <b>Subnets</b> and select your
                                       								subnet.
                                    </p>
                                    
                                 </li>
                                 <li>
                                    
                                    <p>On the <b>Description</b> tab, find <b>Network ACL</b>, and
                                       								choose its ID (acl-<em>xxxxxxxx</em>).
                                    </p>
                                    
                                 </li>
                                 <li>
                                    
                                    <p>Select the network ACL. For <b>Inbound Rules</b>, verify that the rules
                                       								allow traffic from your computer. Otherwise, delete or modify the
                                       								rule that is blocking traffic from your computer.
                                    </p>
                                    
                                 </li>
                                 <li>
                                    
                                    <p>For <b>Outbound Rules</b>, verify that the rules allow traffic to your
                                       								computer. Otherwise, delete or modify the rule that is blocking
                                       								traffic to your computer.
                                    </p>
                                    
                                 </li>
                              </ol>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>If your computer is on a corporate network, ask your network administrator whether
                                 the
                                 internal firewall allows inbound and outbound traffic from your computer on port 22
                                 (for Linux
                                 instances) or port 3389 (for Windows instances).
                              </p>
                              
                              <p>If you have a firewall on your computer, verify that it allows inbound and outbound
                                 traffic from your computer on port 22 (for Linux instances) or port 3389 (for Windows
                                 instances).
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Check that your instance has a public IPv4 address. If not, you can associate an Elastic
                                 IP address with your instance. For more information, see <a href="elastic-ip-addresses-eip.html">Elastic IP Addresses</a>. 
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Check the CPU load on your instance; the server may be overloaded. AWS automatically
                                 provides data such as Amazon CloudWatch metrics and instance status, which you can
                                 use to see how much
                                 CPU load is on your instance and, if necessary, adjust how your loads are handled.
                                 For more
                                 information, see <a href="using-cloudwatch.html">Monitoring Your Instances Using CloudWatch</a>. 
                              </p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       
                                       <p>If your load is variable, you can automatically scale your instances up or down using
                                          <a href="https://aws.amazon.com/autoscaling/" target="_blank">Auto Scaling</a> and <a href="https://aws.amazon.com/elasticloadbalancing/" target="_blank">Elastic Load Balancing</a>. 
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>If your load is steadily growing, you can move to a larger instance type. For more
                                          information, see <a href="ec2-instance-resize.html">Changing the Instance Type</a>.
                                          
                                       </p>
                                       
                                    </li>
                                 </ul>
                              </div>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <p>To connect to your instance using an IPv6 address, check the following: </p>
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>Your subnet must be associated with a route table that has a route for IPv6 traffic
                                 (<code class="code">::/0</code>) to an internet gateway. 
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Your security group rules must allow inbound traffic from your local IPv6 address
                                 on the
                                 proper port (22 for Linux and 3389 for Windows).
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Your network ACL rules must allow inbound and outbound IPv6 traffic.</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>If you launched your instance from an older AMI, it may not be configured for DHCPv6
                                 (IPv6 addresses are not automatically recognized on the network interface). For more
                                 information, see <a href="./vpc/latest/userguide/vpc-migrate-ipv6.html#vpc-migrate-ipv6-dhcpv6">Configure IPv6 on Your Instances</a> in the
                                 <em>Amazon VPC User Guide</em>.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Your local computer must have an IPv6 address, and must be configured to use IPv6.
                                 
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <h2 id="TroubleshootingInstancesServerError">Error: User key not recognized by
                        server
                     </h2>
                     
                     
                     <div class="itemizedlist">
                        
                        <p class="title"><b>If you use SSH to connect to your instance</b></p>
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>Use <code class="code">ssh -vvv</code> to get triple verbose debugging information while
                                 connecting:
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">ssh -vvv -i [your key name].pem ec2-user@[public DNS address of your instance].compute-1.amazonaws.com</code></pre>
                              <p>The following sample output demonstrates what you might see if you were trying to
                                 connect
                                 to your instance with a key that was not recognized by the server:
                              </p>
                              <pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">open/ANT/myusername/.ssh/known_hosts).
debug2: bits set: 504/1024
debug1: ssh_rsa_verify: signature correct
debug2: kex_derive_keys
debug2: set_newkeys: mode 1
debug1: SSH2_MSG_NEWKEYS sent
debug1: expecting SSH2_MSG_NEWKEYS
debug2: set_newkeys: mode 0
debug1: SSH2_MSG_NEWKEYS received
debug1: Roaming not allowed by server
debug1: SSH2_MSG_SERVICE_REQUEST sent
debug2: service_accept: ssh-userauth
debug1: SSH2_MSG_SERVICE_ACCEPT received
debug2: key: boguspem.pem ((nil))
debug1: Authentications that can continue: publickey
debug3: start over, passed a different list publickey
debug3: preferred gssapi-keyex,gssapi-with-mic,publickey,keyboard-interactive,password
debug3: authmethod_lookup publickey
debug3: remaining preferred: keyboard-interactive,password
debug3: authmethod_is_enabled publickey
debug1: Next authentication method: publickey
debug1: Trying private key: boguspem.pem
debug1: read PEM private key done: type RSA
debug3: sign_and_send_pubkey: RSA 9c:4c:bc:0c:d0:5c:c7:92:6c:8e:9b:16:e4:43:d8:b2
debug2: we sent a publickey packet, wait for reply
debug1: Authentications that can continue: publickey
debug2: we did not send a packet, disable method
debug1: No more authentication methods to try.
Permission denied (publickey).</code></pre>
                              </li>
                        </ul>
                     </div>
                     
                     <div class="itemizedlist">
                        
                        <p class="title"><b>If you use SSH (MindTerm) to connect to your instance </b></p>
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>If Java is not enabled, the server does not recognize the user key. To enable Java,
                                 go to
                                 <a href="http://java.com/en/download/help/enable_browser.xml" target="_blank">How do I enable Java in my
                                    web browser?</a> in the Java documentation.
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <div class="itemizedlist">
                        
                        <p class="title"><b>If you use PuTTY to connect to your instance</b></p>
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>Verify that your private key (.pem) file has been converted to the format recognized
                                 by
                                 PuTTY (.ppk). For more information about converting your private key, see <a href="putty.html">Connecting to Your Linux Instance from Windows Using PuTTY</a>.
                              </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>In PuTTYgen, load your private key file and select <b>Save Private Key</b>
                                    rather than <b>Generate</b>. 
                                 </p>
                              </div>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Verify that you are connecting with the appropriate user name for your AMI. Enter
                                 the
                                 user name in the <b>Host name</b> box in the <b>PuTTY
                                    Configuration</b> window.
                              </p> 
                              <div class="itemizedlist">
                                 								
                                 								
                                 								
                                 								
                                 								
                                 								
                                 								
                                 								
                                 							
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       <p>For Amazon Linux 2 or the Amazon Linux AMI, the user name is <code class="code">ec2-user</code>.
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>For a CentOS AMI, the user name is <code class="code">centos</code>.
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>For a Debian AMI, the user name is <code class="code">admin</code> or <code class="code">root</code>.
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>For a Fedora AMI, the user name is <code class="code">ec2-user</code> or <code class="code">fedora</code>.
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>For a RHEL AMI, the user name is <code class="code">ec2-user</code> or <code class="code">root</code>.
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>For a SUSE AMI, the user name is <code class="code">ec2-user</code> or <code class="code">root</code>.
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>For an Ubuntu AMI, the user name is <code class="code">ubuntu</code>.
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>Otherwise, if <code class="code">ec2-user</code> and <code class="code">root</code> don&apos;t work, check with the AMI provider.
                                       </p>
                                    </li>
                                 </ul>
                              </div>  
                           </li>
                           <li class="listitem">
                              
                              <p>Verify that you have an inbound security group rule to allow inbound traffic to the
                                 appropriate port. For more information, see <a href="authorizing-access-to-an-instance.html">Authorizing Network Access to Your Instances</a>. 
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     
                     <h2 id="TroubleshootingInstancesConnectingMindTerm">Error: Host key not
                        found, Permission denied (publickey), <em>or</em> Authentication
                        failed, permission denied
                     </h2>
                     
                     <p>If you connect to your instance using SSH and get any of the following errors,
                        <code class="code">Host key not found in [directory]</code>, <code class="code">Permission denied
                           (publickey)</code>, or <code class="code">Authentication failed, permission denied</code>,
                        verify that you are connecting with the appropriate user name for your AMI
                        <em>and</em> that you have specified the proper private key
                        (<code>.pem)</code> file for your instance. For MindTerm clients, enter
                        the user name in the <b>User name</b> box in the <b>Connect To
                           Your Instance</b> window.
                     </p>
                     
                     <p>The appropriate user names are as follows:</p>
                     
                     <div class="itemizedlist">
                        								
                        								
                        								
                        								
                        								
                        								
                        								
                        								
                        							
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              <p>For Amazon Linux 2 or the Amazon Linux AMI, the user name is <code class="code">ec2-user</code>.
                              </p>
                           </li>
                           <li class="listitem">
                              <p>For a CentOS AMI, the user name is <code class="code">centos</code>.
                              </p>
                           </li>
                           <li class="listitem">
                              <p>For a Debian AMI, the user name is <code class="code">admin</code> or <code class="code">root</code>.
                              </p>
                           </li>
                           <li class="listitem">
                              <p>For a Fedora AMI, the user name is <code class="code">ec2-user</code> or <code class="code">fedora</code>.
                              </p>
                           </li>
                           <li class="listitem">
                              <p>For a RHEL AMI, the user name is <code class="code">ec2-user</code> or <code class="code">root</code>.
                              </p>
                           </li>
                           <li class="listitem">
                              <p>For a SUSE AMI, the user name is <code class="code">ec2-user</code> or <code class="code">root</code>.
                              </p>
                           </li>
                           <li class="listitem">
                              <p>For an Ubuntu AMI, the user name is <code class="code">ubuntu</code>.
                              </p>
                           </li>
                           <li class="listitem">
                              <p>Otherwise, if <code class="code">ec2-user</code> and <code class="code">root</code> don&apos;t work, check with the AMI provider.
                              </p>
                           </li>
                        </ul>
                     </div> 
                     
                     <p>For example, to use an SSH client to connect to an Amazon Linux instance, use the
                        following command:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">ssh -i <em class="replaceable"><code>/path/my-key-pair</code></em>.pem <em class="replaceable"><code>ec2-user</code></em>@<em class="replaceable"><code>public-dns-hostname</code></em></code></pre>
                     <p>Confirm that you are using the private key file that corresponds to the key pair
                        that you selected when you launched the instance.
                     </p>
                     
                     <ol>
                        <li>
                           <p>Open the Amazon EC2 console at
                              <a href="https://console.aws.amazon.com/ec2/" target="_blank">https://console.aws.amazon.com/ec2/</a>.
                           </p>
                        </li>
                        <li>
                           
                           <p>Select your instance. In the <b>Description</b> tab, verify
                              the value of <b>Key pair name</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>If you did not specify a key pair when you launched the instance, you can
                              terminate the instance and launch a new instance, ensuring that you specify
                              a key pair. If this is an instance that you have been using but you no
                              longer have the <code>.pem</code> file for your key pair, you can
                              replace the key pair with a new one. For more information, see <a href="ec2-key-pairs.html#replacing-lost-key-pair">Connecting to Your Linux Instance if You Lose Your Private Key</a>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p>If you generated your own key pair, ensure that your key generator is set up to
                        create RSA keys. DSA keys are not accepted.
                     </p>
                     
                     <p>If you get a <code class="code">Permission denied (publickey)</code> error and none of the
                        above applies (for example, you were able to connect previously), the permissions
                        on
                        the home directory of your instance may have been changed. Permissions for
                        <code class="code">/home/ec2-user/.ssh/authorized_keys</code> must be limited to the owner
                        only.
                     </p>
                     
                     <p class="title"><b>To verify the permissions on your instance</b></p>
                     <ol>
                        <li>
                           
                           <p>Stop your instance and detach the root volume. For more information, see
                              <a href="Stop_Start.html">Stop and Start Your Instance</a> and <a href="ebs-detaching-volume.html">Detaching an Amazon EBS Volume from an Instance</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Launch a temporary instance in the same Availability Zone as your current
                              instance (use a similar or the same AMI as you used for your current
                              instance), and attach the root volume to the temporary instance. For more
                              information, see <a href="ebs-attaching-volume.html">Attaching an Amazon EBS Volume to an Instance</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Connect to the temporary instance, create a mount point, and mount the
                              volume that you attached. For more information, see <a href="ebs-using-volumes.html">Making an Amazon EBS Volume Available for Use on Linux</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>From the temporary instance, check the permissions of the
                              <code class="code">/home/ec2-user/</code> directory of the attached volume. If
                              necessary, adjust the permissions as follows:
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>chmod 600 <em class="replaceable"><code>mount_point</code></em>/home/ec2-user/.ssh/authorized_keys</code></strong></code></pre>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>chmod 700 <em class="replaceable"><code>mount_point</code></em>/home/ec2-user/.ssh</code></strong></code></pre>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>chmod 700 <em class="replaceable"><code>mount_point</code></em>/home/ec2-user</code></strong></code></pre>
                           </li>
                        <li>
                           
                           <p>Unmount the volume, detach it from the temporary instance, and re-attach
                              it to the original instance. Ensure that you specify the correct device name
                              for the root volume; for example, <code class="code">/dev/xvda</code>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Start your instance. If you no longer require the temporary instance, you
                              can terminate it.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <h2 id="troubleshoot-unprotected-key">Error: Unprotected Private Key File</h2>
                     
                     
                     <p>Your private key file must be protected from read and write operations from any other
                        users. If your private key can be read or written to by anyone but you, then SSH ignores
                        your
                        key and you see the following warning message below.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
@         WARNING: UNPROTECTED PRIVATE KEY FILE!          @
@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@
Permissions <em class="replaceable"><code>0777</code></em> for &apos;<em class="replaceable"><code>.ssh/my_private_key.pem</code></em>&apos; are too open.
It is required that your private key files are NOT accessible by others.
This private key will be ignored.
bad permissions: ignore key: .ssh/my_private_key.pem
Permission denied (publickey).</code></pre>
                     <p>If you see a similar message when you try to log in to your instance, examine the
                        first
                        line of the error message to verify that you are using the correct public key for
                        your instance.
                        The above example uses the private key <code>.ssh/my_private_key.pem</code> with file
                        permissions of <code class="code">0777</code>, which allow anyone to read or write to this file. This
                        permission level is very insecure, and so SSH ignores this key. To fix the error,
                        execute the
                        following command, substituting the path for your private key file.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight"><code class="prompt" copy="false">[ec2-user ~]$ </code><strong class="userinput"><code>chmod 0400 <em class="replaceable"><code>.ssh/my_private_key.pem</code></em></code></strong></code></pre>
                     
                     <h2 id="troubleshoot-private-key-file-format">Error: Private key must begin with
                        &quot;-----BEGIN RSA PRIVATE KEY-----&quot; and end with &quot;-----END RSA PRIVATE KEY-----&quot;
                     </h2>
                     
                     <p>If you use a third-party tool, such as <b>ssh-keygen</b>, to create an RSA key
                        pair, it generates the private key in the OpenSSH key format. When you connect to
                        your instance,
                        if you use the private key in the OpenSSH format to decrypt the password, you&apos;ll get
                        the error
                        <code class="code">Private key must begin with &quot;-----BEGIN RSA PRIVATE KEY-----&quot; and end with &quot;-----END
                           RSA
                           PRIVATE KEY-----&quot;</code>.
                     </p>
                     
                     <p>To resolve the error, the private key must be in the PEM format. Use the following
                        command
                        to create the private key in the PEM format:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">ssh-keygen -m PEM</code></pre>
                     
                     <h2 id="TroubleshootingInstancesConnectingPuTTY">Error: Server refused our key
                        <em>or</em> No supported authentication methods available
                     </h2>
                     
                     
                     <p>If you use PuTTY to connect to your instance and get either of the following errors,
                        <code class="code">Error: Server refused our key</code> or <code class="code">Error: No supported authentication methods
                           available</code>, verify that you are connecting with the appropriate user name for your AMI.
                        Enter the user name in the <b>User name</b> box in the <b>PuTTY
                           Configuration</b> window.
                     </p>
                     
                     <p>The appropriate user names are as follows:</p> 
                     <div class="itemizedlist">
                        								
                        								
                        								
                        								
                        								
                        								
                        								
                        								
                        							
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              <p>For Amazon Linux 2 or the Amazon Linux AMI, the user name is <code class="code">ec2-user</code>.
                              </p>
                           </li>
                           <li class="listitem">
                              <p>For a CentOS AMI, the user name is <code class="code">centos</code>.
                              </p>
                           </li>
                           <li class="listitem">
                              <p>For a Debian AMI, the user name is <code class="code">admin</code> or <code class="code">root</code>.
                              </p>
                           </li>
                           <li class="listitem">
                              <p>For a Fedora AMI, the user name is <code class="code">ec2-user</code> or <code class="code">fedora</code>.
                              </p>
                           </li>
                           <li class="listitem">
                              <p>For a RHEL AMI, the user name is <code class="code">ec2-user</code> or <code class="code">root</code>.
                              </p>
                           </li>
                           <li class="listitem">
                              <p>For a SUSE AMI, the user name is <code class="code">ec2-user</code> or <code class="code">root</code>.
                              </p>
                           </li>
                           <li class="listitem">
                              <p>For an Ubuntu AMI, the user name is <code class="code">ubuntu</code>.
                              </p>
                           </li>
                           <li class="listitem">
                              <p>Otherwise, if <code class="code">ec2-user</code> and <code class="code">root</code> don&apos;t work, check with the AMI provider.
                              </p>
                           </li>
                        </ul>
                     </div>  
                     <p>You should also
                        verify that your private key (.pem) file has been correctly converted to the format
                        recognized
                        by PuTTY (.ppk). For more information about converting your private key, see <a href="putty.html">Connecting to Your Linux Instance from Windows Using PuTTY</a>.
                     </p>
                     
                     <h2 id="troubleshoot-instance-connect-safari">Error Using MindTerm on Safari
                        Browser
                     </h2>
                     
                     
                     <p>If you use MindTerm to connect to your instance, and are using the Safari web browser,
                        you
                        may get the following error:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">Error connecting to <em class="replaceable"><code>your_instance_ip</code></em>, reason: 
 &#x2014;&gt; Key exchange failed: Host authentication failed</code></pre>
                     <p>You must update the browser&apos;s security settings to allow the AWS Management Console
                        to run the Java
                        plugin in unsafe mode.
                     </p>
                     
                     <p class="title"><b>To enable the Java plugin to run in unsafe mode</b></p>
                     <ol>
                        <li>
                           
                           <p>In Safari, keep the Amazon EC2 console open, and choose <b>Safari</b>,
                              <b>Preferences</b>, <b>Security</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Plug-in Settings</b> (or <b>Manage Website
                                 Settings</b> on older versions of Safari).
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose the <b>Java</b> plugin on the left. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Currently Open Websites</b>, select the AWS Management Console URL and choose
                              <b>Run in Unsafe Mode</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>When prompted, choose <b>Trust</b> in the warning dialog box and choose
                              <b>Done</b>. 
                           </p>
                           
                        </li>
                     </ol>
                     
                     <h2 id="troubleshoot-instance-ping">Cannot Ping Instance</h2>
                     
                     
                     <p>The <code class="code">ping</code> command is a type of ICMP traffic &#x2014; if you are unable to ping
                        your instance, ensure that your inbound security group rules allow ICMP traffic for
                        the
                        <code class="code">Echo Request</code> message from all sources, or from the computer or instance from which
                        you are issuing the command. If you are unable to issue a <code class="code">ping</code> command from your
                        instance, ensure that your outbound security group rules allow ICMP traffic for the
                        <code class="code">Echo
                           Request</code> message to all destinations, or to the host that you are attempting to
                        ping.
                     </p>
                     
                     <h2 id="troubleshoot-ssh">Error: Server unexpectedly closed network connection</h2>
                     
                     <p>If you are connecting to your instance with Putty and you receive the error &quot;Server
                        unexpectedly closed network connection,&quot; verify that you 
                        have enabled keepalives on the Connection page of the Putty Configuration to avoid
                        being disconnected. Some servers disconnect
                        clients when they do not receive any data within a specified period of time. Set the
                        Seconds between keepalives to 59 seconds. 
                     </p>
                     
                     <p>If you still experience issues after enabling keepalives, try to disable Nagle&apos;s algorithm
                        on the Connection page of the Putty Configuration.
                        
                     </p>
                     
                     <div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div>
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                       browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be
                                    enabled. Please refer to your browser's Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="troubleshooting-launch.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="TroubleshootingInstancesStopping.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2019, Amazon Web Services, Inc. or its affiliates. All rights
                        reserved.
                     </div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Error connecting to your instance: Connection timed out"><a class="pagetoc" href="#TroubleshootingInstancesConnectionTimeout">Error connecting to your instance: Connection timed out</a></li>
                        <li class="pagetoc" name="Error: User key not recognized by
    server"><a class="pagetoc" href="#TroubleshootingInstancesServerError">Error: User key not recognized by
                              server</a></li>
                        <li class="pagetoc" name="Error: Host key not
                    found, Permission denied (publickey), or Authentication
                    failed, permission denied"><a class="pagetoc" href="#TroubleshootingInstancesConnectingMindTerm">Error: Host key not
                              found, Permission denied (publickey), or Authentication
                              failed, permission denied</a></li>
                        <li class="pagetoc" name="Error: Unprotected Private Key File"><a class="pagetoc" href="#troubleshoot-unprotected-key">Error: Unprotected Private Key File</a></li>
                        <li class="pagetoc" name="Error: Private key must begin with
     &quot;-----BEGIN RSA PRIVATE KEY-----&quot; and end with &quot;-----END RSA PRIVATE KEY-----&quot;"><a class="pagetoc" href="#troubleshoot-private-key-file-format">Error: Private key must begin with
                              &quot;-----BEGIN RSA PRIVATE KEY-----&quot; and end with &quot;-----END RSA PRIVATE KEY-----&quot;</a></li>
                        <li class="pagetoc" name="Error: Server refused our key
     or No supported authentication methods available"><a class="pagetoc" href="#TroubleshootingInstancesConnectingPuTTY">Error: Server refused our key
                              or No supported authentication methods available</a></li>
                        <li class="pagetoc" name="Error Using MindTerm on Safari
     Browser"><a class="pagetoc" href="#troubleshoot-instance-connect-safari">Error Using MindTerm on Safari
                              Browser</a></li>
                        <li class="pagetoc" name="Cannot Ping Instance"><a class="pagetoc" href="#troubleshoot-instance-ping">Cannot Ping Instance</a></li>
                        <li class="pagetoc" name="Error: Server unexpectedly closed network connection"><a class="pagetoc" href="#troubleshoot-ssh">Error: Server unexpectedly closed network connection</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="cookie-notice">
         <div class="cookie-notice-text">We use cookies to provide and improve our services. By using
            our site, you consent to cookies. <a href="http://aws.amazon.com/legal/cookies">Learn more</a></div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='Amazon Elastic Compute Cloud';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide for Linux Instances';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>