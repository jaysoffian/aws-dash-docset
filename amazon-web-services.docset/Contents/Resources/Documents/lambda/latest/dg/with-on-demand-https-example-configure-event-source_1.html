<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Create a Simple Microservice using Lambda and
         API Gateway - AWS Lambda
      </title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="with-on-demand-https.html" title="Using AWS Lambda with Amazon API Gateway">
      <link rel="prev" href="with-on-demand-https-create-package.html" title="Sample Function Code">
      <link rel="next" href="with-apigateway-example-use-app-spec.html" title="AWS SAM Template for an API Gateway Application">
      <meta name="description" content="In this tutorial you will use the Lambda console to create a Lambda function, and an Amazon API Gateway endpoint to trigger that function. You will be able to call the endpoint with any method ( GET , POST , PATCH , etc.) to trigger your Lambda function. When the endpoint is called, the entire request will be passed through to your Lambda function. Your function action will depend on the method you call your endpoint with:">
      <meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS Lambda">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <meta name="tocs" content="toc-contents.json">
      <meta name="marketingLocale" content="en_US">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/with-on-demand-https-example-configure-event-source_1.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20181221"></script><link rel="stylesheet" type="text/css" href="../../../css/marketing-target.css"><script type="text/javascript" src="/assets/marketing/js/marketing-target.js"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="/index.html">AWS Documentation</a> &#xBB; <a href="/lambda/index.html">AWS Lambda</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="lambda-services.html">Using AWS Lambda with Other Services</a> &#xBB; <a href="with-on-demand-https.html">Using AWS Lambda with Amazon API Gateway</a> &#xBB; <span class="breadcrumb">Create a Simple Microservice using Lambda and
                                    API Gateway</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div id="language-notice">
                        <div class="language-notice-text"></div>
                     </div>
                     <div></div>
                     <h1 class="topictitle" id="with-on-demand-https-example-configure-event-source_1">Create a Simple Microservice using Lambda and
                        API Gateway
                     </h1>
                     <p>In this tutorial you will use the Lambda console to create a Lambda function, and
                        an Amazon API Gateway endpoint to trigger
                        that function. You will be able to call the endpoint with any method (<code class="code">GET</code>, <code class="code">POST</code>,
                        <code class="code">PATCH</code>, etc.) to trigger your Lambda function. When the endpoint is called, the entire request
                        will be
                        passed through to your Lambda function. Your function action will depend on the method
                        you call your endpoint with: 
                     </p>
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>DELETE: delete an item from a DynamoDB table</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>GET: scan table and return all items</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>POST: Create an item</p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>PUT: Update an item</p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     <h2 id="with-on-demand-https-example-configure-event-source_2">Create an API Using Amazon API Gateway</h2>
                     
                     <p>Follow the steps in this section to create a new Lambda function and an API Gateway
                        endpoint to trigger it:
                     </p>
                     
                     <p class="title"><b>To create an API</b></p>
                     <ol>
                        <li>
                           
                           <p>Sign in to the AWS Management Console and open the AWS Lambda console.</p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Create Lambda function</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Blueprint</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Enter <strong class="userinput"><code>microservice</code></strong> in the search bar. Choose the
                              <b>microservice-http-endpoint</b> blueprint and then choose
                              <b>Configure</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Configure the following settings.</p>
                           
                           <div class="itemizedlist">
                              
                              
                              
                              
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p><b>Name</b> &#x2013; <strong class="userinput"><code>lambda-microservice</code></strong>.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Role</b> &#x2013; <b>Create a new role from one or more
                                          templates</b>.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Role name</b> &#x2013; <strong class="userinput"><code>lambda-apigateway-role</code></strong>.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Policy templates</b> &#x2013; <b>Simple microservice
                                          permissions</b>.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>API</b> &#x2013; <b>Create a new API</b>.
                                    </p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Security</b> &#x2013; <b>Open</b>.
                                    </p>
                                    
                                 </li>
                              </ul>
                           </div>
                           
                           <p>Choose <b>Create function</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p>When you complete the wizard and create your function, Lambda creates a proxy resource
                        named
                        <code class="code">lambda-microservice</code> under the API name you selected. For more information about proxy resources,
                        see <a href="./apigateway/latest/developerguide/api-gateway-set-up-simple-proxy.html">Configure Proxy Integration for a Proxy
                           Resource</a>.
                     </p>
                     
                     <p>A proxy resource has an <code class="code">AWS_PROXY</code> integration type and a catch-all method <code class="code">ANY</code>. The
                        <code class="code">AWS_PROXY</code> integration type applies a default mapping template to pass through the entire request
                        to
                        the Lambda function and transforms the output from the Lambda function to HTTP responses.
                        The <code class="code">ANY</code>
                        method defines the same integration setup for all the supported methods, including
                        <code class="code">GET</code>,
                        <code class="code">POST</code>, <code class="code">PATCH</code>, <code class="code">DELETE </code>and others. 
                     </p>
                     
                     
                     <h2 id="with-on-demand-https-example-configure-event-source-test-end-to-end_1">Test Sending an HTTPS
                        Request
                     </h2>
                     
                     <p>In this step, you will use the console to test the Lambda function. In addition, you
                        can run a
                        <code class="code">curl</code> command to test the end-to-end experience. That is, send an HTTPS request to your
                        API method
                        and have Amazon API Gateway invoke your Lambda function. In order to complete the
                        steps, make sure you have created a DynamoDB
                        table and named it &quot;MyTable&quot;. For more information, see <a href="with-ddb-example.html#with-ddb-create-buckets">Create a DynamoDB Table with a Stream Enabled</a></p>
                     
                     <p class="title"><b>To test the API</b></p>
                     <ol>
                        <li>
                           
                           <p>With your <code class="code">MyLambdaMicroService</code> function still open in the console, choose the
                              <b>Actions</b> tab and then choose <b>Configure test event</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Replace the existing text with the following:</p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">{
	&quot;httpMethod&quot;: &quot;GET&quot;,
	&quot;queryStringParameters&quot;: {
	&quot;TableName&quot;: &quot;MyTable&quot;
    }
}</code></pre>
                           </li>
                        <li>
                           
                           <p>After entering the text above choose <b>Save and test</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div>
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                       browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be
                                    enabled. Please refer to your browser's Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="with-on-demand-https-create-package.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="with-apigateway-example-use-app-spec.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2019, Amazon Web Services, Inc. or its affiliates. All rights
                        reserved.
                     </div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Create an API Using Amazon API Gateway"><a class="pagetoc" href="#with-on-demand-https-example-configure-event-source_2">Create an API Using Amazon API Gateway</a></li>
                        <li class="pagetoc" name="Test Sending an HTTPS
        Request"><a class="pagetoc" href="#with-on-demand-https-example-configure-event-source-test-end-to-end_1">Test Sending an HTTPS
                              Request</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="cookie-notice">
         <div class="cookie-notice-text">We use cookies to provide and improve our services. By using
            our site, you consent to cookies. <a href="http://aws.amazon.com/legal/cookies">Learn more</a></div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS Lambda';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>