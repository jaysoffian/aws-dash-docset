<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Building a Continuous Delivery Pipeline for a Lambda Application with
         AWS CodePipeline - AWS Lambda
      </title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="deploying-lambda-apps.html" title="AWS Lambda Applications">
      <link rel="prev" href="sample-errorprocessor.html" title="Error Processor Sample Application for AWS Lambda">
      <link rel="next" href="best-practices.html" title="Best Practices for Working with AWS Lambda Functions">
      <meta name="description" content="You can use AWS CodePipeline to create a continuous delivery pipeline for your Lambda application. CodePipeline combines source control, build, and deployment resources to create a pipeline that runs whenever you make a change to your application&apos;s source code.">
      <meta name="keywords" content="Lambda,AWS Lambda,serverless,serverless applications,cloud computing">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS Lambda">
      <meta name="guide" content="Developer Guide">
      <meta name="guide-locale" content="en_us">
      <meta name="tocs" content="toc-contents.json">
      <meta name="marketingLocale" content="en_US">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/lambda/latest/dg/build-pipeline.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20181221"></script><link rel="stylesheet" type="text/css" href="../../../css/marketing-target.css"><script type="text/javascript" src="/assets/marketing/js/marketing-target.js"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="/index.html">AWS Documentation</a> &#xBB; <a href="/lambda/index.html">AWS Lambda</a> &#xBB; <a href="index.html">Developer Guide</a> &#xBB; <a href="deploying-lambda-apps.html">AWS Lambda Applications</a> &#xBB; <span class="breadcrumb">Building a Continuous Delivery Pipeline for a Lambda Application with
                                    AWS CodePipeline</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div id="language-notice">
                        <div class="language-notice-text"></div>
                     </div>
                     <div></div>
                     <h1 class="topictitle" id="build-pipeline">Building a Continuous Delivery Pipeline for a Lambda Application with
                        AWS CodePipeline
                     </h1>
                     <p>You can use AWS CodePipeline to create a continuous delivery pipeline for your Lambda
                        application. CodePipeline combines source
                        control, build, and deployment resources to create a pipeline that runs whenever you
                        make a change to your
                        application&apos;s source code.
                     </p>
                     <p>In this tutorial, you create the following resources.</p>
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p><b>Repository</b> &#x2013; A Git repository in AWS CodeCommit. When you push a change,
                                 the pipeline copies the source code into an Amazon S3 bucket and passes it to the
                                 build project.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><b>Build project</b> &#x2013; An AWS CodeBuild build that gets the source code from
                                 the pipeline and packages the application. The source includes a build specification
                                 with commands that install
                                 dependencies and prepare an AWS Serverless Application Model (AWS SAM) template for
                                 deployment.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><b>Deployment configuration</b> &#x2013; The pipeline&apos;s deployment stage defines a
                                 set of actions that take the AWS SAM template from the build output, create a change
                                 set in AWS CloudFormation, and execute
                                 the change set to update the application&apos;s AWS CloudFormation stack.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p><b>Roles</b> &#x2013; The pipeline, build, and deployment each have a service role
                                 that allows them to manage AWS resources. The console creates the pipeline and build
                                 roles when you create
                                 those resources. You create the role that allows AWS CloudFormation to manage the
                                 application stack.
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     <p>The pipeline maps a single branch in a repository to a single AWS CloudFormation stack.
                        You can create additional pipelines
                        to add environments for other branches in the same repository. You can also add stages
                        to your pipeline for testing,
                        staging, and manual approvals. For more information about AWS CodePipeline, see <a href="./codepipeline/latest/userguide/welcome.html">What is AWS CodePipeline</a>.
                     </p>
                     <div class="highlights" id="inline-topiclist">
                        <p><strong>Sections</strong></p>
                        <ul>
                           <li><a href="#with-pipeline-prepare">Prerequisites</a></li>
                           <li><a href="#with-pipeline-create-cfn-role">Create an AWS CloudFormation Role</a></li>
                           <li><a href="#setup-repository">Set Up a Repository</a></li>
                           <li><a href="#create-pipeline1">Create a Pipeline</a></li>
                           <li><a href="#update-policy">Update the Build Stage Role</a></li>
                           <li><a href="#create-pipeline2">Complete the Deployment Stage</a></li>
                        </ul>
                     </div>
                     
                     <h2 id="with-pipeline-prepare">Prerequisites</h2>
                      
                     <p>This tutorial assumes that you have some knowledge of basic Lambda operations and
                        the Lambda console. If you
                        haven&apos;t already, follow the instructions in <a href="getting-started.html">Getting Started with AWS Lambda</a> to create your first Lambda function.
                     </p>
                      
                     <p>To follow the procedures in this guide, you will need a command line terminal or shell
                        to run commands. Commands are shown in
                        listings preceded by a
                        prompt symbol ($) and the name of the current directory, when appropriate:
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">~/lambda-project$ <strong class="userinput"><code>this is a command</code></strong>
this is output</code></pre>
                     <p>For long commands, an escape character (<code class="code">\</code>) is used to split a command over multiple lines.
                     </p>
                     
                     <p>On Linux and macOS, use your preferred shell and package manager. On Windows 10, you
                        can <a href="https://docs.microsoft.com/en-us/windows/wsl/install-win10" target="_blank">install the Windows Subsystem for Linux</a> to get a Windows-integrated version of 
                        Ubuntu and Bash.
                     </p>
                     
                     
                     <p>During the build phase, the build script uploads artifacts to Amazon Simple Storage
                        Service (Amazon S3). You can use an existing bucket,
                        or create a new bucket for the pipeline. Use the AWS CLI to create a bucket.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">$ <strong class="userinput"><code>aws s3 mb s3://<em class="replaceable"><code>lambda-deployment-artifacts-123456789012</code></em></code></strong></code></pre>
                     
                     <h2 id="with-pipeline-create-cfn-role">Create an AWS CloudFormation Role</h2>
                     
                     <p>Create a role that gives AWS CloudFormation permission to access AWS resources.</p>
                     
                     <p class="title"><b>To create an AWS CloudFormation role</b></p>
                     <ol>
                        <li>
                           
                           <p>Open the <a href="https://console.aws.amazon.com/iam/home#/roles" target="_blank">roles page</a> in the IAM console.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Create role</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Create a role with the following properties.</p>
                           
                           <div class="itemizedlist">
                              
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p><b>Trusted entity</b> &#x2013; <b>AWS CloudFormation</b></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Permissions</b> &#x2013; <b>AWSLambdaExecute</b></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Role name</b> &#x2013; <strong class="userinput"><code>cfn-lambda-pipeline</code></strong></p>
                                    
                                 </li>
                              </ul>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>Open the role. Under the <b>Permissions</b> tab, choose <b>Add inline
                                 policy</b>. 
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In <b>Create Policy</b>, choose the <b>JSON</b> tab and add the following
                              policy.
                           </p>
                           <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">{
    &quot;Statement&quot;: [
        {
            &quot;Action&quot;: [
                &quot;apigateway:*&quot;,
                &quot;codedeploy:*&quot;,
                &quot;lambda:*&quot;,
                &quot;cloudformation:CreateChangeSet&quot;,
                &quot;iam:GetRole&quot;,
                &quot;iam:CreateRole&quot;,
                &quot;iam:DeleteRole&quot;,
                &quot;iam:PutRolePolicy&quot;,
                &quot;iam:AttachRolePolicy&quot;,
                &quot;iam:DeleteRolePolicy&quot;,
                &quot;iam:DetachRolePolicy&quot;,
                &quot;iam:PassRole&quot;,
                &quot;s3:GetObjectVersion&quot;,
                &quot;s3:GetBucketVersioning&quot;
            ],
            &quot;Resource&quot;: &quot;*&quot;,
            &quot;Effect&quot;: &quot;Allow&quot;
        }
    ],
    &quot;Version&quot;: &quot;2012-10-17&quot;
}</code></pre>
                           </li>
                     </ol>
                     
                     
                     <h2 id="setup-repository">Set Up a Repository</h2>
                     
                     
                     <p>Create an AWS CodeCommit repository to store your project files. For more information,
                        see <a href="./codecommit/latest/userguide/setting-up.html">Setting Up</a> in the CodeCommit User Guide.
                     </p>
                     
                     <p class="title"><b>To create a repository</b></p>
                     <ol>
                        <li>
                           
                           <p>Open the <a href="https://console.aws.amazon.com/codesuite/home" target="_blank">Developer Tools console</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Under <b>Source</b>, choose <b>Repositories</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Create repository</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Follow the instructions to create and clone a repository named
                              <strong class="userinput"><code>lambda-pipeline-repo</code></strong>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     <p>Create the following files in the repository folder.</p>
                     
                     <div class="example">
                        <p class="title"><b>Example index.js</b></p>
                        <div class="example-contents">
                           <p>A Lambda function that returns the current time.</p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">var time = require(&apos;time&apos;);
exports.handler = (event, context, callback) =&gt; {
    var currentTime = new time.Date(); 
    currentTime.setTimezone(&quot;America/Los_Angeles&quot;);
    callback(null, {
        statusCode: &apos;200&apos;,
        body: &apos;The time in Los Angeles is: &apos; + currentTime.toString(),
    });
};</code></pre></div>
                     </div>
                     
                     <div class="example">
                        <p class="title"><b>Example template.yaml</b></p>
                        <div class="example-contents">
                           <p>The <a href="serverless_app.html">SAM template</a> that defines the application.
                           </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">AWSTemplateFormatVersion: &apos;2010-09-09&apos;
Transform: AWS::Serverless-2016-10-31
Description: Outputs the time
Resources:
  TimeFunction:
    Type: AWS::Serverless::Function
    Properties:
      Handler: index.handler
      Runtime: nodejs8.10
      CodeUri: ./
      Events:
        MyTimeApi:
          Type: Api
          Properties:
            Path: /TimeResource
            Method: GET</code></pre></div>
                     </div>
                     
                     <div class="example">
                        <p class="title"><b>Example buildspec.yml</b></p>
                        <div class="example-contents">
                           <p>An <a href="./codebuild/latest/userguide/build-spec-ref.html">AWS CodeBuild build specification</a> that installs required
                              packages and uploads the deployment package to Amazon S3. Replace the highlighted
                              text with the name of your
                              bucket.
                           </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">version: 0.2
phases:
  install:
    commands:
      - npm install time
      - export BUCKET=<em class="replaceable"><code>lambda-deployment-artifacts-123456789012</code></em>
      - aws cloudformation package --template-file template.yaml --s3-bucket $BUCKET --output-template-file outputtemplate.yaml
artifacts:
  type: zip
  files:
    - template.yaml
    - outputtemplate.yaml</code></pre></div>
                     </div>
                     
                     <p>Commit and push the files to CodeCommit.</p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">~/lambda-pipeline-repo$ <strong class="userinput"><code>git add .</code></strong>
~/lambda-pipeline-repo$ <strong class="userinput"><code>git commit -m &quot;project files&quot;</code></strong>
~/lambda-pipeline-repo$ <strong class="userinput"><code>git push</code></strong></code></pre>
                     
                     <h2 id="create-pipeline1">Create a Pipeline</h2>
                     
                     <p>Create a pipeline that deploys your application. The pipeline monitors your repository
                        for changes, runs an
                        AWS CodeBuild build to create a deployment package, and deploys the application with
                        AWS CloudFormation. During the pipeline
                        creation process, you also create the AWS CodeBuild build project.
                     </p>
                     
                     <p class="title"><b>To create a pipeline</b></p>
                     <ol>
                        <li>
                           
                           <p>Open the <a href="https://console.aws.amazon.com/codesuite/home" target="_blank">Developer Tools console</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Under <b>Pipeline</b>, choose <b>Pipelines</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Create pipeline</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Configure the pipeline settings and choose <b>Next</b>.
                           </p>
                           
                           <div class="itemizedlist">
                              
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p><b>Pipeline name</b> &#x2013; <strong class="userinput"><code>lambda-pipeline</code></strong></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Service role</b> &#x2013; <b>New service role</b></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Artifact store</b> &#x2013; <b>Default location</b></p>
                                    
                                 </li>
                              </ul>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>Configure source stage settings and choose <b>Next</b>.
                           </p>
                           
                           <div class="itemizedlist">
                              
                              
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p><b>Source provider</b> &#x2013; <b>AWS CodeCommit</b></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Repository name</b> &#x2013; <b>lambda-pipeline-repo</b></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Branch name</b> &#x2013; <b>master</b></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Change detection options</b> &#x2013; <b>Amazon CloudWatch
                                          Events</b></p>
                                    
                                 </li>
                              </ul>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>For <b>Build provider</b>, choose <b>AWS CodeBuild</b>, and then choose
                              <b>Create project</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Configure build project settings and choose <b>Continue to CodePipeline</b>.
                           </p>
                           
                           <div class="itemizedlist">
                              
                              
                              
                              
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p><b>Project name</b> &#x2013; <strong class="userinput"><code>lambda-pipeline-build</code></strong></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Operating system</b> &#x2013; <b>Ubuntu</b></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Runtime</b> &#x2013; <b>Node.js</b></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Runtime version</b> &#x2013; <b>aws/codebuild/nodejs:8.11.0</b></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Image version</b> &#x2013; <b>Latest</b></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Buildspec name</b> &#x2013; <strong class="userinput"><code>buildspec.yml</code></strong></p>
                                    
                                 </li>
                              </ul>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Next</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Configure deploy stage settings and choose <b>Next</b>.
                           </p>
                           
                           <div class="itemizedlist">
                              
                              
                              
                              
                              
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p><b>Deploy provider</b> &#x2013; <b>AWS CloudFormation</b></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Action mode</b> &#x2013; <b>Create or replace a change set</b></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Stack name</b> &#x2013; <b>lambda-pipeline-stack</b></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Change set name</b> &#x2013; <b>lambda-pipeline-changeset</b></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Template</b> &#x2013;
                                       <strong class="userinput"><code>BuildArtifact::outputtemplate.yaml</code></strong></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Capabilities</b> &#x2013; <b>CAPABILITY_IAM</b></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Role name</b> &#x2013; <b>cfn-lambda-pipeline</b></p>
                                    
                                 </li>
                              </ul>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Create pipeline</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p>The pipeline fails the first time it runs because it needs additional permissions.
                        In the next section, you
                        add permissions to the role that&apos;s generated for your build stage..
                     </p>
                     
                     
                     <h2 id="update-policy">Update the Build Stage Role</h2>
                     
                     <p>During the build stage, AWS CodeBuild needs permission to upload the build output
                        to your Amazon S3 bucket.
                     </p>
                     
                     <p class="title"><b>To update the role</b></p>
                     <ol>
                        <li>
                           
                           <p>Open the <a href="https://console.aws.amazon.com/iam/home#/roles" target="_blank">roles page</a> in the IAM console.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>code-build-lamba-pipeline-service-role</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Attach policies</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Attach <b>AmazonS3FullAccess</b>.
                           </p>
                           
                        </li>
                     </ol>
                     
                     
                     <h2 id="create-pipeline2">Complete the Deployment Stage</h2>
                     
                     <p>The deployment stage has an action that creates a change set for the AWS CloudFormation
                        stack that manages your Lambda
                        application. Add a second action that executes the change set to complete the deployment.
                     </p>
                     
                     <p class="title"><b>To update the deployment stage</b></p>
                     <ol>
                        <li>
                           
                           <p>Open your pipeline in the <a href="https://console.aws.amazon.com/codesuite/home" target="_blank">Developer Tools
                                 console</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Edit</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Next to <b>Deploy</b>, choose <b>Edit stage</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Add action group</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Configure deploy stage settings and choose <b>Next</b>.
                           </p>
                           
                           <div class="itemizedlist">
                              
                              
                              
                              
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p><b>Action name</b> &#x2013; <strong class="userinput"><code>execute-changeset</code></strong></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Deploy provider</b> &#x2013; <b>AWS CloudFormation</b></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Input artifacts</b> &#x2013; <b>BuildArtifact</b></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Action mode</b> &#x2013; <b>Execute a change set</b></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Stack name</b> &#x2013; <b>lambda-pipeline-stack</b></p>
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p><b>Change set name</b> &#x2013; <b>lambda-pipeline-changeset</b></p>
                                    
                                 </li>
                              </ul>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Save</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Done</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Save</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Choose <b>Release change</b> to run the pipeline.
                           </p>
                           
                        </li>
                     </ol>
                     
                     <p>Your pipeline is ready. Push changes to the master branch to trigger a deployment.</p>
                     
                     <div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div>
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                       browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be
                                    enabled. Please refer to your browser's Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="sample-errorprocessor.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="best-practices.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2019, Amazon Web Services, Inc. or its affiliates. All rights
                        reserved.
                     </div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Prerequisites"><a class="pagetoc" href="#with-pipeline-prepare">Prerequisites</a></li>
                        <li class="pagetoc" name="Create an AWS CloudFormation Role"><a class="pagetoc" href="#with-pipeline-create-cfn-role">Create an AWS CloudFormation Role</a></li>
                        <li class="pagetoc" name="Set Up a Repository"><a class="pagetoc" href="#setup-repository">Set Up a Repository</a></li>
                        <li class="pagetoc" name="Create a Pipeline"><a class="pagetoc" href="#create-pipeline1">Create a Pipeline</a></li>
                        <li class="pagetoc" name="Update the Build Stage Role"><a class="pagetoc" href="#update-policy">Update the Build Stage Role</a></li>
                        <li class="pagetoc" name="Complete the Deployment Stage"><a class="pagetoc" href="#create-pipeline2">Complete the Deployment Stage</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="cookie-notice">
         <div class="cookie-notice-text">We use cookies to provide and improve our services. By using
            our site, you consent to cookies. <a href="http://aws.amazon.com/legal/cookies">Learn more</a></div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS Lambda';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='Developer Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>