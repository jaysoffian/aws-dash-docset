<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Updating Stacks Directly - AWS CloudFormation</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="using-cfn-updating-stacks.html" title="AWS CloudFormation Stacks Updates">
      <link rel="prev" href="using-cfn-updating-stacks-changesets-samples.html" title="Example
      Change Sets">
      <link rel="next" href="using-cfn-updating-stacks-monitor-stack.html" title="Monitoring the Progress of a Stack
      Update">
      <meta name="description" content="Update a AWS CloudFormation stack directly by submitting a template or input parameters that specify updates to the stack&apos;s resources. AWS CloudFormation deploys changes immediately.">
      <meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation Designer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS CloudFormation">
      <meta name="guide" content="User Guide">
      <meta name="guide-locale" content="en_us">
      <meta name="tocs" content="toc-contents.json">
      <meta name="marketingLocale" content="en_US">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-direct.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20181221"></script><link rel="stylesheet" type="text/css" href="../../../css/marketing-target.css"><script type="text/javascript" src="/assets/marketing/js/marketing-target.js"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="/index.html">AWS Documentation</a> &#xBB; <a href="/cloudformation/index.html">AWS CloudFormation</a> &#xBB; <a href="index.html">User Guide</a> &#xBB; <a href="stacks.html">Working with Stacks</a> &#xBB; <a href="using-cfn-updating-stacks.html">AWS CloudFormation Stacks Updates</a> &#xBB; <span class="breadcrumb">Updating Stacks Directly</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div id="language-notice">
                        <div class="language-notice-text"></div>
                     </div>
                     <div></div>
                     <h1 class="topictitle" id="using-cfn-updating-stacks-direct">Updating Stacks Directly</h1>
                     <p>When you want to quickly deploy updates to your stack, perform a direct update. With
                        a direct update, you submit a template or input parameters that specify updates to
                        the resources in the stack, and AWS CloudFormation immediately deploys them. If you
                        want to use a template to make your updates, you can modify the current template and
                        store it locally or in an S3 bucket.
                     </p>
                     <p>For resource properties that don&apos;t support updates, you must keep the current values.
                        To preview the changes that AWS CloudFormation will make to your stack before you
                        update it, use change sets. For more information, see <a href="using-cfn-updating-stacks-changesets.html">Updating Stacks Using
                           Change Sets</a>.
                     </p>
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>When updating a stack, AWS CloudFormation might interrupt resources or replace updated
                           resources, depending on which properties you update. For more information about resource
                           update behaviors, see <a href="using-cfn-updating-stacks-update-behaviors.html">Update Behaviors of Stack
                              Resources</a>.
                        </p>
                     </div>
                     <p class="title"><b>To update a AWS CloudFormation stack (console)</b></p>
                     <ol>
                        <li>
                           
                           <p>In the <a href="https://console.aws.amazon.com/cloudformation" target="_blank">AWS CloudFormation console</a>, from the list of stacks, select the running stack that you want to update.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>In the stack details pane, choose <b>Update</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>If you <em>haven&apos;t</em> modified the stack template, select <b>Use
                                 current template</b>, and then click <b>Next</b>. 
                           </p>
                           
                           <p>If you have modified the template, select <b>Replace current template</b>
                              and specify the location of the updated template in the <b>Specify
                                 template</b> section:
                           </p>
                           
                           <div class="itemizedlist">
                              
                              
                              
                              <ul class="itemizedlist" type="disc">
                                 <li class="listitem">
                                    
                                    <p>For a template stored locally on your computer, select <b>Upload a template
                                          file</b>. Choose <b>Choose file</b> to navigate to the file and
                                       select it, and then click <b>Next</b>.
                                    </p>
                                    
                                    
                                    <div class="aws-note">
                                       <p class="aws-note">Note</p>
                                       <p>If you upload a local template file, AWS CloudFormation uploads it to an Amazon Simple
                                          Storage Service (Amazon S3)
                                          bucket in your AWS account. If you don&apos;t already have an S3 bucket that was
                                          created by AWS CloudFormation, it creates a unique bucket for each Region in which
                                          you upload
                                          a template file. If you already have an S3 bucket that was created by AWS CloudFormation
                                          in
                                          your AWS account, AWS CloudFormation adds the template to that bucket.
                                       </p>
                                       <p>Considerations to keep in mind about S3 buckets created by AWS CloudFormation</p>
                                       <div class="itemizedlist">
                                          
                                          
                                          
                                          
                                          <ul class="itemizedlist" type="disc">
                                             <li class="listitem">
                                                <p>The buckets are accessible to anyone with Amazon S3
                                                   permissions in your AWS account.
                                                </p>
                                             </li>
                                             <li class="listitem">
                                                <p>AWS CloudFormation creates the buckets with server-side encryption enabled by default,
                                                   thereby encrypting all objects stored in the bucket. 
                                                </p>
                                                
                                                <p>You can directly manage encryption options for buckets that AWS CloudFormation has
                                                   created; for example, using the Amazon S3 console at <a href="https://console.aws.amazon.com/s3/" target="_blank">https://console.aws.amazon.com/s3/</a> , or the AWS
                                                   CLI. For more information, see <a href="./AmazonS3/latest/dev/bucket-encryption.html">Amazon S3 Default Encryption for
                                                      S3 Buckets</a> in the <em><a href="./AmazonS3/latest/dev/">Amazon Simple Storage Service Developer Guide</a></em>.
                                                </p>
                                             </li>
                                             <li class="listitem">
                                                <p>You can use your own bucket and manage its permissions by manually uploading
                                                   templates to Amazon S3. When you create or update a stack, specify the Amazon S3 URL
                                                   of a
                                                   template file.
                                                </p>
                                             </li>
                                          </ul>
                                       </div>
                                    </div> 
                                    
                                    
                                 </li>
                                 <li class="listitem">
                                    
                                    <p>For a template stored in an Amazon S3 bucket, choose <b>Amazon S3 URL</b>. Enter
                                       or paste the URL for the template, and then click <b>Next</b>.
                                    </p>
                                    
                                    <p>If you have a template in a versioning-enabled bucket, you can specify a specific
                                       version of the template, such as <code class="code">https://s3.amazonaws.com/templates/myTemplate.template?versionId=123ab1cdeKdOW5IH4GAcYbEngcpTJTDW</code>. For more information, see <a href="./AmazonS3/latest/user-guide/managing-objects-versioned-bucket.html">Managing Objects in a Versioning-Enabled Bucket</a> in the <em>Amazon Simple Storage Service Console User Guide</em>.
                                    </p>
                                    
                                 </li>
                              </ul>
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>If your template contains parameters, on the <b>Specify stack details</b>
                              page you can enter or modify the parameter values, and then click
                              <b>Next</b>.
                           </p>
                           
                           <p>AWS CloudFormation populates each parameter with the value that is currently set in
                              the stack with
                              the exception of parameters declared with the <code class="code">NoEcho</code> attribute; however, you
                              can still use current values by checking <b>Use existing value</b>.
                           </p>
                           
                           <div class="mediaobject">
                              
                              <img src="../../..//img/console-update-stack-parameters-use-existing-value.png" alt="
          A parameter field with the Use existing value option checked.
        ">
                              
                              
                              
                           </div>
                           
                        </li>
                        <li>
                           
                           <p>On the <b>Configure stack options</b> page, you can update the tags and
                              permissions applied to the stack, as well as modfiy advanced options such as stack
                              policy,
                              rollback configuration, or update the Amazon SNS notification topic. 
                           </p>
                           
                           <p>For more information about these options,
                              see <a href="cfn-console-add-tags.html">Setting AWS CloudFormation Stack Options</a>.
                           </p>
                           
                           <p>Click <b>Next</b>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>Review the stack information and the changes that you submitted.</p>
                           
                           <p>Check that you submitted the correct information, such as the correct parameter values
                              or template URL. If your template contains IAM resources, select <b>I acknowledge
                                 that this template may create IAM resources</b> to specify that you want to use
                              IAM resources in the template. For more information about using IAM resources in
                              templates, see <a href="using-iam-template.html">Controlling Access with AWS Identity and Access Management</a>.
                           </p>
                           
                           <p>In the <b>Change set preview</b> section, check that AWS CloudFormation will make all
                              the changes that you expect. For example, you can check that AWS CloudFormation adds,
                              removes, and
                              modifies the resources that you intended to add, remove, or modify. AWS CloudFormation
                              generates this
                              preview by creating a change set for the stack. For more information, see <a href="using-cfn-updating-stacks-changesets.html">Updating Stacks Using
                                 Change Sets</a>.
                           </p>
                           
                        </li>
                        <li>
                           
                           <p>When you are satisifed with your changes, click <b>Update stack</b>.
                           </p>
                           
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p>At this point, you also have the option to view the change set to review your proposed
                                 updates
                                 more thoroughly. To do so, click <b>View change set</b> instead of
                                 <b>Update stack</b>. CloudFormation displays the change set generated
                                 based on your updates. When you are ready to perform the stack update, click
                                 <b>Execute</b>.
                              </p>
                           </div>
                           
                           <p>CloudFormation displays the stack details page for your stack, with the <b>Events</b> pane
                              selected. Your stack now has a status of <b>UPDATE_IN_PROGRESS</b>. After
                              CloudFormation has successfully finished updating the stack, it sets the stack status
                              to
                              <b>UPDATE_COMPLETE</b>.
                           </p>
                           
                           <p>If the stack update fails, CloudFormation; automatically rolls back changes, and sets
                              the stack
                              status to <b>UPDATE_ROLLBACK_COMPLETE</b>.
                           </p>
                           
                           <div class="aws-note">
                              <p class="aws-note">Note</p>
                              <p>You can cancel an update while it&apos;s in the <b>UPDATE_IN_PROGRESS</b> state. For more information, see <a href="using-cfn--stack-update-cancel.html">Canceling a Stack Update</a>.
                              </p>
                           </div>
                           
                        </li>
                     </ol>
                     <p class="title"><b>To update a AWS CloudFormation stack (AWS CLI)</b></p>
                     <ul>
                        <li>
                           
                           <p>Use the <a href="./cli/latest/reference/cloudformation/update-stack.html"><code class="code">aws cloudformation update-stack</code></a> command to directly update a stack. You specify the stack, and parameter values and
                              capabilities that you want to update, and, if you want use an updated template, the
                              name of the template.
                           </p>
                           
                           <p>The following example updates the template and input parameters for the <code class="code">mystack</code> stack:
                           </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">PROMPT&gt; aws cloudformation update-stack --stack-name mystack --template-url https://s3.amazonaws.com/sample/updated.template
--parameters ParameterKey=VPCID,ParameterValue=SampleVPCID ParameterKey=SubnetIDs,ParameterValue=SampleSubnetID1\\,SampleSubnetID2</code></pre>
                           <p>The following example updates just the <code class="code">SubnetIDs</code> parameter values for the <code class="code">mystack</code> stack:
                           </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">PROMPT&gt; aws cloudformation update-stack --stack-name mystack --use-previous-template
--parameters ParameterKey=VPCID,UsePreviousValue=true ParameterKey=SubnetIDs,ParameterValue=SampleSubnetID1\\,UpdatedSampleSubnetID2</code></pre>
                           <p>The following example adds two stack notification topics to the <code class="code">mystack</code> stack:
                           </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">PROMPT&gt; aws cloudformation update-stack --stack-name mystack --use-previous-template
--notification-arns &quot;arn:aws:sns:us-east-1:12345678912:mytopic&quot; &quot;arn:aws:sns:us-east-1:12345678912:mytopic2&quot;</code></pre>
                           <p>The following example removes all stack notification topics from the <code class="code">mystack</code> stack:
                           </p><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">PROMPT&gt; aws cloudformation update-stack --stack-name mystack --use-previous-template
--notification-arns []</code></pre>
                           </li>
                     </ul>
                     <div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div>
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                       browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be
                                    enabled. Please refer to your browser's Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="using-cfn-updating-stacks-changesets-samples.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="using-cfn-updating-stacks-monitor-stack.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2019, Amazon Web Services, Inc. or its affiliates. All rights
                        reserved.
                     </div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper"></div>
            </div>
         </div>
      </div>
      <div id="cookie-notice">
         <div class="cookie-notice-text">We use cookies to provide and improve our services. By using
            our site, you consent to cookies. <a href="http://aws.amazon.com/legal/cookies">Learn more</a></div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS CloudFormation';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>