<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>AWS::EC2::SecurityGroup - AWS CloudFormation</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="AWS_EC2.html" title="EC2 Resource Type Reference">
      <link rel="prev" href="aws-resource-ec2-route-table.html" title="AWS::EC2::RouteTable">
      <link rel="next" href="aws-properties-ec2-security-group-rule.html" title="AWS::EC2::SecurityGroup Egress">
      <meta name="description" content="Specifies a security group. To create a VPC security group, use the VpcId property.">
      <meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation Designer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS CloudFormation">
      <meta name="guide" content="User Guide">
      <meta name="guide-locale" content="en_us">
      <meta name="tocs" content="toc-contents.json;toc-AWS_EC2.json">
      <meta name="marketingLocale" content="en_US">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ec2-security-group.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20181221"></script><link rel="stylesheet" type="text/css" href="../../../css/marketing-target.css"><script type="text/javascript" src="/assets/marketing/js/marketing-target.js"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="/index.html">AWS Documentation</a> &#xBB; <a href="/cloudformation/index.html">AWS CloudFormation</a> &#xBB; <a href="index.html">User Guide</a> &#xBB; <a href="AWS_EC2.html">EC2 Resource Type Reference</a> &#xBB; <span class="breadcrumb">AWS::EC2::SecurityGroup</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div id="language-notice">
                        <div class="language-notice-text"></div>
                     </div>
                     <div></div>
                     <div id="language-filter" class="page-header" style="display:none">
                        <form> Filter View: 
                           <select name="filter-select" id="filter-select">
                              <option selected="1">All</option>
                              <option value="JSON" selected>JSON</option>
                              <option value="YAML" selected>YAML</option></select></form>
                     </div>
                     <h1 class="topictitle" id="aws-properties-ec2-security-group">AWS::EC2::SecurityGroup</h1>
                     <p>Specifies a security group. To create a VPC security group, use the <a href="./AWSCloudFormation/latest/UserGuide/aws-properties-ec2-security-group.html#cfn-ec2-securitygroup-vpcid">VpcId</a> property.
                     </p>
                     <p>This type supports updates. For more information about updating stacks, see <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks.html">AWS CloudFormation Stacks Updates</a>.
                     </p>
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>If you want to cross-reference two security groups in the ingress and egress rules
                           of
                           those security groups, use the <a href="./AWSCloudFormation/latest/UserGuide/aws-resource-ec2-security-group-egress.html">AWS::EC2::SecurityGroupEgress</a> and <a href="./AWSCloudFormation/latest/UserGuide/aws-resource-ec2-security-group-ingress.html">AWS::EC2::SecurityGroupIngress</a> resources to define your
                           rules. Do not use the embedded ingress and egress rules in the
                           <code class="code">AWS::EC2::SecurityGroup</code>. Doing so creates a circular dependency, which
                           CloudFormation doesn&apos;t allow.
                        </p>
                     </div>
                     <h2 id="aws-properties-ec2-security-group-syntax">Syntax</h2>
                     <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-properties-ec2-security-group-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Type&quot; : &quot;AWS::EC2::SecurityGroup&quot;,
  &quot;Properties&quot; : {
      &quot;<a href="#cfn-ec2-securitygroup-groupdescription">GroupDescription</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-securitygroup-groupname">GroupName</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-securitygroup-securitygroupegress">SecurityGroupEgress</a>&quot; : <em class="replaceable"><code>[ <a href="aws-properties-ec2-security-group-rule.html">Egress</a>, ... ]</code></em>,
      &quot;<a href="#cfn-ec2-securitygroup-securitygroupingress">SecurityGroupIngress</a>&quot; : <em class="replaceable"><code>[ <a href="aws-properties-ec2-security-group-rule-1.html">Ingress</a>, ... ]</code></em>,
      &quot;<a href="#cfn-ec2-securitygroup-tags">Tags</a>&quot; : <em class="replaceable"><code>[ <a href="./AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html">Tag</a>, ... ]</code></em>,
      &quot;<a href="#cfn-ec2-securitygroup-vpcid">VpcId</a>&quot; : <em class="replaceable"><code>String</code></em>
    }
}
</code></pre></div>
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-properties-ec2-security-group-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">Type: AWS::EC2::SecurityGroup
Properties: 
  <a href="#cfn-ec2-securitygroup-groupdescription">GroupDescription</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-securitygroup-groupname">GroupName</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-securitygroup-securitygroupegress">SecurityGroupEgress</a>: <em class="replaceable"><code>
    - <a href="aws-properties-ec2-security-group-rule.html">Egress</a></code></em>
  <a href="#cfn-ec2-securitygroup-securitygroupingress">SecurityGroupIngress</a>: <em class="replaceable"><code>
    - <a href="aws-properties-ec2-security-group-rule-1.html">Ingress</a></code></em>
  <a href="#cfn-ec2-securitygroup-tags">Tags</a>: <em class="replaceable"><code>
    - <a href="./AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html">Tag</a></code></em>
  <a href="#cfn-ec2-securitygroup-vpcid">VpcId</a>: <em class="replaceable"><code>String</code></em>
</code></pre></div>
                     <h2 id="aws-properties-ec2-security-group-properties">Properties</h2>
                     <div class="variablelist">
                        <dl>
                           <dt><a id="cfn-ec2-securitygroup-groupdescription"></a><span class="term"><code class="code">GroupDescription</code></span></dt>
                           <dd>
                              
                              <p>A description for the security group. This is informational only.</p>
                              		       
                              <p>Constraints: Up to 255 characters in length</p>
                              		       
                              <p>Constraints for EC2-Classic: ASCII characters</p>
                              		       
                              <p>Constraints for EC2-VPC: a-z, A-Z, 0-9, spaces, and ._-:/()#,@[]+=&amp;;{}!$*</p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-securitygroup-groupname"></a><span class="term"><code class="code">GroupName</code></span></dt>
                           <dd>
                              
                              <p>The name of the security group.</p>
                              
                              <p>Constraints: Up to 255 characters in length. Cannot start with
                                 <code class="code">sg-</code>.
                              </p>
                              
                              <p>Constraints for EC2-Classic: ASCII characters</p>
                              
                              <p>Constraints for EC2-VPC: a-z, A-Z, 0-9, spaces, and ._-:/()#,@[]+=&amp;;{}!$*</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-securitygroup-securitygroupegress"></a><span class="term"><code class="code">SecurityGroupEgress</code></span></dt>
                           <dd>
                              
                              <p>[VPC only] The outbound rules associated with the security group.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: List of <a href="aws-properties-ec2-security-group-rule.html">Egress</a></p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-securitygroup-securitygroupingress"></a><span class="term"><code class="code">SecurityGroupIngress</code></span></dt>
                           <dd>
                              
                              <p>The inbound rules associated with the security group.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: List of <a href="aws-properties-ec2-security-group-rule-1.html">Ingress</a></p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-securitygroup-tags"></a><span class="term"><code class="code">Tags</code></span></dt>
                           <dd>
                              
                              <p>Any tags assigned to the security group.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: List of <a href="./AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html">Tag</a></p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-securitygroup-vpcid"></a><span class="term"><code class="code">VpcId</code></span></dt>
                           <dd>
                              
                              <p>[VPC only] The ID of the VPC for the security group.</p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                        </dl>
                     </div>
                     <h2 id="aws-properties-ec2-security-group-return-values">Return Values</h2>
                     <h3 id="aws-properties-ec2-security-group-return-values-ref">Ref</h3>
                     <p>When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the resource name.
                     </p>
                     <p>For more information about using the <code class="code">Ref</code> function, see <a href="./AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-ref.html">Ref</a>.
                     </p>
                     <h3 id="aws-properties-ec2-security-group-return-values-fn--getatt">Fn::GetAtt</h3>
                     <p>The <code class="code">Fn::GetAtt</code> intrinsic function returns a value for a specified attribute of this type. The following
                        are the available attributes and sample return values.
                     </p> 
                     
                     <p>For more information about using the <code class="code">Fn::GetAtt</code> intrinsic function, see <a href="./AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-getatt.html">Fn::GetAtt</a>.
                     </p>
                     <h4 id="aws-properties-ec2-security-group-return-values-fn--getatt-fn--getatt"></h4>
                     <div class="variablelist">
                        <dl>
                           <dt><a id="GroupId-fn::getatt"></a><span class="term"><code class="code">GroupId</code></span></dt>
                           <dd>
                              
                              <p>The group ID of the specified security group, such as
                                 <code class="code">sg-94b3a1f6</code>.
                              </p>
                              
                           </dd>
                           <dt><a id="VpcId-fn::getatt"></a><span class="term"><code class="code">VpcId</code></span></dt>
                           <dd>
                              
                              <p>The physical ID of the VPC. You can obtain the physical ID by using a reference
                                 to an <a href="./AWSCloudFormation/latest/UserGuide/aws-resource-ec2-vpc.html">AWS::EC2::VPC</a>, such as: <code class="code">{
                                    &quot;Ref&quot; : &quot;myVPC&quot; }</code>.
                              </p>
                              
                           </dd>
                        </dl>
                     </div>
                     <h2 id="aws-properties-ec2-security-group--examples">Examples</h2>
                     <h3 id="aws-properties-ec2-security-group--examples--Define_Basic_Ingress_and_Egress_Rules">Define Basic Ingress and Egress Rules</h3>
                     <p>The following example specifies a security group with an ingress and egress rule.
                        
                     </p>
                     <h4 id="aws-properties-ec2-security-group--examples--Define_Basic_Ingress_and_Egress_Rules--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">&quot;InstanceSecurityGroup&quot; : {
   &quot;Type&quot; : &quot;AWS::EC2::SecurityGroup&quot;,
   &quot;Properties&quot; : {
      &quot;GroupDescription&quot; : &quot;Allow http to client host&quot;,
      &quot;VpcId&quot; : {&quot;Ref&quot; : &quot;myVPC&quot;},
      &quot;SecurityGroupIngress&quot; : [{
         &quot;IpProtocol&quot; : &quot;tcp&quot;,
         &quot;FromPort&quot; : 80,
         &quot;ToPort&quot; : 80,
         &quot;CidrIp&quot; : &quot;0.0.0.0/0&quot;
      }],
      &quot;SecurityGroupEgress&quot; : [{
         &quot;IpProtocol&quot; : &quot;tcp&quot;,
         &quot;FromPort&quot; : 80,
         &quot;ToPort&quot; : 80,
         &quot;CidrIp&quot; : &quot;0.0.0.0/0&quot;
      }]
   }
}</code></pre><h4 id="aws-properties-ec2-security-group--examples--Define_Basic_Ingress_and_Egress_Rules--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">InstanceSecurityGroup:
  Type: AWS::EC2::SecurityGroup
  Properties:
      GroupDescription: Allow http to client host
      VpcId:
         Ref: myVPC
      SecurityGroupIngress:
      - IpProtocol: tcp
        FromPort: 80
        ToPort: 80
        CidrIp: 0.0.0.0/0
      SecurityGroupEgress:
      - IpProtocol: tcp
        FromPort: 80
        ToPort: 80
        CidrIp: 0.0.0.0/0</code></pre><h3 id="aws-properties-ec2-security-group--examples--Remove_Default_Rule">Remove Default Rule</h3>
                     <p>When you specify a VPC security group, Amazon EC2 creates a default egress rule that
                        allows egress traffic on all ports and IP protocols to any location. The default rule
                        is removed only when you specify one or more egress rules. If you want to remove the
                        default rule and limit egress traffic to just the localhost (127.0.0.1/32), use the
                        following example. 
                     </p>
                     <h4 id="aws-properties-ec2-security-group--examples--Remove_Default_Rule--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">&quot;sgwithoutegress&quot;: {
  &quot;Type&quot;: &quot;AWS::EC2::SecurityGroup&quot;,
  &quot;Properties&quot;: {
    &quot;GroupDescription&quot;: &quot;Limits security group egress traffic&quot;,
    &quot;SecurityGroupEgress&quot;: [
      {
        &quot;CidrIp&quot;: &quot;127.0.0.1/32&quot;,
        &quot;IpProtocol&quot;: &quot;-1&quot;
      }
    ],
    &quot;VpcId&quot;: { &quot;Ref&quot;: &quot;myVPC&quot;}
   }
}</code></pre><h4 id="aws-properties-ec2-security-group--examples--Remove_Default_Rule--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">sgwithoutegress:
  Type: AWS::EC2::SecurityGroup
  Properties:
    GroupDescription: Limits security group egress traffic
    SecurityGroupEgress:
    - CidrIp: 127.0.0.1/32
      IpProtocol: &quot;-1&quot;
    VpcId:
      Ref: myVPC</code></pre><h2 id="aws-properties-ec2-security-group--seealso">See Also</h2>
                     <div class="itemizedlist">
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>
                                 <a href="./vpc/latest/userguide/VPC_SecurityGroups.html">Security Groups for Your VPC</a> in the <em>Amazon VPC User Guide</em></p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>
                                 <a href="./AWSEC2/latest/UserGuide/using-network-security.html">Amazon EC2 Security Groups for Linux Instances </a> in the <em>Amazon EC2 User Guide for Linux Instances</em></p>
                              
                           </li>
                        </ul>
                     </div>
                     <div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div>
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                       browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be
                                    enabled. Please refer to your browser's Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="aws-resource-ec2-route-table.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="aws-properties-ec2-security-group-rule.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2019, Amazon Web Services, Inc. or its affiliates. All rights
                        reserved.
                     </div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Syntax"><a class="pagetoc" href="#aws-properties-ec2-security-group-syntax">Syntax</a></li>
                        <li class="pagetoc" name="Properties"><a class="pagetoc" href="#aws-properties-ec2-security-group-properties">Properties</a></li>
                        <li class="pagetoc" name="Return Values"><a class="pagetoc" href="#aws-properties-ec2-security-group-return-values">Return Values</a></li>
                        <li class="pagetoc" name="Examples"><a class="pagetoc" href="#aws-properties-ec2-security-group--examples">Examples</a></li>
                        <li class="pagetoc" name="See Also"><a class="pagetoc" href="#aws-properties-ec2-security-group--seealso">See Also</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="cookie-notice">
         <div class="cookie-notice-text">We use cookies to provide and improve our services. By using
            our site, you consent to cookies. <a href="http://aws.amazon.com/legal/cookies">Learn more</a></div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS CloudFormation';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>