<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Using Dynamic References to Specify Template
         Values - AWS CloudFormation
      </title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="parameters-section-structure.html" title="Parameters">
      <link rel="prev" href="parameters-section-structure.html" title="Parameters">
      <link rel="next" href="mappings-section-structure.html" title="Mappings">
      <meta name="description" content="Dynamic references provide a concise, powerful way for you to specify external values stored and managed in other services in your stack templates.">
      <meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation Designer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS CloudFormation">
      <meta name="guide" content="User Guide">
      <meta name="guide-locale" content="en_us">
      <meta name="tocs" content="toc-contents.json">
      <meta name="marketingLocale" content="en_US">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/dynamic-references.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20181221"></script><link rel="stylesheet" type="text/css" href="../../../css/marketing-target.css"><script type="text/javascript" src="/assets/marketing/js/marketing-target.js"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="/index.html">AWS Documentation</a> &#xBB; <a href="/cloudformation/index.html">AWS CloudFormation</a> &#xBB; <a href="index.html">User Guide</a> &#xBB; <a href="template-guide.html">Working with AWS CloudFormation Templates</a> &#xBB; <a href="template-anatomy.html">Template Anatomy</a> &#xBB; <a href="parameters-section-structure.html">Parameters</a> &#xBB; <span class="breadcrumb">Using Dynamic References to Specify Template
                                    Values</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div id="language-notice">
                        <div class="language-notice-text"></div>
                     </div>
                     <div></div>
                     <div id="language-filter" class="page-header" style="display:none">
                        <form> Filter View: 
                           <select name="filter-select" id="filter-select">
                              <option selected="1">All</option>
                              <option value="JSON" selected>JSON</option>
                              <option value="YAML" selected>YAML</option></select></form>
                     </div>
                     <h1 class="topictitle" id="dynamic-references">Using Dynamic References to Specify Template
                        Values
                     </h1>
                     <p><em>Dynamic references</em> provide a compact, powerful way for you to specify
                        external values that are stored and managed in other services, such as the Systems
                        Manager Parameter
                        Store, in your stack templates. When you use a dynamic reference, CloudFormation retrieves
                        the value of the specified reference when necessary during stack and change set operations.
                        
                     </p>
                     <p>CloudFormation currently supports the following dynamic reference patterns:</p>
                     <div class="itemizedlist">
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              <p><a href="dynamic-references.html#dynamic-references-ssm">ssm</a>, for plaintext values stored in AWS Systems Manager Parameter Store
                              </p>
                           </li>
                           <li class="listitem">
                              <p><a href="dynamic-references.html#dynamic-references-ssm-secure-strings">ssm-secure</a>, for secure strings stored in AWS Systems Manager Parameter Store
                              </p>
                           </li>
                           <li class="listitem">
                              <p><a href="dynamic-references.html#dynamic-references-secretsmanager">secretsmanager</a>, for entire secrets
                                 or specific secret values that are stored in AWS Secrets Manager
                              </p>
                           </li>
                        </ul>
                     </div>
                     <p>Some considerations when using dynamic references:</p>
                     <div class="itemizedlist">
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              <p>You can include up to 60 dynamic references in a stack template.</p>
                           </li>
                           <li class="listitem">
                              <p>For transforms, such as AWS::Include and AWS::Serverless, AWS CloudFormation does
                                 not resolve dynamic
                                 references prior to invoking any transforms. Rather, AWS CloudFormation passes the
                                 literal string of the
                                 dynamic reference to the transform. Dynamic references (including those inserted into
                                 the
                                 processed template as the result of a transform) are resolved when you execute the
                                 change
                                 set using the template.
                              </p>
                           </li>
                           <li class="listitem">
                              <p>Dynamic references for secure values, such as <code class="code">ssm-secure</code>  and
                                 <code class="code">secretsmanager</code>, are not currently supported in <a href="template-custom-resources.html">custom resources</a>.
                              </p>
                           </li>
                        </ul>
                     </div>
                     <div class="aws-note">
                        <p class="aws-note">Note</p>
                        <p>Do not create a dynamic reference that has a backslash (\) as the final value. AWS
                           CloudFormation cannot resolve those references, which results in a resource failure.
                        </p>
                     </div>
                     
                     <h2 id="dynamic-references-pattern">Specifying Dynamic References in Stack Templates</h2>
                     
                     <p>Dynamic references adhere to the following pattern:</p>
                     <p><code class="code">&apos;{{resolve:<em class="replaceable"><code>service-name</code></em>:<em class="replaceable"><code>reference-key</code></em>}}&apos;</code></p>
                     <div class="variablelist">
                        
                        
                        
                        <dl>
                           
                           <dt><span class="term"><b>service-name</b></span></dt>
                           
                           <dd>    
                              <p>Specifies the service in which the value is stored and managed. </p>
                              
                              <p>Required.</p>
                              
                              <p>Currently, valid values include:</p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       <p><code class="code">ssm</code>: Systems Manager Parameter Store plaintext parameter.
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p><code class="code">ssm-secure</code>: Systems Manager Parameter Store secure string parameter.
                                       </p>
                                       
                                       <div class="aws-note">
                                          <p class="aws-note">Note</p>
                                          <p>Currently, SecureString parameters are not supported by Systems Manager in the <code class="code">cn-north-1</code>
                                             and <code class="code">cn-northwest-1</code> regions. 
                                          </p>
                                       </div>
                                       
                                       <p>For more information, see <a href="./systems-manager/latest/userguide/systems-manager-paramstore.html">AWS Systems Manager Parameter Store</a> in the <em>AWS Systems Manager User Guide</em>.
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       <p><code class="code">secretsmanager</code>: AWS Secrets Manager secret.
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                           </dd>
                           
                           
                           <dt><span class="term"><b>reference-key</b></span></dt>
                           
                           <dd>    
                              
                              <p>The reference key. Depending on the type of dynamic reference, the reference
                                 key may be comprised of mutliple segments.
                              </p>
                              
                              <p>Required.</p>
                              
                           </dd>
                           
                        </dl>
                     </div>
                     
                     <h2 id="dynamic-references-ssm">SSM Parameters</h2>
                     
                     <p>Use the <code class="code">ssm</code> dynamic reference to include values stored in the Systems Manager
                        Parameter Store of type <code class="code">String</code> or <code class="code">StringList</code> in your
                        templates. 
                     </p>
                     
                     
                     <h3 id="dynamic-references-ssm-pattern">Reference Pattern</h3>
                     
                     <p>For SSM Parameters, the <code class="code">reference-key</code> segment is composed of the parameter name and
                        version number. Use the following pattern:
                     </p>
                     
                     <p><code class="code">&apos;{{resolve:ssm:<em class="replaceable"><code>parameter-name</code></em>:<em class="replaceable"><code>version</code></em>}}&apos;</code></p>
                     
                     <p>Your reference must adhere to the following regular expression pattern for
                        parameter-name and version:
                     </p>
                     
                     <p><code class="code">&apos;{{resolve:ssm:[a-zA-Z0-9_.-/]+:\\d+}}&apos;</code></p>
                     
                     <div class="variablelist">
                        
                        
                        
                        <dl>
                           
                           <dt><span class="term"><b>parameter-name</b></span></dt>
                           
                           <dd>
                              <p>The name of the parameter in the Systems Manager
                                 Parameter Store. The parameter name is case-sensitive.
                              </p>
                              
                              <p>Required.</p>
                           </dd>
                           
                           
                           <dt><span class="term"><b>version</b></span></dt>
                           
                           <dd>
                              <p>An integer that specifies the version of the parameter to use. You must specify the
                                 exact
                                 version. You cannot currently specify that AWS CloudFormation use the latest version
                                 of a parameter. For more information, see <a href="./systems-manager/latest/userguide/sysman-paramstore-versions.html">Working with
                                    Parameter Versions</a> in the
                                 <em>AWS Systems Manager User Guide</em></p>
                              
                              <p>Required.</p>
                           </dd>
                           
                        </dl>
                     </div>
                     
                     
                     
                     <h3 id="dynamic-references-ssm-example">Example</h3>
                     
                     <p>The following example uses an <code class="code">ssm</code> dynamic reference to set the access
                        control for an S3 bucket to a parameter value stored in Systems Manager Parameter
                        Store. As
                        specified, CloudFormation will use version 2 of the <code class="code">S3AccessControl</code>
                        parameter for stack and change set operations.
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="dynamic-references-ssm-example.json">JSON</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">  &quot;MyS3Bucket&quot;: {
    &quot;Type&quot;: &quot;AWS::S3::Bucket&quot;,
    &quot;Properties&quot;: {
      &quot;AccessControl&quot;: &quot;{{resolve:ssm:S3AccessControl:2}}&quot;
    }
  }</code></pre> 
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="dynamic-references-ssm-example.yaml">YAML</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&#xA0; MyS3Bucket:
&#xA0;&#xA0;&#xA0; Type:&#xA0;&apos;AWS::S3::Bucket&apos;
&#xA0;&#xA0;&#xA0;&#xA0;Properties:
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; AccessControl:&#xA0;&apos;{{resolve:ssm:S3AccessControl:2}}&apos; </code></pre>
                        </div>
                     
                     
                     <p>To specify a parameter stored in the Systems Manager Parameter Store, you must have
                        access to
                        call <code class="code"><a href="./systems-manager/latest/APIReference/API_GetParameter.html">GetParameters</a></code>
                        for the specified parameter. For more information, see <a href="./systems-manager/latest/userguide/sysman-paramstore-access.html">Controlling Access to Systems
                           Manager Parameters</a> in the <em>AWS Systems Manager User Guide</em>.
                     </p>
                     
                     <p>Additional considerations to note when using the <code class="code">ssm</code> dynamic reference pattern:
                     </p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              <p>Currently, CloudFormation does not support cross-account SSM parameter access.</p>
                           </li>
                           <li class="listitem">
                              <p>For custom resources, CloudFormation resolves <code class="code">ssm</code> dynamic references prior to
                                 sending the request to the custom resource. For more information, see <a href="template-custom-resources.html">Custom Resources</a>.
                              </p>
                           </li>
                           <li class="listitem">
                              
                              <p>CloudFormation does not support using parameter labels or public parameters in
                                 dynamic references. 
                              </p>
                              
                              <p>A parameter label is a user-defined alias to help you manage different versions of
                                 a parameter. For more information, see <a href="./systems-manager/latest/userguide/sysman-paramstore-labels.html">Labeling Parameters</a> in the <em>AWS Systems Manager User Guide</em>.
                              </p>
                              
                              <p>A public parameter is a parameter provided by an AWS service for use with that service,
                                 and stored in AWS Systems Manager Parameter Store. For an example of public parameters,
                                 see <a href="./AmazonECS/latest/developerguide/retrieve-ecs-optimized_AMI.html">Retrieving the Amazon ECS-optimized AMI Metadata</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.
                              </p>
                              
                           </li>
                        </ul>
                     </div>            
                     
                     
                     <h2 id="dynamic-references-ssm-secure-strings">SSM Secure String
                        Parameters
                     </h2>
                     
                     <p>Use the <code class="code">ssm-secure</code> dynamic reference pattern to specify AWS Systems
                        Manager SecureString type parameters in your templates. For <code class="code">ssm-secure</code>
                        dynamic references, AWS CloudFormation never stores the actual parameter value. AWS
                        CloudFormation accesses
                        the parameter value during create and update operations for stacks and change sets.
                        Currently, secure string parameters can only be used for <a href="dynamic-references.html#template-parameters-dynamic-patterns-resources">resource properties
                           that support</a> the <code class="code">ssm-secure</code> dynamic reference pattern. 
                     </p>
                     
                     <p>A <em>secure string parameter</em> is any sensitive data that needs to be stored and referenced
                        in a secure manner. That is, data that you don&apos;t want users to alter or reference
                        in clear text,
                        such as passwords or license keys. For more information on secure strings, see <a href="./systems-manager/latest/userguide/sysman-paramstore-about.html#sysman-paramstore-securestring">Use
                           Secure String Parameters</a> in the
                        <em>AWS Systems Manager User Guide</em>.
                     </p>
                     
                     <p>Secure string parameters values are not stored in CloudFormation, nor are they
                        returned in any API call results. 
                     </p>
                     
                     
                     
                     <h3 id="dynamic-references-ssm-secure-pattern">Reference Pattern</h3>
                     
                     <p>For <code class="code">ssm-secure</code> dynamic references, the <code class="code">reference-key</code> segment is composed of the parameter name and
                        version number. Use the following pattern:
                     </p>
                     
                     <p><code class="code">&apos;{{resolve:ssm-secure:<em class="replaceable"><code>parameter-name</code></em>:<em class="replaceable"><code>version</code></em>}}&apos;</code></p>
                     
                     <p>Your reference must adhere to the following regular expression pattern for
                        parameter-name and version:
                     </p>
                     
                     <p><code class="code">&apos;{{resolve:ssm-secure:[a-zA-Z0-9_.-/]+:\\d+}}&apos;</code></p>
                     
                     
                     <div class="variablelist">
                        
                        
                        
                        <dl>
                           
                           <dt><span class="term"><b>parameter-name</b></span></dt>
                           
                           <dd>
                              <p>The name of the parameter in the Systems Manager
                                 Parameter Store. The parameter name is case-sensitive.
                              </p>
                              
                              <p>Required.</p>
                           </dd>
                           
                           
                           <dt><span class="term"><b>version</b></span></dt>
                           
                           <dd>
                              <p>An integer that specifies the version of the parameter to use. You must specify the
                                 exact
                                 version. You cannot currently specify that AWS CloudFormation use the latest version
                                 of a parameter. For more information, see <a href="./systems-manager/latest/userguide/sysman-paramstore-versions.html">Working with
                                    Parameter Versions</a> in the
                                 <em>AWS Systems Manager User Guide</em></p>
                              
                              <p>Required.</p>
                           </dd>
                           
                        </dl>
                     </div>
                     
                     
                     
                     
                     
                     <h3 id="dynamic-references-ssm-secure-example">Example</h3>
                     
                     <p>The following example uses an <code class="code">ssm-secure</code> dynamic reference to set the
                        password for an IAM user to a secure string stored in Systems Manager Parameter Store.
                        As
                        specified, CloudFormation will use version 10 of the <code class="code">IAMUserPassword</code>
                        parameter for stack and change set operations.
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="dynamic-references-ssm-secure-example.json">JSON</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">  &quot;MyIAMUser&quot;: {
    &quot;Type&quot;: &quot;AWS::IAM::User&quot;,
    &quot;Properties&quot;: {
      &quot;UserName&quot;: &quot;MyUserName&quot;,
      &quot;LoginProfile&quot;: {
        &quot;Password&quot;: &quot;{{resolve:ssm-secure:IAMUserPassword:10}}&quot;
      }
    }
  }</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="dynamic-references-ssm-secure-example.yaml">YAML</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">&#xA0; MyIAMUser:
&#xA0;&#xA0;&#xA0; Type: AWS::IAM::User
&#xA0;&#xA0;&#xA0; Properties:
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; UserName: &apos;MyUserName&apos;
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; LoginProfile:
&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0;&#xA0; Password: &apos;{{resolve:ssm-secure:IAMUserPassword:10}}&apos;</code></pre>
                        </div>
                     
                     
                     
                     <p>Additional considerations to note when using the <code class="code">ssm-secure</code> dynamic reference pattern:
                     </p>
                     
                     <div class="itemizedlist">
                        
                        
                        
                        
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>CloudFormation does not return the actual parameter value for secure
                                 strings in any API calls, but rather returns the literal dynamic reference. 
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>CloudFormation does store the literal dynamic reference, which contains
                                 the plaintext parameter name of the secure string.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>For change sets, CloudFormation compares the
                                 literal dynamic reference string. It does not resolve and compare the actual values
                                 of <code class="code">ssm-secure</code> references. 
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>Dynamic references for secure values, such as <code class="code">ssm-secure</code>  and
                                 <code class="code">secretsmanager</code>, are not currently supported in <a href="template-custom-resources.html">custom resources</a>.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p>In cases where CloudFormation must rollback a stack update, that update
                                 rollback operation will fail if the previously-specified version of a secure
                                 string parameter is no longer available. in such cases, do one of the following: 
                              </p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       <p>Use
                                          <code class="code">CONTINUE_UPDATE_ROLLBACK</code> to skip the resource. 
                                       </p>
                                    </li>
                                    <li class="listitem">
                                       <p>Recreate the secure string parameter in the Systems Manager Parameter Store, and update
                                          it until the parameter version reaches the version used in the template. Then use
                                          <code class="code">CONTINUE_UPDATE_ROLLBACK</code> without skipping the resource. 
                                       </p>
                                    </li>
                                 </ul>
                              </div>
                              
                           </li>
                           <li class="listitem">
                              <p>Currently, AWS CloudFormation does not support cross-account SSM parameter access.</p>
                           </li>
                           <li class="listitem">
                              
                              <p>CloudFormation does not support using parameter labels or public parameters in
                                 dynamic references. 
                              </p>
                              
                              <p>A parameter label is a user-defined alias to help you manage different versions of
                                 a parameter. For more information, see <a href="./systems-manager/latest/userguide/sysman-paramstore-labels.html">Labeling Parameters</a> in the <em>AWS Systems Manager User Guide</em>.
                              </p>
                              
                              <p>A public parameter is a parameter provided by an AWS service for use with that service,
                                 and stored in AWS Systems Manager Parameter Store. For an example of public parameters,
                                 see <a href="./AmazonECS/latest/developerguide/retrieve-ecs-optimized_AMI.html">Retrieving the Amazon ECS-optimized AMI Metadata</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     
                     
                     <h3 id="template-parameters-dynamic-patterns-resources">Resources that
                        Support Dynamic Parameter Patterns for Secure Strings
                     </h3>
                     
                     <p>Resources that support the <code class="code">ssm-secure</code> dynamic reference pattern
                        currently include:
                     </p>
                     
                     <div class="table">
                        <div class="table-contents">
                           <table id="w208ab1c17c15c17c25c29c17b5">
                              
                              <tbody><tr>
                                 
                                 <th>Resource</th>
                                 
                                 <th>Property Type</th>
                                 
                                 <th>Properties</th>
                                 
                              </tr>
                               
                              
                              <tr>
                                 
                                 <td>
                                    <p><a href="./AWSCloudFormation/latest/UserGuide/aws-resource-directoryservice-microsoftad.html">AWS::DirectoryService::MicrosoftAD</a></p>
                                 </td>
                                 
                                 <td></td>
                                 
                                 <td>
                                    <p><code class="code">Password</code></p>
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    <p><a href="./AWSCloudFormation/latest/UserGuide/aws-resource-directoryservice-simplead.html">AWS::DirectoryService::SimpleAD</a></p>
                                 </td>
                                 
                                 <td></td>
                                 
                                 <td>
                                    <p><code class="code">Password</code></p>
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    <p><a href="./AWSCloudFormation/latest/UserGuide/aws-resource-elasticache-replicationgroup.html">AWS::ElastiCache::ReplicationGroup</a></p>
                                 </td>
                                 
                                 <td></td>
                                 
                                 <td>
                                    <p><code class="code">AuthToken</code></p>
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    <p><a href="./AWSCloudFormation/latest/UserGuide/aws-properties-iam-user.html">AWS::IAM::User</a></p>
                                 </td>
                                 
                                 <td>
                                    <p><a href="./AWSCloudFormation/latest/UserGuide/aws-properties-iam-user-loginprofile.html">LoginProfile</a></p>
                                 </td>
                                 
                                 <td>
                                    <p><code class="code">Password</code></p>
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    <p><a href="./AWSCloudFormation/latest/UserGuide/aws-resource-kinesisfirehose-deliverystream.html">AWS::KinesisFirehose::DeliveryStream</a></p>
                                 </td>
                                 
                                 <td>
                                    <p><a href="./AWSCloudFormation/latest/UserGuide/aws-properties-kinesisfirehose-deliverystream-redshiftdestinationconfiguration.html">RedshiftDestinationConfiguration</a></p>
                                 </td>
                                 
                                 <td>
                                    <p><code class="code">Password</code></p>
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    <p><a href="./AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-app.html">AWS::OpsWorks::App</a></p>
                                 </td>
                                 
                                 <td>
                                    <p><a href="./AWSCloudFormation/latest/UserGuide/aws-properties-opsworks-stack-source-1.html">Source</a></p>
                                 </td>
                                 
                                 <td>
                                    <p><code class="code">Password</code></p>
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    <p><a href="./AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-stack.html">https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-stack.html</a></p>
                                 </td>
                                 
                                 <td>
                                    <p><a href="./AWSCloudFormation/latest/UserGuide/aws-properties-opsworks-stack-source.html">CustomCookbooksSource</a></p>
                                 </td>
                                 
                                 <td>
                                    <p><code class="code">Password</code></p>
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    <p><a href="./AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-stack.html">https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-opsworks-stack.html</a></p>
                                 </td>
                                 
                                 <td>
                                    <p><a href="./AWSCloudFormation/latest/UserGuide/aws-properties-opsworks-stack-rdsdbinstance.html">RdsDbInstances</a></p>
                                 </td>
                                 
                                 <td>
                                    <p><code class="code">DbPassword</code></p>
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    <p><a href="./AWSCloudFormation/latest/UserGuide/aws-resource-rds-dbcluster.html">AWS::RDS::DBCluster</a></p>
                                 </td>
                                 
                                 <td></td>
                                 
                                 <td>
                                    <p><code class="code">MasterUserPassword</code></p>
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    <p><a href="./AWSCloudFormation/latest/UserGuide/aws-properties-rds-database-instance.html">AWS::RDS::DBInstance</a></p>
                                 </td>
                                 
                                 <td></td>
                                 
                                 <td>
                                    <p><code class="code">MasterUserPassword</code></p>
                                    
                                 </td>
                                 
                              </tr>
                              
                              <tr>
                                 
                                 <td>
                                    <p><a href="./AWSCloudFormation/latest/UserGuide/aws-resource-redshift-cluster.html">AWS::Redshift::Cluster</a></p>
                                 </td>
                                 
                                 <td></td>
                                 
                                 <td>
                                    <p><code class="code">MasterUserPassword</code></p>
                                 </td>
                                 
                              </tr>
                              
                           </tbody></table>
                        </div>
                     </div>
                       
                     
                     
                     <h2 id="dynamic-references-secretsmanager">Secrets Manager Secrets</h2>
                     
                     <p>Use the <code class="code">secretsmanager</code> dynamic reference to retrieve entire secrets
                        or secret values that are stored in AWS Secrets Manager for use in your templates.
                        <em>Secrets</em> can be database credentials, passwords, third-party
                        API keys, and even arbitrary text. Using Secrets Manager, you can store and control
                        access to
                        these secrets centrally. Secrets Manager enables you to replace hardcoded
                        credentials in your code (including passwords), with an API call to Secrets Manager
                        to retrieve the secret programmatically. For more information, see see <a href="./secretsmanager/latest/userguide/intro.html">What Is AWS Secrets Manager?</a> in the
                        <em>AWS Secrets Manager User Guide</em>.
                     </p>
                     
                     <p>To specify a secret stored in Secrets Manager, you must have access to
                        call <code class="code"><a href="./secretsmanager/latest/apireference/GetSecretValue.html">GetSecretValue</a></code> for the specified secret. 
                     </p>
                     
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>The <code class="code">secretsmanager</code> dynamic reference can be used in all resource
                           properties. Using the <code class="code">secretsmanager</code> dynamic reference guarantees that
                           neither Secrets Manager nor CloudFormation logs or persists any resolved secret value.
                           However, the secret value may show up in the service whose resource it is being used
                           in. You should review your usage to avoid leaking secret data.
                        </p>
                     </div>
                     
                     <p>Dynamic references for secure values, such as <code class="code">secretsmanager</code>, are not
                        currently supported in <a href="template-custom-resources.html">custom
                           resources</a>.
                     </p>
                     
                     
                     <h3 id="dynamic-references-secretsmanager-pattern">Reference Pattern</h3>
                     
                     <p>For Secrets Manager secrets, the <code class="code">reference-key</code> segment is composed of
                        several segments, including the secret id, secret value key, version stage, and
                        version id. Use the following pattern:
                     </p>
                     
                     <p><code class="code">{{resolve:secretsmanager:<em class="replaceable"><code>secret-id</code></em>:<em class="replaceable"><code>secret-string</code></em>:<em class="replaceable"><code>json-key</code></em>:<em class="replaceable"><code>version-stage</code></em>:<em class="replaceable"><code>version-id</code></em>}}</code></p>
                     
                     <div class="variablelist">
                        
                        
                        
                        
                        
                        
                        <dl>
                           
                           <dt><span class="term"><b>secret-id</b></span></dt>
                           
                           <dd>
                              
                              <p>The name or Amazon Resource Name (ARN) that serves as a unique
                                 identifier for the secret. 
                              </p>
                              
                              <p>To access a secret in your AWS account, you need only specify the secret name. To
                                 access a secret in a different AWS account, specify the complete ARN of the secret.
                              </p>
                              
                              <p>Required. </p>
                              
                           </dd>
                           
                           
                           <dt><span class="term"><b>secret-string</b></span></dt>
                           
                           <dd>
                              
                              <p>Currently, the only supported value is <code class="code">SecretString</code>.
                                 The default is <code class="code">SecretString</code>.
                              </p>
                              
                           </dd>
                           
                           
                           <dt><span class="term"><b>json-key</b></span></dt>
                           
                           <dd>
                              
                              <p>Specifies the key name of the key-value pair whose value you want to retrieve. If
                                 you do not specify a <code class="code">json-key</code>, CloudFormation retrieves the entire secret text.
                              </p>
                              
                              <p>This segment may not include the colon character ( <code class="code">:</code> ).
                              </p>
                              
                           </dd>
                           
                           
                           <dt><span class="term"><b>version-stage</b></span></dt>
                           
                           <dd>
                              
                              <p>Specifies the secret version that you want to retrieve by the staging label attached
                                 to the version. Staging labels are used to keep track of different versions during
                                 the rotation process. If you use <code class="code">version-stage</code> then don&apos;t specify <code class="code">version-id</code>. If you don&apos;t specify either a version stage or a version ID, then the default is
                                 to retrieve the version with the version stage value of <code class="code">AWSCURRENT</code>.
                              </p>
                              
                              <p>This segment may not include the colon character ( <code class="code">:</code> ).
                              </p>
                              
                           </dd>
                           
                           
                           <dt><span class="term"><b>version-id</b></span></dt>
                           
                           <dd>
                              
                              <p>Specifies the unique identifier of the version of the secret that you want to use
                                 in stack operations. If you specify <code class="code">version-id</code>, then don&apos;t specify <code class="code">version-stage</code>. If you don&apos;t specify either a version stage or a version ID, then the default is
                                 to retrieve the version with the version stage value of <code class="code">AWSCURRENT</code>.
                              </p>
                              
                              <p>This segment may not include the colon character ( <code class="code">:</code> ).
                              </p>
                              
                           </dd>
                           
                        </dl>
                     </div>
                     
                     
                     
                     
                     <h3 id="dynamic-references-secretsmanager-example">Examples</h3>
                     
                     
                     <p>The following example uses the <code class="code">secret-name</code> and
                        <code class="code">json-key</code> segments to retrieve the username and password values
                        stored in the MyRDSSecret secret. By default, the secret version retrieved is
                        the version with the version stage value of <code class="code">AWSCURRENT</code>. 
                     </p>
                     
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h4 id="dynamic-references-secretsmanager-example.json">JSON</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">{
    &quot;MyRDSInstance&quot;: {
        &quot;Type&quot;: &quot;AWS::RDS::DBInstance&quot;,
        &quot;Properties&quot;: {
            &quot;DBName&quot;: &quot;MyRDSInstance&quot;,
            &quot;AllocatedStorage&quot;: &quot;20&quot;,
            &quot;DBInstanceClass&quot;: &quot;db.t2.micro&quot;,
            &quot;Engine&quot;: &quot;mysql&quot;,
            &quot;MasterUsername&quot;: &quot;{{resolve:secretsmanager:MyRDSSecret:SecretString:username}}&quot;,
            &quot;MasterUserPassword&quot;: &quot;{{resolve:secretsmanager:MyRDSSecret:SecretString:password}}&quot;
        }
    }
}</code></pre>
                        </div>
                     
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h4 id="dynamic-references-secretsmanager-example.yaml">YAML</h4>
                        <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight ">  MyRDSInstance:
    Type: &apos;AWS::RDS::DBInstance&apos;
    Properties:
      DBName: MyRDSInstance
      AllocatedStorage: &apos;20&apos;
      DBInstanceClass: db.t2.micro
      Engine: mysql
      MasterUsername: &apos;{{resolve:secretsmanager:MyRDSSecret:SecretString:username}}&apos;
      MasterUserPassword: &apos;{{resolve:secretsmanager:MyRDSSecret:SecretString:password}}&apos;</code></pre>
                        </div>
                     
                     
                     <p>Specifying the following segments would retrieve the entire SecretString field
                        for the version of the MySecret secret with the version stage value of
                        <code class="code">AWSCURRENT</code>.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">&#xA0; <code class="code" copy="true">&apos;{{resolve:secretsmanager:MySecret}}&apos;</code> or <code class="code" copy="true">&apos;{{resolve:secretsmanager:MySecret::::}}&apos;</code></code></pre> 
                     
                     <p>Specifying the following segments would retrieve the <code class="code">password</code>
                        value for the version of the MySecret SecretString with the version stage value
                        of <code class="code">AWSCURRENT</code>.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">&#xA0; <code class="code" copy="true">&apos;{{resolve:secretsmanager:MySecret:SecretString:password}}&apos;</code></code></pre> 
                     
                     <p>Specifying the following segments would retrieve the <code class="code">password</code>
                        value for the version of the MySecret secret with the version ID of
                        <code class="code">EXAMPLE1-90ab-cdef-fedc-ba987EXAMPLE</code>.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">&#xA0; <code class="code" copy="true">&apos;{{resolve:secretsmanager:MySecret:SecretString:password:SecretString:EXAMPLE1-90ab-cdef-fedc-ba987EXAMPLE}}&apos;</code></code></pre> 
                     
                     <p>Specifying the following segments would retrieve the entire SecretString for
                        the version of the MySecret secret with the version stage value of
                        <code class="code">AWSCURRENT</code> from another AWS account. Note that you must specify
                        the complete secret ARN to access secrets in another AWS account.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">&#xA0; <code class="code" copy="true">&apos;{{resolve:secretsmanager:arn:aws:secretsmanager:us-west-2:123456789012:secret:MySecret-asd123}}&apos;</code></code></pre> 
                     
                     <p>Specifying the following segments would retrieve the <code class="code">password</code>
                        value for the version of the MySecret secret with the version stage value of
                        <code class="code">AWSCURRENT</code> from another AWS account. Note that you must specify
                        the complete secret ARN to access secrets in another AWS account.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">&#xA0; <code class="code" copy="true">&apos;{{resolve:secretsmanager:arn:aws:secretsmanager:us-west-2:123456789012:secret:MySecret-asd123:SecretString:password}}&apos;</code></code></pre> 
                     
                     <p>Specifying the following segments would retrieve the the <code class="code">password</code>
                        value for the version of the MySecret secret with the version stage value of
                        <code class="code">AWSPENDING</code> from another AWS account. Note that you must specify
                        the complete secret ARN to access secrets in another AWS account.
                     </p>
                     <pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="nohighlight">&#xA0; <code class="code" copy="true">&apos;{{resolve:secretsmanager:arn:aws:secretsmanager:us-west-2:123456789012:secret:MySecretName-asd123:SecretString:password:AWSPENDING}}&apos;</code></code></pre> 
                     
                                 
                     
                     <div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div>
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                       browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be
                                    enabled. Please refer to your browser's Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="parameters-section-structure.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="mappings-section-structure.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2019, Amazon Web Services, Inc. or its affiliates. All rights
                        reserved.
                     </div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Specifying Dynamic References in Stack Templates"><a class="pagetoc" href="#dynamic-references-pattern">Specifying Dynamic References in Stack Templates</a></li>
                        <li class="pagetoc" name="SSM Parameters"><a class="pagetoc" href="#dynamic-references-ssm">SSM Parameters</a></li>
                        <li class="pagetoc" name="SSM Secure String
                    Parameters"><a class="pagetoc" href="#dynamic-references-ssm-secure-strings">SSM Secure String
                              Parameters</a></li>
                        <li class="pagetoc" name="Secrets Manager Secrets"><a class="pagetoc" href="#dynamic-references-secretsmanager">Secrets Manager Secrets</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="cookie-notice">
         <div class="cookie-notice-text">We use cookies to provide and improve our services. By using
            our site, you consent to cookies. <a href="http://aws.amazon.com/legal/cookies">Learn more</a></div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS CloudFormation';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>