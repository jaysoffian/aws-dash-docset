<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>AWS::ECS::TaskDefinition - AWS CloudFormation</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="AWS_ECS.html" title="ECS Resource Type Reference">
      <link rel="prev" href="aws-properties-ecs-service-serviceregistry.html" title="AWS::ECS::Service ServiceRegistry">
      <link rel="next" href="aws-properties-ecs-taskdefinition-containerdefinitions.html" title="AWS::ECS::TaskDefinition ContainerDefinition">
      <meta name="description" content="The AWS::ECS::TaskDefinition resource describes the container and volume definitions of an Amazon Elastic Container Service (Amazon ECS) task. You can specify which Docker images to use, the required resources, and other configurations related to launching the task definition through an Amazon ECS service or task.">
      <meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation Designer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS CloudFormation">
      <meta name="guide" content="User Guide">
      <meta name="guide-locale" content="en_us">
      <meta name="tocs" content="toc-contents.json;toc-AWS_ECS.json">
      <meta name="marketingLocale" content="en_US">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ecs-taskdefinition.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20181221"></script><link rel="stylesheet" type="text/css" href="../../../css/marketing-target.css"><script type="text/javascript" src="/assets/marketing/js/marketing-target.js"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="/index.html">AWS Documentation</a> &#xBB; <a href="/cloudformation/index.html">AWS CloudFormation</a> &#xBB; <a href="index.html">User Guide</a> &#xBB; <a href="AWS_ECS.html">ECS Resource Type Reference</a> &#xBB; <span class="breadcrumb">AWS::ECS::TaskDefinition</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div id="language-notice">
                        <div class="language-notice-text"></div>
                     </div>
                     <div></div>
                     <div id="language-filter" class="page-header" style="display:none">
                        <form> Filter View: 
                           <select name="filter-select" id="filter-select">
                              <option selected="1">All</option>
                              <option value="JSON" selected>JSON</option>
                              <option value="YAML" selected>YAML</option></select></form>
                     </div>
                     <h1 class="topictitle" id="aws-resource-ecs-taskdefinition">AWS::ECS::TaskDefinition</h1>
                     <p>The <code class="code">AWS::ECS::TaskDefinition</code> resource describes the container and volume
                        definitions of an Amazon Elastic Container Service (Amazon ECS) task. You can specify
                        which Docker images to use, the required resources, and other configurations related
                        to
                        launching the task definition through an Amazon ECS service or task.
                     </p>
                     <h2 id="aws-resource-ecs-taskdefinition-syntax">Syntax</h2>
                     <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-ecs-taskdefinition-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Type&quot; : &quot;AWS::ECS::TaskDefinition&quot;,
  &quot;Properties&quot; : {
      &quot;<a href="#cfn-ecs-taskdefinition-containerdefinitions">ContainerDefinitions</a>&quot; : <em class="replaceable"><code>[ <a href="aws-properties-ecs-taskdefinition-containerdefinitions.html">ContainerDefinition</a>, ... ]</code></em>,
      &quot;<a href="#cfn-ecs-taskdefinition-cpu">Cpu</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ecs-taskdefinition-executionrolearn">ExecutionRoleArn</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ecs-taskdefinition-family">Family</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ecs-taskdefinition-memory">Memory</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ecs-taskdefinition-networkmode">NetworkMode</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ecs-taskdefinition-placementconstraints">PlacementConstraints</a>&quot; : <em class="replaceable"><code>[ <a href="aws-properties-ecs-taskdefinition-taskdefinitionplacementconstraint.html">TaskDefinitionPlacementConstraint</a>, ... ]</code></em>,
      &quot;<a href="#cfn-ecs-taskdefinition-proxyconfiguration">ProxyConfiguration</a>&quot; : <em class="replaceable"><code><a href="aws-properties-ecs-taskdefinition-proxyconfiguration.html">ProxyConfiguration</a></code></em>,
      &quot;<a href="#cfn-ecs-taskdefinition-requirescompatibilities">RequiresCompatibilities</a>&quot; : <em class="replaceable"><code>[ String, ... ]</code></em>,
      &quot;<a href="#cfn-ecs-taskdefinition-tags">Tags</a>&quot; : <em class="replaceable"><code>[ <a href="./AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html">Tag</a>, ... ]</code></em>,
      &quot;<a href="#cfn-ecs-taskdefinition-taskrolearn">TaskRoleArn</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ecs-taskdefinition-volumes">Volumes</a>&quot; : <em class="replaceable"><code>[ <a href="aws-properties-ecs-taskdefinition-volumes.html">Volume</a>, ... ]</code></em>
    }
}
</code></pre></div>
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-ecs-taskdefinition-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">Type: AWS::ECS::TaskDefinition
Properties: 
  <a href="#cfn-ecs-taskdefinition-containerdefinitions">ContainerDefinitions</a>: <em class="replaceable"><code>
    - <a href="aws-properties-ecs-taskdefinition-containerdefinitions.html">ContainerDefinition</a></code></em>
  <a href="#cfn-ecs-taskdefinition-cpu">Cpu</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ecs-taskdefinition-executionrolearn">ExecutionRoleArn</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ecs-taskdefinition-family">Family</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ecs-taskdefinition-memory">Memory</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ecs-taskdefinition-networkmode">NetworkMode</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ecs-taskdefinition-placementconstraints">PlacementConstraints</a>: <em class="replaceable"><code>
    - <a href="aws-properties-ecs-taskdefinition-taskdefinitionplacementconstraint.html">TaskDefinitionPlacementConstraint</a></code></em>
  <a href="#cfn-ecs-taskdefinition-proxyconfiguration">ProxyConfiguration</a>: <em class="replaceable"><code>
    <a href="aws-properties-ecs-taskdefinition-proxyconfiguration.html">ProxyConfiguration</a></code></em>
  <a href="#cfn-ecs-taskdefinition-requirescompatibilities">RequiresCompatibilities</a>: <em class="replaceable"><code>
    - String</code></em>
  <a href="#cfn-ecs-taskdefinition-tags">Tags</a>: <em class="replaceable"><code>
    - <a href="./AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html">Tag</a></code></em>
  <a href="#cfn-ecs-taskdefinition-taskrolearn">TaskRoleArn</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ecs-taskdefinition-volumes">Volumes</a>: <em class="replaceable"><code>
    - <a href="aws-properties-ecs-taskdefinition-volumes.html">Volume</a></code></em>
</code></pre></div>
                     <h2 id="aws-resource-ecs-taskdefinition-properties">Properties</h2>
                     <div class="variablelist">
                        <dl>
                           <dt><a id="cfn-ecs-taskdefinition-containerdefinitions"></a><span class="term"><code class="code">ContainerDefinitions</code></span></dt>
                           <dd>
                              
                              <p>A list of container definitions in JSON format that describe the different containers
                                 that make up your task. For more information about container definition parameters
                                 and
                                 defaults, see <a href="./AmazonECS/latest/developerguide/task_defintions.html">Amazon ECS Task
                                    Definitions</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: List of <a href="aws-properties-ecs-taskdefinition-containerdefinitions.html">ContainerDefinition</a></p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ecs-taskdefinition-cpu"></a><span class="term"><code class="code">Cpu</code></span></dt>
                           <dd>
                              
                              <p>The number of <code class="code">cpu</code> units used by the task. If you are using the EC2 launch
                                 type, this field is optional and any value can be used. If you are using the Fargate
                                 launch type, this field is required and you must use one of the following values,
                                 which
                                 determines your range of valid values for the <code class="code">memory</code> parameter:
                              </p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       
                                       <p>256 (.25 vCPU) - Available <code class="code">memory</code> values: 512 (0.5 GB), 1024 (1 GB), 2048 (2 GB)
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>512 (.5 vCPU) - Available <code class="code">memory</code> values: 1024 (1 GB), 2048 (2 GB), 3072 (3 GB), 4096 (4 GB)
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>1024 (1 vCPU) - Available <code class="code">memory</code> values: 2048 (2 GB), 3072 (3 GB), 4096 (4 GB), 5120 (5 GB), 6144 (6 GB), 7168 (7
                                          GB), 8192 (8 GB)
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>2048 (2 vCPU) - Available <code class="code">memory</code> values: Between 4096 (4 GB) and 16384 (16 GB) in increments of 1024 (1 GB)
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>4096 (4 vCPU) - Available <code class="code">memory</code> values: Between 8192 (8 GB) and 30720 (30 GB) in increments of 1024 (1 GB)
                                       </p>
                                       
                                    </li>
                                 </ul>
                              </div> 
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ecs-taskdefinition-executionrolearn"></a><span class="term"><code class="code">ExecutionRoleArn</code></span></dt>
                           <dd>
                              
                              <p>The Amazon Resource Name (ARN) of the task execution role that containers in this
                                 task can assume. All
                                 containers in this task are granted the permissions that are specified in this
                                 role.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ecs-taskdefinition-family"></a><span class="term"><code class="code">Family</code></span></dt>
                           <dd>
                              
                              <p>The name of a family that this task definition is registered to. A family groups
                                 multiple versions of a task definition. Amazon ECS gives the first task definition
                                 that
                                 you registered to a family a revision number of 1. Amazon ECS gives sequential revision
                                 numbers to each task definition that you add.
                              </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>To use revision numbers when you update a task definition, specify this property.
                                    If you don&apos;t specify a value, AWS CloudFormation generates a new task definition
                                    each time that you update it.
                                 </p>
                              </div>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ecs-taskdefinition-memory"></a><span class="term"><code class="code">Memory</code></span></dt>
                           <dd>
                              
                              <p>The amount (in MiB) of memory used by the task. If using the EC2 launch
                                 type, this field is optional and any value can be used. If using the
                                 Fargate launch type, this field is required and you must use one of the
                                 following values, which determines your range of valid values for the <code class="code">cpu</code>
                                 parameter:
                              </p> 
                              
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       
                                       <p>512 (0.5 GB), 1024 (1 GB), 2048 (2 GB) - Available <code class="code">cpu</code> values: 256 (.25 vCPU)
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>1024 (1 GB), 2048 (2 GB), 3072 (3 GB), 4096 (4 GB) - Available <code class="code">cpu</code> values: 512 (.5 vCPU)
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>2048 (2 GB), 3072 (3 GB), 4096 (4 GB), 5120 (5 GB), 6144 (6 GB), 7168 (7 GB), 8192
                                          (8 GB) - Available <code class="code">cpu</code> values: 1024 (1 vCPU)
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>Between 4096 (4 GB) and 16384 (16 GB) in increments of 1024 (1 GB) - Available <code class="code">cpu</code> values: 2048 (2 vCPU)
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>Between 8192 (8 GB) and 30720 (30 GB) in increments of 1024 (1 GB) - Available <code class="code">cpu</code> values: 4096 (4 vCPU)
                                       </p>
                                       
                                    </li>
                                 </ul>
                              </div> 
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ecs-taskdefinition-networkmode"></a><span class="term"><code class="code">NetworkMode</code></span></dt>
                           <dd>
                              
                              <p>The Docker networking mode to use for the containers in the task. The valid values
                                 are
                                 <code class="code">none</code>, <code class="code">bridge</code>, <code class="code">awsvpc</code>, and <code class="code">host</code>.
                                 The default Docker network mode is <code class="code">bridge</code>. If you are using the Fargate
                                 launch type, the <code class="code">awsvpc</code> network mode is required. If you are using the EC2
                                 launch type, any network mode can be used. If the network mode is set to
                                 <code class="code">none</code>, you cannot specify port mappings in your container definitions,
                                 and the tasks containers do not have external connectivity. The <code class="code">host</code> and
                                 <code class="code">awsvpc</code> network modes offer the highest networking performance for
                                 containers because they use the EC2 network stack instead of the virtualized network
                                 stack provided by the <code class="code">bridge</code> mode.
                              </p>
                              
                              <p>With the <code class="code">host</code> and <code class="code">awsvpc</code> network modes, exposed container
                                 ports are mapped directly to the corresponding host port (for the <code class="code">host</code>
                                 network mode) or the attached elastic network interface port (for the
                                 <code class="code">awsvpc</code> network mode), so you cannot take advantage of dynamic host port
                                 mappings. 
                              </p>
                              
                              <p>If the network mode is <code class="code">awsvpc</code>, the task is allocated an elastic network
                                 interface, and you must specify a <a href="./AmazonECS/latest/APIReference/API_NetworkConfiguration.html">NetworkConfiguration</a> value when you create a service or run a task with the
                                 task definition. For more information, see <a href="./AmazonECS/latest/developerguide/task-networking.html">Task Networking</a>
                                 in the <em>Amazon Elastic Container Service Developer Guide</em>.
                              </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Note</p>
                                 <p>Currently, only Amazon ECS-optimized AMIs, other Amazon Linux variants with the
                                    <code class="code">ecs-init</code> package, or AWS Fargate infrastructure support the
                                    <code class="code">awsvpc</code> network mode. 
                                 </p>
                              </div>
                              
                              <p>If the network mode is <code class="code">host</code>, you cannot run multiple instantiations of
                                 the same task on a single container instance when port mappings are used.
                              </p>
                              
                              <p>Docker for Windows uses different network modes than Docker for Linux. When you
                                 register a task definition with Windows containers, you must not specify a network
                                 mode.
                                 If you use the console to register a task definition with Windows containers, you
                                 must
                                 choose the <code class="code">&lt;default&gt;</code> network mode object. 
                              </p>
                              
                              <p>For more information, see
                                 <a href="https://docs.docker.com/engine/reference/run/#network-settings" target="_blank">Network settings</a>
                                 in the <em>Docker run reference</em>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Allowed Values</em>: <code class="code">awsvpc | bridge | host | none</code></p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ecs-taskdefinition-placementconstraints"></a><span class="term"><code class="code">PlacementConstraints</code></span></dt>
                           <dd>
                              
                              <p>An array of placement constraint objects to use for tasks. This field is not valid
                                 if
                                 you are using the Fargate launch type for your task.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: List of <a href="aws-properties-ecs-taskdefinition-taskdefinitionplacementconstraint.html">TaskDefinitionPlacementConstraint</a></p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ecs-taskdefinition-proxyconfiguration"></a><span class="term"><code class="code">ProxyConfiguration</code></span></dt>
                           <dd>
                              
                              <p>The <code class="code">ProxyConfiguration</code> property specifies the configuration details for
                                 the App Mesh proxy.
                              </p>
                              
                              <p>Your Amazon ECS container instances require at least version 1.26.0 of the container
                                 agent and at least version 1.26.0-1 of the <code class="code">ecs-init</code> package to enable a
                                 proxy configuration. If your container instances are launched from the Amazon
                                 ECS-optimized AMI version <code class="code">20190301</code> or later, then they contain the required
                                 versions of the container agent and <code class="code">ecs-init</code>. For more information, see
                                 <a href="./AmazonECS/latest/developerguide/ecs-optimized_AMI.html">Amazon ECS-optimized
                                    Linux AMI</a> in the <em>Amazon Elastic Container Service Developer
                                    Guide</em>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: <a href="aws-properties-ecs-taskdefinition-proxyconfiguration.html">ProxyConfiguration</a></p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ecs-taskdefinition-requirescompatibilities"></a><span class="term"><code class="code">RequiresCompatibilities</code></span></dt>
                           <dd>
                              
                              <p>The launch type the task requires. If no value is specified, it will default to
                                 <code class="code">EC2</code>. Valid values include <code class="code">EC2</code> and
                                 <code class="code">FARGATE</code>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: List of String
                              </p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ecs-taskdefinition-tags"></a><span class="term"><code class="code">Tags</code></span></dt>
                           <dd>
                              
                              <p>The metadata that you apply to the task definition to help you categorize and organize
                                 them. Each tag consists of a key and an optional value, both of which you define.
                                 Tag keys can have a maximum character length of 128 characters, and tag values can
                                 have
                                 a maximum length of 256 characters.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: List of <a href="./AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html">Tag</a></p>
                              <p><em>Maximum</em>: <code class="code">50</code></p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-ecs-taskdefinition-taskrolearn"></a><span class="term"><code class="code">TaskRoleArn</code></span></dt>
                           <dd>
                              
                              <p>The Amazon Resource Name (ARN) of an AWS Identity and Access Management (IAM) role
                                 that grants containers in the task permission to
                                 call AWS APIs on your behalf. For more information, see <a href="./AmazonECS/latest/developerguide/task_IAM_role.html">Amazon ECS Task Role</a> in
                                 the <em>Amazon Elastic Container Service Developer Guide</em>.
                              </p>
                              
                              <p>IAM roles for tasks on Windows require that the <code class="code">-EnableTaskIAMRole</code> option
                                 is set when you launch the Amazon ECS-optimized Windows AMI. Your containers must
                                 also run some
                                 configuration code in order to take advantage of the feature. For more information,
                                 see
                                 <a href="./AmazonECS/latest/developerguide/windows_task_IAM_roles.html">Windows IAM Roles
                                    for Tasks</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ecs-taskdefinition-volumes"></a><span class="term"><code class="code">Volumes</code></span></dt>
                           <dd>
                              
                              <p>The list of volume definitions for the task.</p>
                              
                              <p>If your tasks are using the Fargate launch type, the <code class="code">host</code>
                                 and <code class="code">sourcePath</code> parameters are not supported.
                              </p>
                              
                              <p>For more information about volume definition parameters and defaults, see <a href="./AmazonECS/latest/developerguide/task_definitions.html">Amazon ECS Task Definitions</a> in the <em>Amazon Elastic Container Service Developer Guide</em>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: List of <a href="aws-properties-ecs-taskdefinition-volumes.html">Volume</a></p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                        </dl>
                     </div>
                     <h2 id="aws-resource-ecs-taskdefinition-return-values">Return Values</h2>
                     <h3 id="aws-resource-ecs-taskdefinition-return-values-ref">Ref</h3>
                     <p>
                        When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the Amazon Resource Name (ARN).
                     </p>
                     <p>In the following example, the <code class="code">Ref</code> function returns the ARN of the
                        <code class="code">MyTaskDefinition</code> task definition, such as
                        <code class="code">arn:aws:ecs:us-west-2:123456789012:task-definition/TaskDefinitionFamily:1</code>.
                     </p>
                     <p>
                        <code class="code">{ &quot;Ref&quot;: &quot;MyTaskDefinition&quot; }</code>
                        
                     </p>
                     <p>For more information about using the <code class="code">Ref</code> function, see <a href="./AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-ref.html">Ref</a>.
                     </p>
                     <h2 id="aws-resource-ecs-taskdefinition--examples">Examples</h2>
                     <h3 id="aws-resource-ecs-taskdefinition--examples--Creating_an_Amazon_ECS_task_definition">Creating an Amazon ECS task definition</h3>
                     <p>The following example defines an Amazon ECS task definition, which includes
                        two container definitions and one volume definition.
                     </p>
                     <h4 id="aws-resource-ecs-taskdefinition--examples--Creating_an_Amazon_ECS_task_definition--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">&quot;taskdefinition&quot;: {
  &quot;Type&quot;: &quot;AWS::ECS::TaskDefinition&quot;,
  &quot;Properties&quot; : {
    &quot;ContainerDefinitions&quot; : [
    {
      &quot;Name&quot;: {&quot;Ref&quot;: &quot;AppName&quot;},
      &quot;MountPoints&quot;: [
        {
          &quot;SourceVolume&quot;: &quot;my-vol&quot;,
          &quot;ContainerPath&quot;: &quot;/var/www/my-vol&quot;
        }
      ],
      &quot;Image&quot;:&quot;amazon/amazon-ecs-sample&quot;,
      &quot;Cpu&quot;: &quot;10&quot;,
      &quot;PortMappings&quot;:[
        {
          &quot;ContainerPort&quot;: {&quot;Ref&quot;:&quot;AppContainerPort&quot;},
          &quot;HostPort&quot;: {&quot;Ref&quot;:&quot;AppHostPort&quot;}
        }
      ],
      &quot;EntryPoint&quot;: [
        &quot;/usr/sbin/apache2&quot;,
        &quot;-D&quot;,
        &quot;FOREGROUND&quot;
      ],
      &quot;Memory&quot;:&quot;500&quot;,
      &quot;Essential&quot;: &quot;true&quot;
    },
    {
      &quot;Name&quot;: &quot;busybox&quot;,
      &quot;Image&quot;: &quot;busybox&quot;,
      &quot;Cpu&quot;: &quot;10&quot;,
      &quot;EntryPoint&quot;: [
        &quot;sh&quot;,
        &quot;-c&quot;
      ],
      &quot;Memory&quot;: &quot;500&quot;,
      &quot;Command&quot;: [
        &quot;/bin/sh -c \&quot;while true; do /bin/date &gt; /var/www/my-vol/date; sleep 1; done\&quot;&quot;
      ],
      &quot;Essential&quot; : &quot;false&quot;,
      &quot;VolumesFrom&quot;: [
        {
          &quot;SourceContainer&quot;: {&quot;Ref&quot;:&quot;AppName&quot;}
        }
      ]
    }],
    &quot;Volumes&quot;: [
    {
      &quot;Host&quot;: {
        &quot;SourcePath&quot;: &quot;/var/lib/docker/vfs/dir/&quot;
      },
      &quot;Name&quot;: &quot;my-vol&quot;
    }]
  }
}</code></pre><h4 id="aws-resource-ecs-taskdefinition--examples--Creating_an_Amazon_ECS_task_definition--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">taskdefinition: 
  Type: AWS::ECS::TaskDefinition
  Properties: 
    ContainerDefinitions: 
      - 
        Name: 
          Ref: &quot;AppName&quot;
        MountPoints: 
          - 
            SourceVolume: &quot;my-vol&quot;
            ContainerPath: &quot;/var/www/my-vol&quot;
        Image: &quot;amazon/amazon-ecs-sample&quot;
        Cpu: &quot;10&quot;
        PortMappings: 
          - 
            ContainerPort: 
              Ref: &quot;AppContainerPort&quot;
            HostPort: 
              Ref: &quot;AppHostPort&quot;
        EntryPoint: 
          - &quot;/usr/sbin/apache2&quot;
          - &quot;-D&quot;
          - &quot;FOREGROUND&quot;
        Memory: &quot;500&quot;
        Essential: &quot;true&quot;
      - 
        Name: &quot;busybox&quot;
        Image: &quot;busybox&quot;
        Cpu: &quot;10&quot;
        EntryPoint: 
          - &quot;sh&quot;
          - &quot;-c&quot;
        Memory: &quot;500&quot;
        Command: 
          - &quot;/bin/sh -c \&quot;while true; do /bin/date &gt; /var/www/my-vol/date; sleep 1; done\&quot;&quot;
        Essential: &quot;false&quot;
        VolumesFrom: 
          - 
            SourceContainer: 
              Ref: &quot;AppName&quot;
    Volumes: 
      - 
        Host: 
          SourcePath: &quot;/var/lib/docker/vfs/dir/&quot;
        Name: &quot;my-vol&quot;</code></pre><h3 id="aws-resource-ecs-taskdefinition--examples--Creating_an_Amazon_ECS_task_definition">Creating an Amazon ECS task definition</h3>
                     <p>The following example defines an Amazon ECS task definition that specifies EC2
                        and FARGATE as required compatibilities.
                     </p>
                     <h4 id="aws-resource-ecs-taskdefinition--examples--Creating_an_Amazon_ECS_task_definition--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;AWSTemplateFormatVersion&quot;: &quot;2010-09-09&quot;,
  &quot;Resources&quot;: {
    &quot;taskdefinition&quot;: {
      &quot;Type&quot;: &quot;AWS::ECS::TaskDefinition&quot;,
      &quot;Properties&quot;: {
        &quot;RequiresCompatibilities&quot;: [
          &quot;EC2&quot;,
          &quot;FARGATE&quot;
        ],
        &quot;ContainerDefinitions&quot;: [
          {
            &quot;Name&quot;: &quot;my-app&quot;,
            &quot;MountPoints&quot;: [
              {
                &quot;SourceVolume&quot;: &quot;my-vol&quot;,
                &quot;ContainerPath&quot;: &quot;/var/www/my-vol&quot;
              }
            ],
            &quot;Image&quot;: &quot;amazon/amazon-ecs-sample&quot;,
            &quot;Cpu&quot;: &quot;10&quot;,
            &quot;EntryPoint&quot;: [
              &quot;/usr/sbin/apache2&quot;,
              &quot;-D&quot;,
              &quot;FOREGROUND&quot;
            ],
            &quot;Memory&quot;: &quot;500&quot;,
            &quot;Essential&quot;: &quot;true&quot;
          },
          {
            &quot;Name&quot;: &quot;busybox&quot;,
            &quot;Image&quot;: &quot;busybox&quot;,
            &quot;Cpu&quot;: &quot;10&quot;,
            &quot;EntryPoint&quot;: [
              &quot;sh&quot;,
              &quot;-c&quot;
            ],
            &quot;Memory&quot;: &quot;500&quot;,
            &quot;Command&quot;: [
              &quot;/bin/sh -c \&quot;while true; do /bin/date &gt; /var/www/my-vol/date; sleep 1; done\&quot;&quot;
            ],
            &quot;Essential&quot;: &quot;false&quot;,
            &quot;VolumesFrom&quot;: [
              {
                &quot;SourceContainer&quot;: &quot;my-app&quot;
              }
            ]
          }
        ],
        &quot;Volumes&quot;: [
          {
            &quot;Host&quot;: {
              &quot;SourcePath&quot;: &quot;/var/lib/docker/vfs/dir/&quot;
            },
            &quot;Name&quot;: &quot;my-vol&quot;
          }
        ]
      }
    }
  }
}</code></pre><h4 id="aws-resource-ecs-taskdefinition--examples--Creating_an_Amazon_ECS_task_definition--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">AWSTemplateFormatVersion: 2010-09-09
Resources:
  taskdefinition: 
    Type: AWS::ECS::TaskDefinition
    Properties: 
      RequiresCompatibilities:
        - &quot;EC2&quot;
        - &quot;FARGATE&quot;
      ContainerDefinitions: 
        - 
          Name: &quot;my-app&quot;
          MountPoints: 
            - 
              SourceVolume: &quot;my-vol&quot;
              ContainerPath: &quot;/var/www/my-vol&quot;
          Image: &quot;amazon/amazon-ecs-sample&quot;
          Cpu: &quot;10&quot;
          EntryPoint: 
            - &quot;/usr/sbin/apache2&quot;
            - &quot;-D&quot;
            - &quot;FOREGROUND&quot;
          Memory: &quot;500&quot;
          Essential: &quot;true&quot;
        - 
          Name: &quot;busybox&quot;
          Image: &quot;busybox&quot;
          Cpu: &quot;10&quot;
          EntryPoint: 
            - &quot;sh&quot;
            - &quot;-c&quot;
          Memory: &quot;500&quot;
          Command: 
            - &quot;/bin/sh -c \&quot;while true; do /bin/date &gt; /var/www/my-vol/date; sleep 1; done\&quot;&quot;
          Essential: &quot;false&quot;
          VolumesFrom: 
            - 
              SourceContainer: &quot;my-app&quot;
      Volumes: 
        - 
          Host: 
            SourcePath: &quot;/var/lib/docker/vfs/dir/&quot;
          Name: &quot;my-vol&quot;</code></pre><div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div>
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                       browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be
                                    enabled. Please refer to your browser's Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="aws-properties-ecs-service-serviceregistry.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="aws-properties-ecs-taskdefinition-containerdefinitions.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2019, Amazon Web Services, Inc. or its affiliates. All rights
                        reserved.
                     </div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Syntax"><a class="pagetoc" href="#aws-resource-ecs-taskdefinition-syntax">Syntax</a></li>
                        <li class="pagetoc" name="Properties"><a class="pagetoc" href="#aws-resource-ecs-taskdefinition-properties">Properties</a></li>
                        <li class="pagetoc" name="Return Values"><a class="pagetoc" href="#aws-resource-ecs-taskdefinition-return-values">Return Values</a></li>
                        <li class="pagetoc" name="Examples"><a class="pagetoc" href="#aws-resource-ecs-taskdefinition--examples">Examples</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="cookie-notice">
         <div class="cookie-notice-text">We use cookies to provide and improve our services. By using
            our site, you consent to cookies. <a href="http://aws.amazon.com/legal/cookies">Learn more</a></div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS CloudFormation';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>