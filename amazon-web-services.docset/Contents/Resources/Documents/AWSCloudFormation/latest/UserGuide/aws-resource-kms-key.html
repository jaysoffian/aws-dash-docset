<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>AWS::KMS::Key - AWS CloudFormation</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="AWS_KMS.html" title="KMS Resource Type Reference">
      <link rel="prev" href="aws-resource-kms-alias.html" title="AWS::KMS::Alias">
      <meta name="description" content="The AWS::KMS::Key resource specifies a customer master key (CMK) in AWS Key Management Service (AWS KMS). Authorized users can use the CMK to encrypt and decrypt small amounts of data (up to 4096 bytes), but they are more commonly used to generate data keys. You can also use CMKs to encrypt data stored in AWS services that are integrated with AWS KMS or within their applications. For more information, see What is the AWS Key Management Service? in the AWS Key Management Service Developer Guide.">
      <meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation Designer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS CloudFormation">
      <meta name="guide" content="User Guide">
      <meta name="guide-locale" content="en_us">
      <meta name="tocs" content="toc-contents.json;toc-AWS_KMS.json">
      <meta name="marketingLocale" content="en_US">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-kms-key.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20181221"></script><link rel="stylesheet" type="text/css" href="../../../css/marketing-target.css"><script type="text/javascript" src="/assets/marketing/js/marketing-target.js"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="/index.html">AWS Documentation</a> &#xBB; <a href="/cloudformation/index.html">AWS CloudFormation</a> &#xBB; <a href="index.html">User Guide</a> &#xBB; <a href="AWS_KMS.html">KMS Resource Type Reference</a> &#xBB; <span class="breadcrumb">AWS::KMS::Key</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div id="language-notice">
                        <div class="language-notice-text"></div>
                     </div>
                     <div></div>
                     <div id="language-filter" class="page-header" style="display:none">
                        <form> Filter View: 
                           <select name="filter-select" id="filter-select">
                              <option selected="1">All</option>
                              <option value="JSON" selected>JSON</option>
                              <option value="YAML" selected>YAML</option></select></form>
                     </div>
                     <h1 class="topictitle" id="aws-resource-kms-key">AWS::KMS::Key</h1>
                     <p>The <code class="code">AWS::KMS::Key</code> resource specifies a <a href="./kms/latest/developerguide/concepts.html#master_keys">customer master key</a> (CMK) in
                        AWS Key Management Service (AWS KMS). Authorized users can use the CMK to encrypt
                        and decrypt
                        small amounts of data (up to 4096 bytes), but they are more commonly used to generate
                        data
                        keys. You can also use CMKs to encrypt data stored in AWS services that are <a href="http://aws.amazon.com/kms/features/#AWS_Service_Integration" target="_blank">integrated with AWS
                           KMS</a> or within their applications. For more information, see <a href="./kms/latest/developerguide/overview.html">What is the AWS Key
                           Management Service?</a> in the <em>AWS Key Management Service Developer
                           Guide</em>.
                     </p>
                     <h2 id="aws-resource-kms-key-syntax">Syntax</h2>
                     <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-kms-key-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Type&quot; : &quot;AWS::KMS::Key&quot;,
  &quot;Properties&quot; : {
      &quot;<a href="#cfn-kms-key-description">Description</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-kms-key-enablekeyrotation">EnableKeyRotation</a>&quot; : <em class="replaceable"><code>Boolean</code></em>,
      &quot;<a href="#cfn-kms-key-enabled">Enabled</a>&quot; : <em class="replaceable"><code>Boolean</code></em>,
      &quot;<a href="#cfn-kms-key-keypolicy">KeyPolicy</a>&quot; : <em class="replaceable"><code>Json</code></em>,
      &quot;<a href="#cfn-kms-key-keyusage">KeyUsage</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-kms-key-pendingwindowindays">PendingWindowInDays</a>&quot; : <em class="replaceable"><code>Integer</code></em>,
      &quot;<a href="#cfn-kms-key-tags">Tags</a>&quot; : <em class="replaceable"><code>[ <a href="./AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html">Tag</a>, ... ]</code></em>
    }
}
</code></pre></div>
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-kms-key-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">Type: AWS::KMS::Key
Properties: 
  <a href="#cfn-kms-key-description">Description</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-kms-key-enablekeyrotation">EnableKeyRotation</a>: <em class="replaceable"><code>Boolean</code></em>
  <a href="#cfn-kms-key-enabled">Enabled</a>: <em class="replaceable"><code>Boolean</code></em>
  <a href="#cfn-kms-key-keypolicy">KeyPolicy</a>: <em class="replaceable"><code>Json</code></em>
  <a href="#cfn-kms-key-keyusage">KeyUsage</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-kms-key-pendingwindowindays">PendingWindowInDays</a>: <em class="replaceable"><code>Integer</code></em>
  <a href="#cfn-kms-key-tags">Tags</a>: <em class="replaceable"><code>
    - <a href="./AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html">Tag</a></code></em>
</code></pre></div>
                     <h2 id="aws-resource-kms-key-properties">Properties</h2>
                     <div class="variablelist">
                        <dl>
                           <dt><a id="cfn-kms-key-description"></a><span class="term"><code class="code">Description</code></span></dt>
                           <dd>
                              
                              <p>A description of the CMK. Use a description that helps you to distinguish this CMK
                                 from
                                 others in the account, such as its intended use.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Minimum</em>: <code class="code">0</code></p>
                              <p><em>Maximum</em>: <code class="code">8192</code></p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-kms-key-enablekeyrotation"></a><span class="term"><code class="code">EnableKeyRotation</code></span></dt>
                           <dd>
                              
                              
                              <p>Enables automatic rotation of the key material for the specified customer master key
                                 (CMK). By default, automation key rotation is not enabled.
                              </p>
                              
                              <p>When you enable automatic rotation, AWS KMS automatically creates new key material
                                 for the
                                 CMK 365 days after the enable (or reenable) date and every 365 days thereafter. AWS
                                 KMS
                                 retains all key material until you delete the CMK.
                              </p>
                              
                              <p>For detailed information about automatic key rotation, see <a href="./kms/latest/developerguide/rotate-keys.html">Rotating Customer Master Keys</a> in the
                                 <em>AWS Key Management Service Developer Guide</em>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: Boolean
                              </p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-kms-key-enabled"></a><span class="term"><code class="code">Enabled</code></span></dt>
                           <dd>
                              
                              
                              <p>Specifies whether the customer master key (CMK) is enabled. Disabled CMKs cannot be
                                 used
                                 in cryptographic operations.
                              </p>
                              
                              <p>When <code class="code">Enabled</code> is <code class="code">true</code>, the <em>key state</em> of the
                                 CMK is <code class="code">Enabled</code>. When <code class="code">Enabled</code> is <code class="code">false</code>, the key state of
                                 the CMK is <code class="code">Disabled</code>. The default value is <code class="code">true</code>.
                              </p>
                              
                              <p>The actual key state of the CMK might be affected by actions taken outside of
                                 CloudFormation, such as running the <a href="./kms/latest/APIReference/API_EnableKey.html">EnableKey</a>, <a href="./kms/latest/APIReference/API_DisableKey.html">DisableKey</a>, or
                                 <a href="./kms/latest/APIReference/API_ScheduleKeyDeletion.html">ScheduleKeyDeletion</a> operations.
                              </p>
                              
                              <p>For information about the key states of a CMK, see <a href="./kms/latest/developerguide/key-state.html">How Key State Affects Use of a Customer Master
                                    Key</a> in the <em>AWS Key Management Service Developer Guide</em>. 
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: Boolean
                              </p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-kms-key-keypolicy"></a><span class="term"><code class="code">KeyPolicy</code></span></dt>
                           <dd>
                              
                              
                              
                              <p>The key policy that authorizes use of the CMK. The key policy must observe the following
                                 rules.
                              </p>
                              
                              <div class="itemizedlist">
                                 
                                 
                                 
                                 
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       
                                       <p>The key policy must allow the caller to make a subsequent <a href="./kms/latest/APIReference/API_PutKeyPolicy.html">PutKeyPolicy</a> request on the
                                          CMK. This reduces the risk that the CMK becomes unmanageable. For more information,
                                          refer
                                          to the scenario in the <a href="./kms/latest/developerguide/key-policies.html#key-policy-default-allow-root-enable-iam">Default Key Policy</a> section of the <em> 
                                             <em>AWS Key Management Service
                                                Developer Guide</em> 
                                             </em>.
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>Each statement in the key policy must contain one or more principals. The principals
                                          in the key policy must exist and be visible to AWS KMS. When you create a new AWS
                                          principal (for example, an IAM user or role), you might need to enforce a delay before
                                          including the new principal in a key policy because the new principal might not be
                                          immediately visible to AWS KMS. For more information, see <a href="./IAM/latest/UserGuide/troubleshoot_general.html#troubleshoot_general_eventual-consistency">Changes that I make are not always immediately visible</a> in the <em>AWS
                                             Identity and Access Management User Guide</em>.
                                       </p>
                                       
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>The key policy size limit is 32 kilobytes (32768 bytes).</p>
                                       
                                    </li>
                                 </ul>
                              </div>
                              
                              <p>If you are unsure of which policy to use, consider the <em>default key
                                    policy</em>. This is the key policy that AWS KMS applies to CMKs that are created by
                                 using the CreateKey API with no specified key policy. It gives the AWS account that
                                 owns the
                                 key permission to perform all operations on the key. It also allows you write IAM
                                 policies to
                                 authorize access to the key. For details, see <a href="./kms/latest/developerguide/key-policies.html#key-policy-default">Default Key
                                    Policy</a> in the <em>AWS Key Management Service Developer Guide</em>.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: Json
                              </p>
                              <p><em>Minimum</em>: <code class="code">1</code></p>
                              <p><em>Maximum</em>: <code class="code">131072</code></p>
                              <p><em>Pattern</em>: <code class="code">[\u0009\u000A\u000D\u0020-\u00FF]+</code></p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-kms-key-keyusage"></a><span class="term"><code class="code">KeyUsage</code></span></dt>
                           <dd>
                              
                              <p>The cryptographic operations for which you can use the CMK. The only valid value is
                                 <code class="code">ENCRYPT_DECRYPT</code>, which means you can use the CMK to encrypt and decrypt
                                 data.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Allowed Values</em>: <code class="code">ENCRYPT_DECRYPT</code></p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-kms-key-pendingwindowindays"></a><span class="term"><code class="code">PendingWindowInDays</code></span></dt>
                           <dd>
                              
                              
                              
                              <p>Specifies the number of days in the waiting period before AWS KMS deletes a CMK that
                                 has
                                 been removed from a CloudFormation stack. Enter a value between 7 and 30 days. The
                                 default
                                 value is 30 days.
                              </p>
                              
                              <p>When you remove a customer master key (CMK) from a CloudFormation stack, AWS KMS schedules
                                 the CMK for deletion and starts the mandatory waiting period. The
                                 <code class="code">PendingWindowInDays</code> property determines the length of waiting period. During the
                                 waiting period, the key state of CMK is <code class="code">Pending Deletion</code>, which prevents the CMK
                                 from being used in cryptographic operations. When the waiting period expires, AWS
                                 KMS
                                 permanently deletes the CMK.
                              </p>
                              
                              <p> You cannot use a CloudFormation template to cancel deletion of the CMK after you
                                 remove
                                 it from the stack, regardless of the waiting period. If you specify a CMK in your
                                 template,
                                 even one with the same name, CloudFormation creates a new CMK. To cancel deletion
                                 of a CMK,
                                 use the AWS KMS console or the <a href="./kms/latest/APIReference/API_CancelKeyDeletion.html">CancelKeyDeletion</a>
                                 operation.
                              </p>
                              
                              <p>For information about the <code class="code">PendingDeletion</code> key state, see <a href="./kms/latest/developerguide/key-state.html">How Key State Affects Use
                                    of a Customer Master Key</a> in the <em>AWS Key Management Service Developer
                                    Guide</em>. For more information about deleting CMKs, see the <a href="./kms/latest/APIReference/API_ScheduleKeyDeletion.html">ScheduleKeyDeletion</a> operation in the <em>AWS Key Management Service API
                                    Reference</em> and <a href="./kms/latest/developerguide/deleting-keys.html">Deleting Customer Master Keys</a> in
                                 the <em>AWS Key Management Service Developer Guide</em>. 
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: Integer
                              </p>
                              <p><em>Minimum</em>: <code class="code">1</code></p>
                              <p><em>Maximum</em>: <code class="code">365</code></p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-kms-key-tags"></a><span class="term"><code class="code">Tags</code></span></dt>
                           <dd>
                              
                              
                              <p>An array of key-value pairs to apply to this resource.</p>
                              
                              <p>For more information, see <a href="./AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html">Tag</a>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: List of <a href="./AWSCloudFormation/latest/UserGuide/aws-properties-resource-tags.html">Tag</a></p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                        </dl>
                     </div>
                     <h2 id="aws-resource-kms-key-return-values">Return Values</h2>
                     <h3 id="aws-resource-kms-key-return-values-ref">Ref</h3>
                     <p> 
                        When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the key ID, such as
                        <code class="code">1234abcd-12ab-34cd-56ef-1234567890ab</code>.
                     </p>
                     <p>For more information about using the <code class="code">Ref</code> function, see <a href="./AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-ref.html">Ref</a>.
                     </p>
                     <h3 id="aws-resource-kms-key-return-values-fn--getatt">Fn::GetAtt</h3>
                     <p>The <code class="code">Fn::GetAtt</code> intrinsic function returns a value for a specified attribute of this type. The following
                        are the available attributes and sample return values.
                     </p> 
                     
                     <p>For more information about using the <code class="code">Fn::GetAtt</code> intrinsic function, see <a href="./AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-getatt.html">Fn::GetAtt</a>.
                     </p>
                     <h4 id="aws-resource-kms-key-return-values-fn--getatt-fn--getatt"></h4>
                     <div class="variablelist">
                        <dl>
                           <dt><a id="Arn-fn::getatt"></a><span class="term"><code class="code">Arn</code></span></dt>
                           <dd>
                              
                              <p>The Amazon Resource Name (ARN) of the AWS KMS customer master key (CMK), such as
                                 <code class="code">arn:aws:kms:us-west-2:111122223333:key/1234abcd-12ab-34cd-56ef-1234567890ab</code>.
                              </p>
                              
                              <p>For help with finding the ARN of a CMK, see <a href="./kms/latest/developerguide/viewing-keys.html#find-cmk-id-arn">Finding the Key ID and
                                    ARN</a> in the <em>AWS Key Management Service Developer Guide</em>.
                              </p>
                              
                           </dd>
                        </dl>
                     </div>
                     <h2 id="aws-resource-kms-key--examples">Examples</h2>
                     <h3 id="aws-resource-kms-key--examples--Create_a_customer_master_key">Create a customer master key</h3>
                     <p>The following example creates a customer managed CMK. The key policy for the CMK
                        allows <code class="code">Alice</code> to manage the key and allows <code class="code">Bob</code> to view the CMK
                        and use it in cryptographic operations. It also allows the AWS account (root) full
                        access
                        to the key. This prevents you from losing control of the key if both <code class="code">Alice</code>
                        and <code class="code">Bob</code> are deleted from the account.
                     </p>
                     <h4 id="aws-resource-kms-key--examples--Create_a_customer_master_key--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">&quot;myKey&quot; : {
  &quot;Type&quot; : &quot;AWS::KMS::Key&quot;,
  &quot;Properties&quot; : {
    &quot;Description&quot; : &quot;An example CMK&quot;,
    &quot;KeyPolicy&quot; : {
      &quot;Version&quot;: &quot;2012-10-17&quot;,
      &quot;Id&quot;: &quot;key-default-1&quot;,
      &quot;Statement&quot;: [
        {
          &quot;Sid&quot;: &quot;Enable IAM User Permissions&quot;,
          &quot;Effect&quot;: &quot;Allow&quot;,
          &quot;Principal&quot;: {&quot;AWS&quot;: &quot;arn:aws:iam::111122223333:root&quot;},
          &quot;Action&quot;: &quot;kms:*&quot;,
          &quot;Resource&quot;: &quot;*&quot;
        }, 
        {
          &quot;Sid&quot;: &quot;Allow administration of the key&quot;,
          &quot;Effect&quot;: &quot;Allow&quot;,
          &quot;Principal&quot;: { &quot;AWS&quot;: &quot;arn:aws:iam::123456789012:user/Alice&quot; },
          &quot;Action&quot;: [
            &quot;kms:Create*&quot;,
            &quot;kms:Describe*&quot;,
            &quot;kms:Enable*&quot;,
            &quot;kms:List*&quot;,
            &quot;kms:Put*&quot;,
            &quot;kms:Update*&quot;,
            &quot;kms:Revoke*&quot;,
            &quot;kms:Disable*&quot;,
            &quot;kms:Get*&quot;,
            &quot;kms:Delete*&quot;,
            &quot;kms:ScheduleKeyDeletion&quot;,
            &quot;kms:CancelKeyDeletion&quot;
          ],
          &quot;Resource&quot;: &quot;*&quot;
        },
        {
          &quot;Sid&quot;: &quot;Allow use of the key&quot;,
          &quot;Effect&quot;: &quot;Allow&quot;,
          &quot;Principal&quot;: { &quot;AWS&quot;: &quot;arn:aws:iam::123456789012:user/Bob&quot; },
          &quot;Action&quot;: [
            &quot;kms:DescribeKey&quot;,
            &quot;kms:Encrypt&quot;,
            &quot;kms:Decrypt&quot;,
            &quot;kms:ReEncrypt*&quot;,
            &quot;kms:GenerateDataKey&quot;,
            &quot;kms:GenerateDataKeyWithoutPlaintext&quot;
          ], 
          &quot;Resource&quot;: &quot;*&quot;
        }    
      ]
    }
  }
}</code></pre><h4 id="aws-resource-kms-key--examples--Create_a_customer_master_key--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">myKey: 
  Type: AWS::KMS::Key
  Properties: 
    Description: &quot;An example CMK&quot;
    KeyPolicy: 
      Version: &quot;2012-10-17&quot;
      Id: &quot;key-default-1&quot;
      Statement:
       -
          Sid: &quot;Enable IAM User Permissions&quot;
          Effect: &quot;Allow&quot;
          Principal: AWS: &quot;arn:aws:iam::111122223333:root&quot;
          Action: &quot;kms:*&quot;
          Resource: &quot;*&quot;
       - 
          Sid: &quot;Allow administration of the key&quot;
          Effect: &quot;Allow&quot;
          Principal: 
            AWS: &quot;arn:aws:iam::123456789012:user/Alice&quot;
          Action: 
            - &quot;kms:Create*&quot;
            - &quot;kms:Describe*&quot;
            - &quot;kms:Enable*&quot;
            - &quot;kms:List*&quot;
            - &quot;kms:Put*&quot;
            - &quot;kms:Update*&quot;
            - &quot;kms:Revoke*&quot;
            - &quot;kms:Disable*&quot;
            - &quot;kms:Get*&quot;
            - &quot;kms:Delete*&quot;
            - &quot;kms:ScheduleKeyDeletion&quot;
            - &quot;kms:CancelKeyDeletion&quot;
          Resource: &quot;*&quot;
        - 
          Sid: &quot;Allow use of the key&quot;
          Effect: &quot;Allow&quot;
          Principal: 
            AWS: &quot;arn:aws:iam::123456789012:user/Bob&quot;
          Action: 
            - &quot;kms:DescribeKey&quot;
            - &quot;kms:Encrypt&quot;
            - &quot;kms:Decrypt&quot;
            - &quot;kms:ReEncrypt*&quot;
            - &quot;kms:GenerateDataKey&quot;
            - &quot;kms:GenerateDataKeyWithoutPlaintext&quot;
          Resource: &quot;*&quot;
</code></pre><h3 id="aws-resource-kms-key--examples--Create_a_CMK_with_a_tag">Create a CMK with a tag</h3>
                     <p>The following example creates a custom CMK with a single tag.</p>
                     <h4 id="aws-resource-kms-key--examples--Create_a_CMK_with_a_tag--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Resources&quot; : {
    &quot;myKey&quot; : {
      &quot;Type&quot; : &quot;AWS::KMS::Key&quot;,
      &quot;Properties&quot; : {
        &quot;KeyPolicy&quot; : {
          &quot;Version&quot;: &quot;2012-10-17&quot;,
          &quot;Id&quot;: &quot;key-default-1&quot;,
          &quot;Statement&quot;: [
            {
              &quot;Sid&quot;: &quot;Enable IAM User Permissions&quot;,
              &quot;Effect&quot;: &quot;Allow&quot;,
              &quot;Principal&quot;: {
                &quot;AWS&quot;: { &quot;Fn::Join&quot; : [&quot;&quot; , [&quot;arn:aws:iam::&quot;, {&quot;Ref&quot; : &quot;AWS::AccountId&quot;} ,&quot;:root&quot; ]] }
              },
              &quot;Action&quot;: &quot;kms:*&quot;,
              &quot;Resource&quot;: &quot;*&quot;
            }
          ]
        },
        &quot;Tags&quot; : [
          {
            &quot;Key&quot; : {&quot;Ref&quot; : &quot;Key&quot;},
            &quot;Value&quot; : {&quot;Ref&quot; : &quot;Value&quot;}
          }
        ]
      }
    }
  },
  &quot;Parameters&quot; : {
    &quot;Key&quot; : {
      &quot;Type&quot; : &quot;String&quot;
    },
    &quot;Value&quot; : {
      &quot;Type&quot; : &quot;String&quot;
    }
  }
}</code></pre><h4 id="aws-resource-kms-key--examples--Create_a_CMK_with_a_tag--yaml">YAML</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">Resources:
  myKey:
    Type: AWS::KMS::Key
    Properties:
      KeyPolicy:
        Version: 2012-10-17
        Id: key-default-1
        Statement:
          - Sid: Enable IAM User Permissions
            Effect: Allow
            Principal:
              AWS: !Join 
                - &apos;&apos;
                - - &apos;arn:aws:iam::&apos;
                  - !Ref &apos;AWS::AccountId&apos;
                  - &apos;:root&apos;
            Action: &apos;kms:*&apos;
            Resource: &apos;*&apos;
      Tags:
        - Key: !Ref Key
          Value: !Ref Value
Parameters:
  Key:
    Type: String
  Value:
    Type: String</code></pre><h2 id="aws-resource-kms-key--seealso">See Also</h2>
                     <div class="itemizedlist">
                        
                        
                        
                        
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p> 
                                 <a href="./kms/latest/developerguide/create-keys.html">Creating Keys</a> in the <em>AWS Key Management Service Developer
                                    Guide</em>.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p> 
                                 <a href="./kms/latest/APIReference/API_CreateKey.html">CreateKey</a> in the <em>AWS Key Management Service API
                                    Reference</em>.
                              </p>
                              
                           </li>
                           <li class="listitem">
                              
                              <p> 
                                 <a href="./kms/latest/developerguide/concepts.html#master_keys">Customer master keys</a>
                                 in the <em>AWS Key Management Service Developer Guide</em>.
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     <div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div>
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                       browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be
                                    enabled. Please refer to your browser's Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="aws-resource-kms-alias.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="AWS_KMS.next">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2019, Amazon Web Services, Inc. or its affiliates. All rights
                        reserved.
                     </div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Syntax"><a class="pagetoc" href="#aws-resource-kms-key-syntax">Syntax</a></li>
                        <li class="pagetoc" name="Properties"><a class="pagetoc" href="#aws-resource-kms-key-properties">Properties</a></li>
                        <li class="pagetoc" name="Return Values"><a class="pagetoc" href="#aws-resource-kms-key-return-values">Return Values</a></li>
                        <li class="pagetoc" name="Examples"><a class="pagetoc" href="#aws-resource-kms-key--examples">Examples</a></li>
                        <li class="pagetoc" name="See Also"><a class="pagetoc" href="#aws-resource-kms-key--seealso">See Also</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="cookie-notice">
         <div class="cookie-notice-text">We use cookies to provide and improve our services. By using
            our site, you consent to cookies. <a href="http://aws.amazon.com/legal/cookies">Learn more</a></div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS CloudFormation';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>