<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>AWS::ServiceDiscovery::Service HealthCheckConfig - AWS CloudFormation</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="aws-resource-servicediscovery-service.html" title="AWS::ServiceDiscovery::Service">
      <link rel="prev" href="aws-properties-servicediscovery-service-dnsrecord.html" title="AWS::ServiceDiscovery::Service DnsRecord">
      <link rel="next" href="aws-properties-servicediscovery-service-healthcheckcustomconfig.html" title="AWS::ServiceDiscovery::Service HealthCheckCustomConfig">
      <meta name="description" content="Public DNS namespaces only. A complex type that contains settings for an optional health check. If you specify settings for a health check, AWS Cloud Map associates the health check with the records that you specify in DnsConfig.">
      <meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation Designer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS CloudFormation">
      <meta name="guide" content="User Guide">
      <meta name="guide-locale" content="en_us">
      <meta name="tocs" content="toc-contents.json;toc-AWS_ServiceDiscovery.json">
      <meta name="marketingLocale" content="en_US">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-servicediscovery-service-healthcheckconfig.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20181221"></script><link rel="stylesheet" type="text/css" href="../../../css/marketing-target.css"><script type="text/javascript" src="/assets/marketing/js/marketing-target.js"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="/index.html">AWS Documentation</a> &#xBB; <a href="/cloudformation/index.html">AWS CloudFormation</a> &#xBB; <a href="index.html">User Guide</a> &#xBB; <a href="AWS_ServiceDiscovery.html">AWS Cloud Map Resource Type Reference</a> &#xBB; <a href="aws-resource-servicediscovery-service.html">AWS::ServiceDiscovery::Service</a> &#xBB; <span class="breadcrumb">AWS::ServiceDiscovery::Service HealthCheckConfig</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div id="language-notice">
                        <div class="language-notice-text"></div>
                     </div>
                     <div></div>
                     <div id="language-filter" class="page-header" style="display:none">
                        <form> Filter View: 
                           <select name="filter-select" id="filter-select">
                              <option selected="1">All</option>
                              <option value="JSON" selected>JSON</option>
                              <option value="YAML" selected>YAML</option></select></form>
                     </div>
                     <h1 class="topictitle" id="aws-properties-servicediscovery-service-healthcheckconfig">AWS::ServiceDiscovery::Service HealthCheckConfig</h1>
                     <p>
                        <em>Public DNS namespaces only.</em> A complex type that contains settings for an optional health check. If you 
                        			specify settings for a health check, AWS Cloud Map associates the health check
                        with the records that you specify in 
                        			<code class="code">DnsConfig</code>.
                     </p>
                     <div class="aws-note">
                        <p class="aws-note">Important</p>
                        <p>If you specify a health check configuration, you can specify either <code class="code">HealthCheckCustomConfig</code> or 
                           			<code class="code">HealthCheckConfig</code> but not both.
                        </p>
                     </div>
                     <p>Health checks are basic Route 53 health checks that monitor an AWS endpoint. For information
                        about pricing for 
                        			health checks, see <a href="http://aws.amazon.com/route53/pricing/" target="_blank">Amazon Route 53 Pricing</a>.
                     </p>
                     <p>Note the following about configuring health checks.</p>
                     <p>
                        <b>A and AAAA records</b>
                        
                     </p>
                     <p>If <code class="code">DnsConfig</code> includes configurations for both A and AAAA records, AWS Cloud Map creates a health
                        check 
                        			that uses the IPv4 address to check the health of the resource. If the endpoint
                        that is specified by the IPv4 address is unhealthy, 
                        			Route 53 considers both the A and AAAA records to be unhealthy. 
                     </p>
                     <p>
                        <b>CNAME records</b>
                        
                     </p>
                     <p>You can&apos;t specify settings for <code class="code">HealthCheckConfig</code> when the <code class="code">DNSConfig</code> includes <code class="code">CNAME</code> for 
                        			the value of <code class="code">Type</code>. If you do, the <code class="code">CreateService</code> request will fail with an <code class="code">InvalidInput</code> error.
                     </p>
                     <p>
                        <b>Request interval</b>
                        
                     </p>
                     <p>A Route 53 health checker in each health-checking region sends a health check request
                        to an endpoint every 30 seconds. On average, 
                        			your endpoint receives a health check request about every two seconds. However,
                        health checkers don&apos;t coordinate with one another, 
                        			so you&apos;ll sometimes see several requests per second followed by a few seconds with
                        no health checks at all.
                     </p>
                     <p>
                        <b>Health checking regions</b>
                        
                     </p>
                     <p>Health checkers perform checks from all Route 53 health-checking regions. For a list
                        of the current regions, see 
                        			<a href="./Route53/latest/APIReference/API_HealthCheckConfig.html#Route53-Type-HealthCheckConfig-Regions">Regions</a>.
                     </p>
                     <p>
                        <b>Alias records</b>
                        
                     </p>
                     <p>When you register an instance, if you include the <code class="code">AWS_ALIAS_DNS_NAME</code> attribute, AWS Cloud Map creates a Route 53 alias record. 
                        			Note the following:
                     </p>
                     <div class="itemizedlist">
                        			         
                        			         
                        		       
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              
                              <p>Route 53 automatically sets <code class="code">EvaluateTargetHealth</code> to true for alias records. 
                                 				When <code class="code">EvaluateTargetHealth</code> is true, the alias record inherits the health of the referenced AWS resource. 
                                 				such as an ELB load balancer. For more information, see 
                                 				<a href="./Route53/latest/APIReference/API_AliasTarget.html#Route53-Type-AliasTarget-EvaluateTargetHealth">EvaluateTargetHealth</a>.
                              </p>
                              			         
                           </li>
                           <li class="listitem">
                              
                              <p>If you include <code class="code">HealthCheckConfig</code> and then use the service to register an instance that creates 
                                 				an alias record, Route 53 doesn&apos;t create the health check.
                              </p>
                              
                           </li>
                        </ul>
                     </div>
                     <p>
                        <b>Charges for health checks</b>
                        
                     </p>
                     <p>Health checks are basic Route 53 health checks that monitor an AWS endpoint. For information
                        about pricing for 
                        			health checks, see <a href="http://aws.amazon.com/route53/pricing/" target="_blank">Amazon Route 53 Pricing</a>.
                     </p>
                     <h2 id="aws-properties-servicediscovery-service-healthcheckconfig-syntax">Syntax</h2>
                     <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-properties-servicediscovery-service-healthcheckconfig-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;<a href="#cfn-servicediscovery-service-healthcheckconfig-failurethreshold">FailureThreshold</a>&quot; : <em class="replaceable"><code>Double</code></em>,
  &quot;<a href="#cfn-servicediscovery-service-healthcheckconfig-resourcepath">ResourcePath</a>&quot; : <em class="replaceable"><code>String</code></em>,
  &quot;<a href="#cfn-servicediscovery-service-healthcheckconfig-type">Type</a>&quot; : <em class="replaceable"><code>String</code></em>
}
</code></pre></div>
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-properties-servicediscovery-service-healthcheckconfig-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">  <a href="#cfn-servicediscovery-service-healthcheckconfig-failurethreshold">FailureThreshold</a>: <em class="replaceable"><code>Double</code></em>
  <a href="#cfn-servicediscovery-service-healthcheckconfig-resourcepath">ResourcePath</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-servicediscovery-service-healthcheckconfig-type">Type</a>: <em class="replaceable"><code>String</code></em>
</code></pre></div>
                     <h2 id="aws-properties-servicediscovery-service-healthcheckconfig-properties">Properties</h2>
                     <div class="variablelist">
                        <dl>
                           <dt><a id="cfn-servicediscovery-service-healthcheckconfig-failurethreshold"></a><span class="term"><code class="code">FailureThreshold</code></span></dt>
                           <dd>
                              		       
                              <p>The number of consecutive health checks that an endpoint must pass or fail for Route
                                 53 to change the current status of the endpoint 
                                 			from unhealthy to healthy or vice versa. For more information, see 
                                 			<a href="./Route53/latest/DeveloperGuide/dns-failover-determining-health-of-endpoints.html">How Route 53 Determines 
                                    				Whether an Endpoint Is Healthy</a> in the <em>Route 53 Developer Guide</em>.
                              </p>
                              	     
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: Double
                              </p>
                              <p><em>Minimum</em>: <code class="code">1</code></p>
                              <p><em>Maximum</em>: <code class="code">10</code></p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-servicediscovery-service-healthcheckconfig-resourcepath"></a><span class="term"><code class="code">ResourcePath</code></span></dt>
                           <dd>
                              		       
                              <p>The path that you want Route 53 to request when performing health checks. The path
                                 can be any value for which your endpoint 
                                 			will return an HTTP status code of 2xx or 3xx when the endpoint is healthy, such
                                 as the file <code class="code">/docs/route53-health-check.html</code>. 
                                 			Route 53 automatically adds the DNS name for the service. If you don&apos;t specify
                                 a value for <code class="code">ResourcePath</code>, 
                                 			the default value is <code class="code">/</code>.
                              </p>
                              			      
                              <p>If you specify <code class="code">TCP</code> for <code class="code">Type</code>, you must <em>not</em> specify a value for 
                                 				<code class="code">ResourcePath</code>.
                              </p>
                              	     
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Maximum</em>: <code class="code">255</code></p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                           <dt><a id="cfn-servicediscovery-service-healthcheckconfig-type"></a><span class="term"><code class="code">Type</code></span></dt>
                           <dd>
                              		       
                              <p>The type of health check that you want to create, which indicates how Route 53 determines
                                 whether an endpoint is healthy.
                              </p>
                              		
                              		       
                              <div class="aws-note">
                                 <p class="aws-note">Important</p>
                                 <p>You can&apos;t change the value of <code class="code">Type</code> after you create a health check.
                                 </p>
                              </div>
                              		
                              		       
                              <p>You can create the following types of health checks:</p>
                              		       
                              <div class="itemizedlist">
                                 			         
                                 			         
                                 			         
                                 		       
                                 <ul class="itemizedlist" type="disc">
                                    <li class="listitem">
                                       
                                       <p>
                                          <b>HTTP</b>: Route 53 tries to establish a TCP connection. If successful, Route 53 submits an
                                          
                                          				HTTP request and waits for an HTTP status code of 200 or greater and less than
                                          400.
                                       </p>
                                       			         
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>
                                          <b>HTTPS</b>: Route 53 tries to establish a TCP connection. If successful, Route 53 submits an
                                          
                                          				HTTPS request and waits for an HTTP status code of 200 or greater and less than
                                          400.
                                       </p>
                                       				           
                                       <div class="aws-note">
                                          <p class="aws-note">Important</p>
                                          <p>If you specify HTTPS for the value of <code class="code">Type</code>, the endpoint must support TLS v1.0 or later.
                                          </p>
                                       </div>
                                       			         
                                    </li>
                                    <li class="listitem">
                                       
                                       <p>
                                          <b>TCP</b>: Route 53 tries to establish a TCP connection.
                                       </p>
                                       				           
                                       <p>If you specify <code class="code">TCP</code> for <code class="code">Type</code>, don&apos;t specify a value for <code class="code">ResourcePath</code>.
                                       </p>
                                       			         
                                    </li>
                                 </ul>
                              </div>
                              		       
                              <p>For more information, see 
                                 			<a href="./Route53/latest/DeveloperGuide/dns-failover-determining-health-of-endpoints.html">How Route 53 Determines 
                                    				Whether an Endpoint Is Healthy</a> in the <em>Route 53 Developer Guide</em>.
                              </p>
                              	     
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Allowed Values</em>: <code class="code">HTTP | HTTPS | TCP</code></p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-no-interrupt">No interruption</a></p>
                           </dd>
                        </dl>
                     </div>
                     <h2 id="aws-properties-servicediscovery-service-healthcheckconfig--seealso">See Also</h2>
                     <div class="itemizedlist">
                        				
                        			
                        <ul class="itemizedlist" type="disc">
                           <li class="listitem">
                              					
                              <p>
                                 						<a href="./cloud-map/latest/api/API_HealthCheckConfig.html">HealthCheckConfig</a> 
                                 						in the <em>AWS Cloud Map API Reference</em>
                                 					
                              </p>
                              				
                           </li>
                        </ul>
                     </div>
                     <div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div>
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                       browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be
                                    enabled. Please refer to your browser's Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="aws-properties-servicediscovery-service-dnsrecord.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="aws-properties-servicediscovery-service-healthcheckcustomconfig.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2019, Amazon Web Services, Inc. or its affiliates. All rights
                        reserved.
                     </div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Syntax"><a class="pagetoc" href="#aws-properties-servicediscovery-service-healthcheckconfig-syntax">Syntax</a></li>
                        <li class="pagetoc" name="Properties"><a class="pagetoc" href="#aws-properties-servicediscovery-service-healthcheckconfig-properties">Properties</a></li>
                        <li class="pagetoc" name="See Also"><a class="pagetoc" href="#aws-properties-servicediscovery-service-healthcheckconfig--seealso">See Also</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="cookie-notice">
         <div class="cookie-notice-text">We use cookies to provide and improve our services. By using
            our site, you consent to cookies. <a href="http://aws.amazon.com/legal/cookies">Learn more</a></div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS CloudFormation';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>