<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>AWS::EC2::FlowLog - AWS CloudFormation</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="AWS_EC2.html" title="EC2 Resource Type Reference">
      <link rel="prev" href="aws-resource-ec2-egressonlyinternetgateway.html" title="AWS::EC2::EgressOnlyInternetGateway">
      <link rel="next" href="aws-resource-ec2-host.html" title="AWS::EC2::Host">
      <meta name="description" content="Specifies an Amazon Elastic Compute Cloud (Amazon EC2) flow log that captures IP traffic for a specified network interface, subnet, or VPC. To view the log data, use Amazon CloudWatch Logs (CloudWatch Logs) to help troubleshoot connection issues. For example, you can use a flow log to investigate why certain traffic isn&apos;t reaching an instance, which can help you diagnose overly restrictive security group rules. For more information, see VPC Flow Logs in the Amazon VPC User Guide.">
      <meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation Designer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS CloudFormation">
      <meta name="guide" content="User Guide">
      <meta name="guide-locale" content="en_us">
      <meta name="tocs" content="toc-contents.json;toc-AWS_EC2.json">
      <meta name="marketingLocale" content="en_US">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-resource-ec2-flowlog.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20181221"></script><link rel="stylesheet" type="text/css" href="../../../css/marketing-target.css"><script type="text/javascript" src="/assets/marketing/js/marketing-target.js"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="/index.html">AWS Documentation</a> &#xBB; <a href="/cloudformation/index.html">AWS CloudFormation</a> &#xBB; <a href="index.html">User Guide</a> &#xBB; <a href="AWS_EC2.html">EC2 Resource Type Reference</a> &#xBB; <span class="breadcrumb">AWS::EC2::FlowLog</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div id="language-notice">
                        <div class="language-notice-text"></div>
                     </div>
                     <div></div>
                     <div id="language-filter" class="page-header" style="display:none">
                        <form> Filter View: 
                           <select name="filter-select" id="filter-select">
                              <option selected="1">All</option>
                              <option value="JSON" selected>JSON</option>
                              <option value="YAML" selected>YAML</option></select></form>
                     </div>
                     <h1 class="topictitle" id="aws-resource-ec2-flowlog">AWS::EC2::FlowLog</h1>
                     <p>Specifies an Amazon Elastic Compute Cloud 
                        (Amazon EC2) flow log that captures IP traffic for a specified network interface,
                        subnet, 
                        or VPC. To view the log data, use Amazon CloudWatch Logs (CloudWatch Logs) to help
                        
                        troubleshoot connection issues. For example, you can use a flow log to investigate
                        why 
                        certain traffic isn&apos;t reaching an instance, which can help you diagnose overly restrictive
                        
                        security group rules. For more information, see 
                        <a href="./vpc/latest/userguide/flow-logs.html">VPC Flow Logs</a> 
                        in the <em>Amazon VPC User Guide</em>.
                     </p>
                     <h2 id="aws-resource-ec2-flowlog-syntax">Syntax</h2>
                     <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-resource-ec2-flowlog-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;Type&quot; : &quot;AWS::EC2::FlowLog&quot;,
  &quot;Properties&quot; : {
      &quot;<a href="#cfn-ec2-flowlog-deliverlogspermissionarn">DeliverLogsPermissionArn</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-flowlog-logdestination">LogDestination</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-flowlog-logdestinationtype">LogDestinationType</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-flowlog-loggroupname">LogGroupName</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-flowlog-resourceid">ResourceId</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-flowlog-resourcetype">ResourceType</a>&quot; : <em class="replaceable"><code>String</code></em>,
      &quot;<a href="#cfn-ec2-flowlog-traffictype">TrafficType</a>&quot; : <em class="replaceable"><code>String</code></em>
    }
}
</code></pre></div>
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-resource-ec2-flowlog-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">Type: AWS::EC2::FlowLog
Properties: 
  <a href="#cfn-ec2-flowlog-deliverlogspermissionarn">DeliverLogsPermissionArn</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-flowlog-logdestination">LogDestination</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-flowlog-logdestinationtype">LogDestinationType</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-flowlog-loggroupname">LogGroupName</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-flowlog-resourceid">ResourceId</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-flowlog-resourcetype">ResourceType</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ec2-flowlog-traffictype">TrafficType</a>: <em class="replaceable"><code>String</code></em>
</code></pre></div>
                     <h2 id="aws-resource-ec2-flowlog-properties">Properties</h2>
                     <div class="variablelist">
                        <dl>
                           <dt><a id="cfn-ec2-flowlog-deliverlogspermissionarn"></a><span class="term"><code class="code">DeliverLogsPermissionArn</code></span></dt>
                           <dd>
                              	      
                              <p>The ARN for the IAM role that permits Amazon EC2 to publish flow logs to a CloudWatch
                                 Logs log group 
                                 		in your account.
                              </p>
                              	      
                              <p>If you specify <code class="code">LogDestinationType</code> as <code class="code">s3</code>, do not specify 
                                 		<code class="code">DeliverLogsPermissionArn</code> or <code class="code">LogGroupName</code>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-flowlog-logdestination"></a><span class="term"><code class="code">LogDestination</code></span></dt>
                           <dd>
                              		       
                              <p>Specifies the destination to which the flow log data is to be published. Flow log
                                 data can be published 
                                 			to a CloudWatch Logs log group or an Amazon S3 bucket. The value specified for
                                 this parameter depends on the value specified
                                 			for <code class="code">LogDestinationType</code>.
                              </p>
                              		       
                              <p>If LogDestinationType is not specified or <code class="code">cloud-watch-logs</code>, specify the Amazon Resource Name 
                                 			(ARN) of the CloudWatch Logs log group.
                              </p> 
                              		       
                              <p>If LogDestinationType is <code class="code">s3</code>, specify the ARN of the Amazon S3 bucket. You can also specify a 
                                 			subfolder in the bucket. To specify a subfolder in the bucket, use the following
                                 ARN format: 
                                 			<code class="code">bucket_ARN/subfolder_name/</code>. For example, to specify a subfolder named <code class="code">my-logs</code> in a 
                                 			bucket named <code class="code">my-bucket</code>, use the following ARN: <code class="code">arn:aws:s3:::my-bucket/my-logs/</code>. You 
                                 			cannot use <code class="code">AWSLogs</code> as a subfolder name. This is a reserved term.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-flowlog-logdestinationtype"></a><span class="term"><code class="code">LogDestinationType</code></span></dt>
                           <dd>
                              		       
                              <p>Specifies the type of destination to which the flow log data is to be published. Flow
                                 log data can be 
                                 			published to CloudWatch Logs or Amazon S3. To publish flow log data to CloudWatch
                                 Logs, specify <code class="code">cloud-watch-logs</code>. To 
                                 			publish flow log data to Amazon S3, specify <code class="code">s3</code>.
                              </p>
                              		       
                              <p>If you specify <code class="code">LogDestinationType</code> as <code class="code">s3</code>, do not specify 
                                 			<code class="code">DeliverLogsPermissionArn</code> or <code class="code">LogGroupName</code>.
                              </p>
                              		       
                              <p>Default: <code class="code">cloud-watch-logs</code>
                                 
                              </p>
                              	     
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Allowed Values</em>: <code class="code">cloud-watch-logs | s3</code></p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-flowlog-loggroupname"></a><span class="term"><code class="code">LogGroupName</code></span></dt>
                           <dd>
                              	      
                              <p>The name of a new or existing CloudWatch Logs log group where Amazon EC2 publishes
                                 your flow logs.
                              </p>
                              	      
                              <p>If you specify <code class="code">LogDestinationType</code> as <code class="code">s3</code>, do not specify 
                                 		<code class="code">DeliverLogsPermissionArn</code> or <code class="code">LogGroupName</code>.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-flowlog-resourceid"></a><span class="term"><code class="code">ResourceId</code></span></dt>
                           <dd>
                              	      
                              <p>The ID of the subnet, network interface, or VPC for which you want to create a flow
                                 log.
                              </p>
                              
                              <p>Constraints: Maximum of 1000 resources</p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-flowlog-resourcetype"></a><span class="term"><code class="code">ResourceType</code></span></dt>
                           <dd>
                              	      
                              <p>The type of resource for which to create the flow log. For example, if you specified
                                 a VPC ID for 
                                 		the <code class="code">ResourceId</code> property, specify <code class="code">VPC</code> for this property.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Allowed Values</em>: <code class="code">NetworkInterface | Subnet | VPC</code></p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ec2-flowlog-traffictype"></a><span class="term"><code class="code">TrafficType</code></span></dt>
                           <dd>
                              	      
                              <p>The type of traffic to log. You can log traffic that the resource accepts or rejects,
                                 or all traffic.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Allowed Values</em>: <code class="code">ACCEPT | ALL | REJECT</code></p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                        </dl>
                     </div>
                     <h2 id="aws-resource-ec2-flowlog-return-values">Return Values</h2>
                     <h3 id="aws-resource-ec2-flowlog-return-values-ref">Ref</h3>
                     <p>When you pass the logical ID of this resource to the intrinsic <code class="code">Ref</code> function, <code class="code">Ref</code> returns the flow log ID, such as <code class="code">fl-1a23b456</code>.
                     </p>
                     <p>For more information about using the <code class="code">Ref</code> function, see <a href="./AWSCloudFormation/latest/UserGuide/intrinsic-function-reference-ref.html">Ref</a>.
                     </p>
                     <h2 id="aws-resource-ec2-flowlog--examples">Examples</h2>
                     <h3 id="aws-resource-ec2-flowlog--examples--Creating_a_flow_log_that_monitors_all_traffic_types">Creating a flow log that monitors all traffic types</h3>
                     <p>The following example creates a flow log for the VPC called MyVPC and logs all traffic
                        types. Amazon EC2 publishes the logs to the <code class="code">FlowLogsGroup</code> log group.
                     </p>
                     <h4 id="aws-resource-ec2-flowlog--examples--Creating_a_flow_log_that_monitors_all_traffic_types--json">JSON</h4><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">&quot;MyFlowLog&quot; : {
  &quot;Type&quot; : &quot;AWS::EC2::FlowLog&quot;,
  &quot;Properties&quot; : {
    &quot;DeliverLogsPermissionArn&quot; : { &quot;Fn::GetAtt&quot; : [&quot;FlowLogRole&quot;, &quot;Arn&quot;] },
    &quot;LogGroupName&quot; : &quot;FlowLogsGroup&quot;,
    &quot;ResourceId&quot; : { &quot;Ref&quot; : &quot;MyVPC&quot; },
    &quot;ResourceType&quot; : &quot;VPC&quot;,
    &quot;TrafficType&quot; : &quot;ALL&quot;
  }
}</code></pre><div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div>
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                       browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be
                                    enabled. Please refer to your browser's Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="aws-resource-ec2-egressonlyinternetgateway.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="aws-resource-ec2-host.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2019, Amazon Web Services, Inc. or its affiliates. All rights
                        reserved.
                     </div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Syntax"><a class="pagetoc" href="#aws-resource-ec2-flowlog-syntax">Syntax</a></li>
                        <li class="pagetoc" name="Properties"><a class="pagetoc" href="#aws-resource-ec2-flowlog-properties">Properties</a></li>
                        <li class="pagetoc" name="Return Values"><a class="pagetoc" href="#aws-resource-ec2-flowlog-return-values">Return Values</a></li>
                        <li class="pagetoc" name="Examples"><a class="pagetoc" href="#aws-resource-ec2-flowlog--examples">Examples</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="cookie-notice">
         <div class="cookie-notice-text">We use cookies to provide and improve our services. By using
            our site, you consent to cookies. <a href="http://aws.amazon.com/legal/cookies">Learn more</a></div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS CloudFormation';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>