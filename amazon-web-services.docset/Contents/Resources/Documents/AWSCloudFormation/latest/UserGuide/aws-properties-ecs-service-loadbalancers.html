<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>AWS::ECS::Service LoadBalancer - AWS CloudFormation</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="home" href="#top">
      <link rel="up" href="aws-resource-ecs-service.html" title="AWS::ECS::Service">
      <link rel="prev" href="aws-properties-ecs-service-deploymentconfiguration.html" title="AWS::ECS::Service DeploymentConfiguration">
      <link rel="next" href="aws-properties-ecs-service-networkconfiguration.html" title="AWS::ECS::Service NetworkConfiguration">
      <meta name="description" content="The LoadBalancer property specifies details on a load balancer that is used with a service.">
      <meta name="keywords" content="CloudFormation,AWSCloudFormation,resource provisioning,resource configuration,infrastructure management,CloudFormer,CloudFormation Designer,CloudFormation stack,CloudFormation stackset,CloudFormation template,change set">
      <meta name="deployment_region" content="IAD">
      <meta name="product" content="AWS CloudFormation">
      <meta name="guide" content="User Guide">
      <meta name="guide-locale" content="en_us">
      <meta name="tocs" content="toc-contents.json;toc-AWS_ECS.json">
      <meta name="marketingLocale" content="en_US">
      <link rel="icon" type="image/ico" href="/images/favicon.ico">
      <link rel="shortcut icon" type="image/ico" href="/images/favicon.ico">
      <link rel="canonical" href="https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/aws-properties-ecs-service-loadbalancers.html">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/font-awesome.min.css">
      <link rel="stylesheet" type="text/css" href="../../../css/google-font.css">
      <link id="code-style" rel="stylesheet" type="text/css" href="../../../css/light.css">
      <link rel="stylesheet" type="text/css" href="../../../css/jquery-ui.theme.css">
      <link rel="stylesheet" type="text/css" href="../../../css/colorbox.css">
      <link rel="stylesheet" type="text/css" href="../../../css/awsdocs.css"><script type="text/javascript" src="/js/highlight.pack.js"></script><script type="text/javascript" src="/js/jquery.min.js"></script><script type="text/javascript" src="/js/jquery-ui.min.js"></script><script type="text/javascript" src="/js/jquery.colorbox.js"></script><script type="text/javascript" src="/js/awsdocs.min.js?v=20181221"></script><link rel="stylesheet" type="text/css" href="../../../css/marketing-target.css"><script type="text/javascript" src="/assets/marketing/js/marketing-target.js"></script></head>
   <body id="top">
      
      <div id="content-container">
         
         <div id="main-column">
            <div id="main">
               <div id="main-content">
                  <div id="main-col-body">
                     <table summary="Breadcrumbs">
                        <tbody><tr>
                           <td>
                              <div class="breadcrumb"><a href="/index.html">AWS Documentation</a> &#xBB; <a href="/cloudformation/index.html">AWS CloudFormation</a> &#xBB; <a href="index.html">User Guide</a> &#xBB; <a href="AWS_ECS.html">ECS Resource Type Reference</a> &#xBB; <a href="aws-resource-ecs-service.html">AWS::ECS::Service</a> &#xBB; <span class="breadcrumb">AWS::ECS::Service LoadBalancer</span></div>
                           </td>
                        </tr>
                     </tbody></table>
                     <div id="language-notice">
                        <div class="language-notice-text"></div>
                     </div>
                     <div></div>
                     <div id="language-filter" class="page-header" style="display:none">
                        <form> Filter View: 
                           <select name="filter-select" id="filter-select">
                              <option selected="1">All</option>
                              <option value="JSON" selected>JSON</option>
                              <option value="YAML" selected>YAML</option></select></form>
                     </div>
                     <h1 class="topictitle" id="aws-properties-ecs-service-loadbalancers">AWS::ECS::Service LoadBalancer</h1>
                     <p>The <code class="code">LoadBalancer</code> property specifies details on a load balancer that is
                        used with a service.
                     </p>
                     <p>If the service is using the <code class="code">ECS</code> deployment controller, you are limited to
                        one load balancer or target group.
                     </p>
                     <p>If the service is using the <code class="code">CODE_DEPLOY</code> deployment controller, the
                        service is required to use either an Application Load Balancer or Network Load Balancer.
                        When you are creating an AWS CodeDeploy deployment group, you specify two target groups
                        (referred to as a <code class="code">targetGroupPair</code>). Each target group binds to a separate
                        task set in the deployment. The load balancer can also have up to two listeners, a
                        required listener for production traffic and an optional listener that allows you
                        to
                        test new revisions of the service before routing production traffic to it.
                     </p>
                     <p>Services with tasks that use the <code class="code">awsvpc</code> network mode (for example, those
                        with the Fargate launch type) only support Application Load Balancers and Network
                        Load
                        Balancers. Classic Load Balancers are not supported. Also, when you create any target
                        groups for these services, you must choose <code class="code">ip</code> as the target type, not
                        <code class="code">instance</code>. Tasks that use the <code class="code">awsvpc</code> network mode are
                        associated with an elastic network interface, not an Amazon EC2 instance.
                     </p>
                     <h2 id="aws-properties-ecs-service-loadbalancers-syntax">Syntax</h2>
                     <p>To declare this entity in your AWS CloudFormation template, use the following syntax:</p>
                     <div id="JSON" name="JSON" class="section langfilter">
                        <h3 id="aws-properties-ecs-service-loadbalancers-syntax.json">JSON</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="json ">{
  &quot;<a href="#cfn-ecs-service-loadbalancers-containername">ContainerName</a>&quot; : <em class="replaceable"><code>String</code></em>,
  &quot;<a href="#cfn-ecs-service-loadbalancers-containerport">ContainerPort</a>&quot; : <em class="replaceable"><code>Integer</code></em>,
  &quot;<a href="#cfn-ecs-service-loadbalancers-loadbalancername">LoadBalancerName</a>&quot; : <em class="replaceable"><code>String</code></em>,
  &quot;<a href="#cfn-ecs-service-loadbalancers-targetgrouparn">TargetGroupArn</a>&quot; : <em class="replaceable"><code>String</code></em>
}
</code></pre></div>
                     <div id="YAML" name="YAML" class="section langfilter">
                        <h3 id="aws-properties-ecs-service-loadbalancers-syntax.yaml">YAML</h3><pre class="programlisting"><div class="code-btn-container"><div class="btn-copy-code" title="Copy"></div><div class="btn-dark-theme" title="Dark theme" title-dark="Dark theme" title-light="Light theme"></div></div><code class="yaml ">  <a href="#cfn-ecs-service-loadbalancers-containername">ContainerName</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ecs-service-loadbalancers-containerport">ContainerPort</a>: <em class="replaceable"><code>Integer</code></em>
  <a href="#cfn-ecs-service-loadbalancers-loadbalancername">LoadBalancerName</a>: <em class="replaceable"><code>String</code></em>
  <a href="#cfn-ecs-service-loadbalancers-targetgrouparn">TargetGroupArn</a>: <em class="replaceable"><code>String</code></em>
</code></pre></div>
                     <h2 id="aws-properties-ecs-service-loadbalancers-properties">Properties</h2>
                     <div class="variablelist">
                        <dl>
                           <dt><a id="cfn-ecs-service-loadbalancers-containername"></a><span class="term"><code class="code">ContainerName</code></span></dt>
                           <dd>
                              
                              <p>The name of the container (as it appears in a container definition) to associate with
                                 the load balancer.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ecs-service-loadbalancers-containerport"></a><span class="term"><code class="code">ContainerPort</code></span></dt>
                           <dd>
                              
                              <p>The port on the container to associate with the load balancer. This port must
                                 correspond to a <code class="code">containerPort</code> in the service&apos;s task definition. Your
                                 container instances must allow ingress traffic on the <code class="code">hostPort</code> of the port
                                 mapping.
                              </p>
                              
                              <p><em>Required</em>: Yes
                              </p>
                              <p><em>Type</em>: Integer
                              </p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ecs-service-loadbalancers-loadbalancername"></a><span class="term"><code class="code">LoadBalancerName</code></span></dt>
                           <dd>
                              
                              <p>The name of the load balancer to associate with the Amazon ECS service or task set.</p>
                              
                              <p>A load balancer name is only specified when using a classic load balancer. If you
                                 are
                                 using an application load balancer or a network load balancer this should be
                                 omitted.
                              </p>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                           <dt><a id="cfn-ecs-service-loadbalancers-targetgrouparn"></a><span class="term"><code class="code">TargetGroupArn</code></span></dt>
                           <dd>
                              
                              <p>The full Amazon Resource Name (ARN) of the Elastic Load Balancing target group or
                                 groups associated with a service or
                                 task set.
                              </p>
                              
                              <p>A target group ARN is only specified when using an application load balancer or a
                                 network load balancer. If you are using a classic load balancer this should be
                                 omitted.
                              </p>
                              
                              <p>For services using the <code class="code">ECS</code> deployment controller, you are limited to one
                                 target group. For services using the <code class="code">CODE_DEPLOY</code> deployment controller, you
                                 are required to define two target groups for the load balancer.
                              </p>
                              
                              <div class="aws-note">
                                 <p class="aws-note">Important</p>
                                 <p>If your service&apos;s task definition uses the <code class="code">awsvpc</code> network mode (which
                                    is required for the Fargate launch type), you must choose
                                    <code class="code">ip</code> as the target type, not <code class="code">instance</code>, because tasks
                                    that use the <code class="code">awsvpc</code> network mode are associated with an elastic network
                                    interface, not an Amazon EC2 instance.
                                 </p>
                              </div>
                              
                              <p><em>Required</em>: No
                              </p>
                              <p><em>Type</em>: String
                              </p>
                              <p><em>Update requires</em>: <a href="./AWSCloudFormation/latest/UserGuide/using-cfn-updating-stacks-update-behaviors.html#update-replacement">Replacement</a></p>
                           </dd>
                        </dl>
                     </div>
                     <div id="marketing-target"><span class="close-button"></span><div class="marketing-title" id="marketing-title"></div>
                        <div class="marketing-description"><span id="marketing-description"></span><span id="marketing-cta"></span></div>
                     </div>
                  </div>
                  <noscript>
                     <div>
                        <div>
                           <div>
                              <div id="js_error_message">
                                 <p><img src="https://d1ge0kk1l5kms0.cloudfront.net/images/G/01/webservices/console/warning.png" alt="Warning" /> <strong>Javascript is disabled or is unavailable in your
                                       browser.</strong></p>
                                 <p>To use the AWS Documentation, Javascript must be
                                    enabled. Please refer to your browser's Help pages for instructions.
                                 </p>
                              </div>
                           </div>
                        </div>
                     </div>
                  </noscript>
                  <div id="main-col-footer">
                     <div id="doc-conventions"><a target="_top" href="/general/latest/gr/docconventions.html">Document Conventions</a></div>
                     <div id="next"><a class="awstoc" accesskey="p" href="aws-properties-ecs-service-deploymentconfiguration.html">&#xAB; Previous </a><a class="awstoc" accesskey="n" href="aws-properties-ecs-service-networkconfiguration.html">Next &#xBB;</a></div>
                     <div id="copyright-main-footer">&#xA9; 2019, Amazon Web Services, Inc. or its affiliates. All rights
                        reserved.
                     </div>
                  </div>
               </div>
            </div>
            <div id="right-expanded">
               <div id="right-content-wrapper">
                  <div id="pagetoc">
                     <p>On this page:</p>
                     <ul class="pagetoc">
                        <li class="pagetoc" name="Syntax"><a class="pagetoc" href="#aws-properties-ecs-service-loadbalancers-syntax">Syntax</a></li>
                        <li class="pagetoc" name="Properties"><a class="pagetoc" href="#aws-properties-ecs-service-loadbalancers-properties">Properties</a></li>
                     </ul>
                  </div>
               </div>
            </div>
         </div>
      </div>
      <div id="cookie-notice">
         <div class="cookie-notice-text">We use cookies to provide and improve our services. By using
            our site, you consent to cookies. <a href="http://aws.amazon.com/legal/cookies">Learn more</a></div>
      </div>
      
      <!-- SiteCatalyst code version: H.25.2.
            Copyright 1996-2012 Adobe, Inc. All Rights Reserved
            More info available at http://www.omniture.com --><script language="JavaScript" type="text/javascript" src="https://a0.awsstatic.com/s_code/js/1.0/awshome_s_code.js"></script><script language="JavaScript" type="text/javascript">
         <!--

            // Documentation Service Name
            s.prop66='AWS CloudFormation';
            s.eVar66='D=c66';
  
            // Documentation Guide Name                                                                 
            s.prop65='User Guide';
            s.eVar65='D=c65';

            var s_code=s.t();if(s_code)document.write(s_code)//--></script><script language="JavaScript" type="text/javascript">
         <!--
                if(navigator.appVersion.indexOf('MSIE')>=0)document.write(unescape('%3C')+'\!-'+'-')
                //--></script><noscript><img src="https://amazonwebservices.d2.sc.omtrdc.net/b/ss/awsamazondev/1/H.25.2--NS/0" height="1" width="1" border="0" alt="" /></noscript>
      <!--/DO NOT REMOVE/-->
      <!-- End SiteCatalyst code version: H.25.2. -->
   
</body></html>